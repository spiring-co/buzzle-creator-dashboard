(this.webpackJsonppharaoh=this.webpackJsonppharaoh||[]).push([[0],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return _})),a.d(t,"b",(function(){return f}));var n=a(4),r=a.n(n),o=a(52),i=a(41),l=a(8),c=a(5),s=a(7),u=a(0),d=a.n(u),m=a(39),p={initialFreeAmount:{value:1,currency:"USD"},apiURL:"https://api.buzzle.site",socketURL:"https://sockets.buzzle.site",createrLoyaltyPercentageShareValue:30,renderLoyaltyPercentageShareValye:50,instances:[]},v=Object(s.a)(Object(s.a)({},p),{},{isConfigLoading:!0,configError:null,instances:[]}),b=Object(u.createContext)(v);function f(){var e=Object(u.useContext)(b);return e||console.log("useConfig must be used within a RemoteConfigProvider"),e}function _(e){var t=Object(u.useState)({config:p}),a=Object(c.a)(t,2),n=a[0],v=a[1],f=Object(u.useState)(!0),_=Object(c.a)(f,2),h=_[0],E=_[1],g=Object(u.useState)(null),y=Object(c.a)(g,2),O=y[0],j=y[1],D=Object(u.useState)([]),k=Object(c.a)(D,2),S=k[0],x=k[1],w=["config"];Object(u.useEffect)((function(){C()}),[]);var C=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(null),E(!0),e.next=5,m.b.fetchAndActivate();case 5:return e.next=7,fetch("".concat("https://api.buzzle.site","/status/instances"));case 7:if(!(t=e.sent).ok){e.next=15;break}return e.next=11,t.json();case 11:t=e.sent,x(t),e.next=16;break;case 15:t=[];case 16:v(Object.assign.apply(Object,[{instances:t}].concat(Object(i.a)(w.map((function(e){return Object(o.a)({},e,JSON.parse(m.b.getValue(e).asString()))})))))),E(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),E(!1),v({config:p});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),T=Object(u.useMemo)((function(){return Object(s.a)(Object(s.a)({},Object(s.a)(Object(s.a)({},n.config),{},{instances:S})),{},{isConfigLoading:h,configError:O})}),[n,h,O]);return d.a.createElement(b.Provider,Object.assign({value:T},e))}},116:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(4),a(8);var n=a(474),r={archive:"true",deleteAfter7Days:"1 week",deleteAfter90Days:"90 Days"},o=(new(a.n(n).a.EC2)({apiVersion:"2016-11-15"}),new n.S3({endpoint:"https://sgp1.digitaloceanspaces.com",region:"us-east-1",credentials:{accessKeyId:"RFQVO4EOPKFXOVLJQJYL",secretAccessKey:"x6ZaZ39bCBEpiq8XfImx2rDBZarPc18Gp9sEZHULr9E"}})),i=function(e,t,a){var n=o.upload({Bucket:"buzzle",Key:e,Body:t,ACL:"public-read"},{tags:[{Key:a||"archive",Value:r[a||"archive"]}]});return n}},1260:function(e,t){},1262:function(e,t){},1364:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),i=a.n(o),l=a(5),c=a(220),s=a(223),u=Object(c.a)({palette:{type:"dark",primary:{main:"#3742fa"},secondary:s.a,background:{default:"#222",paper:"#333"}},typography:{fontSize:14,fontFamily:"Noto Sans JP",fontWeightRegular:500,h3:{fontWeight:700},h4:{fontWeight:700},h5:{fontWeight:700},h6:{fontWeight:700}},overrides:{MuiLink:{root:{fontWeight:600}},MuiStepLabel:{label:{fontWeight:700},active:{fontWeight:700}},MuiButton:{label:{fontWeight:700}}}}),d=Object(c.a)({palette:{type:"light",primary:{main:"#3742fa"},secondary:s.a},typography:{fontSize:14,fontFamily:"Noto Sans JP",fontWeightRegular:500,h3:{fontWeight:700},h4:{fontWeight:700},h5:{fontWeight:700},h6:{fontWeight:700}},overrides:{MuiLink:{root:{fontWeight:600}},MuiStepLabel:{label:{fontWeight:700},active:{fontWeight:700}},MuiButton:{label:{fontWeight:700}},MuiTab:{wrapper:{fontWeight:700,color:"#3742fa"}}}}),m=Object(n.createContext)(),p=function(){var e=Object(n.useContext)(m);return e||console.log("useAuth must be used within a DarkModeProvider"),e};function v(e){var t=Object(n.useState)("light"),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),u=s[0],d=s[1],p=function(e){window.localStorage.setItem("theme",e),i(e)};return Object(n.useEffect)((function(){var e=window.localStorage.getItem("theme");window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&!e?p("dark"):e?i(e):p("light"),d(!0)}),[]),r.a.createElement(m.Provider,Object.assign({value:[o,function(){p("light"===o?"dark":"light")},u]},e))}var b=a(57),f=a(21),_=function(e){var t=Object(f.b)(),a=t.user,o=t.isUserLoading,i=Object(n.useState)(!(!a&&!o)),c=Object(l.a)(i,2),s=c[0],u=c[1];return Object(n.useEffect)((function(){u(!(!a&&!o))}),[a,o]),s?r.a.createElement(b.b,e):r.a.createElement(b.a,{to:"/login"})},h=a(7),E=a(363),g=a(361),y=a(1452),O=a(1453),j=a(1454),D=a(1455),k=a(672),S=a.n(k),x=a(52),w=a(633),C=a(350),T=a(248),P=a(632),A=a(1380),R=a(1461),M=a(238),I=a(1401),L=a(1400),U=a(120),B=a(247),z=a(1376),F=a(1379),W=a(1399),N=a(534),K=a(35),V=a(463),G=a(99),q=a(642),J=a.n(q),H=a(641),Y=a.n(H),Z=a(643),X=a.n(Z),Q=a(2),$=a(644),ee=a.n($),te=a(44),ae=a(34),ne=a(4),re=a.n(ne),oe=a(8),ie=a(39),le=a(1378),ce=a(1397),se=a(203),ue=a(184),de=a(204),me=a(1387),pe=a(532),ve=a(377),be=a(303),fe=a(533),_e=a(472),he=a.n(_e),Ee=a(473),ge=a.n(Ee),ye=a(1458),Oe=a(101),je=a(29),De=a(131),ke=function(e){return r.a.createElement(G.a,Object.assign({},e,{style:Object(h.a)({fontFamily:"Poppins",fontWeight:600},e.style||{}),variant:"h5"}))},Se=function(e){return r.a.createElement(G.a,Object.assign({},e,{style:Object(h.a)({fontFamily:"Poppins",fontSize:16,fontWeight:500},e.style||{})}))},xe=function(e){return r.a.createElement(G.a,Object.assign({},e,{style:Object(h.a)({fontSize:14,fontWeight:500,fontFamily:"Poppins"},e.style||{})}))},we=function(e){return r.a.createElement(G.a,Object.assign({},e,{style:Object(h.a)({fontSize:12,fontFamily:"Poppins",fontWeight:500},e.style||{}),variant:"subtitle1"}))},Ce=function(e){var t,a=e.message,o=void 0===a?"":a,i=e.email,c=void 0===i?"":i,s=e.onSubmit,u=e.handleClose,d=e.initialMode,m=void 0===d?"check":d,p=e.onModeChange,v=Object(te.b)().enqueueSnackbar,_=Object(b.g)(),h=Object(n.useState)(m||"check"),E=Object(l.a)(h,2),g=E[0],y=E[1],O=Object(n.useState)(null),j=Object(l.a)(O,2),D=j[0],k=j[1],S=Object(n.useState)(!1),x=Object(l.a)(S,2),w=x[0],C=x[1],T=Object(f.b)(),P=T.signUpWithEmailPassword,A=T.user,R=T.forgotPassword,I=T.checkUserExist,L=T.signInWithPassword,U=Object(n.useState)(!1),z=Object(l.a)(U,2),F=z[0],W=z[1],N=Object(n.useState)(!1),K=Object(l.a)(N,2),V=K[0],G=K[1],q=r.a.useCallback(function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,o,i,l,c,u,d,m,p,b,f;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,r=t.name,o=t.newPassword,e.prev=1,C(!0),k(null),"check"!==g){e.next=14;break}return e.next=7,I(a||"");case 7:if(!e.sent){e.next=11;break}y("login"),e.next=12;break;case 11:y("register");case 12:e.next=55;break;case 14:if("register"!==g){e.next=20;break}return s&&s({email:a,password:n,name:r}),e.next=18,P(a||"",n||"",r||"");case 18:e.next=55;break;case 20:if("login"!==g){e.next=26;break}return s&&s({email:a,password:n}),e.next=24,L(a||"",n||"");case 24:e.next=55;break;case 26:if("forgot-pass"!==g){e.next=34;break}return s&&s({email:a}),e.next=30,R(a);case 30:_.replace("/login?email=".concat(a,"&message=Follow the instructions sent to ").concat(a," to recover your password")),y("login"),e.next=55;break;case 34:if("re-auth"!==g){e.next=41;break}return c=De.a.auth.EmailAuthProvider.credential((null===(i=ie.a.currentUser)||void 0===i?void 0:i.email)||(null===A||void 0===A?void 0:A.email)||a||"",n||""),e.next=38,null===(l=ie.a.currentUser)||void 0===l?void 0:l.reauthenticateWithCredential(c);case 38:s&&s({email:a,password:n}),e.next=55;break;case 41:if("change-pass"!==g){e.next=55;break}return e.prev=42,s&&s({password:n,newPassword:o}),p=De.a.auth.EmailAuthProvider.credential((null===(u=ie.a.currentUser)||void 0===u?void 0:u.email)||(null===A||void 0===A?void 0:A.email)||a||"",n||""),e.next=47,null===(d=ie.a.currentUser)||void 0===d?void 0:d.reauthenticateWithCredential(p);case 47:return e.next=49,null===(m=ie.a.currentUser)||void 0===m?void 0:m.updatePassword(o||n||"");case 49:v("Password updated successfully!",{variant:"success"}),e.next=55;break;case 52:e.prev=52,e.t0=e.catch(42),v((null===(b=e.t0)||void 0===b?void 0:b.message)||"Failed to update password",{variant:"error"});case 55:e.next=60;break;case 57:e.prev=57,e.t1=e.catch(1),"auth/email-already-in-use"===(null===(f=e.t1)||void 0===f?void 0:f.code)?k(new Error("Something went wrong from our side, Try after sometime")):k(e.t1);case 60:return e.prev=60,C(!1),e.finish(60);case 63:case"end":return e.stop()}}),e,null,[[1,57,60,63],[42,52]])})));return function(t){return e.apply(this,arguments)}}(),[g]);Object(n.useEffect)((function(){c&&"check"===g&&q({email:c})}),[c]),Object(n.useEffect)((function(){k(null),p&&p(g)}),[g]);var J=Object(Oe.a)({initialValues:"check"===g||"forgot-pass"===g?{email:c}:"login"===g||"re-auth"===g?{email:c,password:""}:"change-pass"===g?{password:"",newPassword:""}:{name:"",email:c,password:""},validationSchema:je.c("check"===g||"forgot-pass"===g?{email:je.d().email("Invalid email").required("Enter your email to continue")}:"login"===g||"re-auth"===g?{email:je.d().email("Invalid email").required("Enter your email to continue"),password:je.d().required("Invalid password")}:"change-pass"===g?{password:je.d().required("Invalid password"),newPassword:je.d().required("New password cannot be empty, required!")}:{name:je.d().required("Name is required"),email:je.d().email("Invalid email").required("Enter your email to continue"),password:je.d().required("Invalid password")}),onSubmit:q}),H=J.handleChange,Y=J.handleBlur,Z=J.handleSubmit,X=J.values,Q=J.errors,$=J.touched,ee=Object(n.useCallback)((function(){W((function(e){return!e}))}),[]),ae=Object(n.useCallback)((function(e){e.preventDefault()}),[]),ne=Object(n.useCallback)((function(){switch(g){case"check":return"Get Started";case"forgot-pass":return"Recover password";case"login":return"Login";case"register":return"Create Account";case"re-auth":return"Confirming access";case"change-pass":return"Change password";default:return""}}),[g]);return r.a.createElement(ce.a,{component:"form",style:{padding:20,paddingLeft:25,paddingRight:25,maxWidth:375,margin:0},onSubmit:Z,noValidate:!0},r.a.createElement(ke,{style:{marginBottom:10}},ne()),D?r.a.createElement(ye.a,{style:{marginBottom:10},severity:"error",children:null!==(t=null===D||void 0===D?void 0:D.message)&&void 0!==t?t:D}):o?r.a.createElement(ye.a,{style:{marginBottom:10},severity:"info",children:o}):r.a.createElement("div",null),"change-pass"!==g?r.a.createElement(se.a,{name:"email",InputProps:{readOnly:"re-auth"===g},margin:"dense",value:X.email,label:"Email address",onBlur:Y,onChange:H,error:$.email&&!!Q.email,fullWidth:!0,variant:"outlined",placeholder:"Enter email",helperText:$.email&&Q.email?null===Q||void 0===Q?void 0:Q.email:"forgot-pass"===g?"Instructions for password reset will be sent to this email.":"check"===g?"Welcome, Enter email address to get started":""}):r.a.createElement("div",null),"register"===g?r.a.createElement(se.a,{name:"name",margin:"dense",value:X.name,label:"Your name",onBlur:Y,onChange:H,error:$.name&&!!Q.name,fullWidth:!0,variant:"outlined",placeholder:"Enter your name",helperText:$.name&&Q.name?null===Q||void 0===Q?void 0:Q.name:""}):r.a.createElement("div",null),"check"!==g&&"forgot-pass"!==g?r.a.createElement(ue.a,{fullWidth:!0,margin:"dense",variant:"outlined"},r.a.createElement(de.a,{htmlFor:"outlined-adornment-password"},"".concat("change-pass"===g?"Current ":"","Password")),r.a.createElement(me.a,{id:"outlined-adornment-password",type:F?"text":"password",onChange:H,onBlur:Y,value:X.password,name:"password",labelWidth:75,placeholder:"".concat("change-pass"===g?"Current ":"","Password"),error:$.password&&!!Q.password,endAdornment:r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{position:"end"},r.a.createElement(B.a,{"aria-label":"toggle password visibility",onClick:ee,onMouseDown:ae,edge:"end"},F?r.a.createElement(ge.a,null):r.a.createElement(he.a,null))))}),$.password&&Q.password?r.a.createElement(ve.a,{error:$.password&&!!Q.password},Q.password):r.a.createElement("div",null)):r.a.createElement("div",null),"check"!==g&&"forgot-pass"!==g&&"change-pass"===g?r.a.createElement(ue.a,{fullWidth:!0,margin:"dense",variant:"outlined"},r.a.createElement(de.a,{htmlFor:"outlined-adornment-newPassword"},"New Password"),r.a.createElement(me.a,{id:"outlined-adornment-newPassword",type:V?"text":"password",onChange:H,onBlur:Y,value:X.newPassword,name:"newPassword",labelWidth:75,placeholder:"New Password",error:$.newPassword&&!!Q.newPassword,endAdornment:r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{position:"end"},r.a.createElement(B.a,{"aria-label":"toggle newPassword visibility",onClick:function(){return G((function(e){return!e}))},onMouseDown:ae,edge:"end"},V?r.a.createElement(ge.a,null):r.a.createElement(he.a,null))))}),$.newPassword&&Q.newPassword?r.a.createElement(ve.a,{error:$.newPassword&&!!Q.newPassword},Q.newPassword):r.a.createElement("div",null)):r.a.createElement("div",null),r.a.createElement(M.a,{style:{width:"100%",marginTop:20,display:"flex",alignItems:"center",justifyContent:"change-pass"===g?"flex-start":"space-between"}},"login"===g?r.a.createElement(be.a,{style:{textTransform:"none",fontWeight:"normal"},size:"small",color:"primary",onClick:function(){return y("forgot-pass")}},"Trouble signing in?"):r.a.createElement("div",null),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},void 0!==u?r.a.createElement(be.a,{onClick:function(){return u()},disabled:w||!u,color:"primary",style:{textTransform:"none",fontWeight:"normal",marginRight:15},children:"cancel"}):r.a.createElement("div",null),r.a.createElement(be.a,{variant:"contained",type:"submit",disabled:w,color:"primary",children:w?r.a.createElement(fe.a,{color:"inherit",size:20}):"change-pass"===g?"Update":"re-auth"===g?"Confirm":"forgot-pass"===g?"Send":"check"===g?"Next":"register"===g?"Create Account":"Sign in"}))))},Te=Object(n.createContext)({reAuthInit:function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("set token function"),e.abrupt("return","");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isAuthFlowInitialised:!1});function Pe(){var e=Object(n.useContext)(Te);return e||console.log("useReAuthFlow must be used within a ReAuthFlowProvider"),e}function Ae(e){var t,a,o=Object(n.useState)(!1),i=Object(l.a)(o,2),c=i[0],s=i[1],u=Object(f.b)(),d=(u.user,u.isUserLoadingFromFirebase),m=Object(n.useState)(),p=Object(l.a)(m,2),v=p[0],b=p[1],_=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s((function(e){return!e})),e.next=3,new Promise((function(e,t){b({resolve:e,reject:t})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(n.useCallback)((function(){g(),(null===v||void 0===v?void 0:v.reject)&&v.reject("Authentication failed, cancelled by user!")}),[v]),E=Object(n.useCallback)((function(){g(),(null===v||void 0===v?void 0:v.resolve)&&v.resolve("Re-Authentication successfull!")}),[v]),g=function(){s(!1)},y=Object(n.useMemo)((function(){return{isAuthFlowInitialised:c,reAuthInit:_}}),[c]);return r.a.createElement(Te.Provider,Object.assign({value:y},e),e.children,r.a.createElement(le.a,{"aria-labelledby":"customized-dialog-title",open:c&&!d},r.a.createElement(Ce,{onSubmit:E,handleClose:h,email:null!==(t=null===(a=ie.a.currentUser)||void 0===a?void 0:a.email)&&void 0!==t?t:"",initialMode:"re-auth",message:"Confirmation required!"})))}var Re=function(e){var t=e.allowedRoles,a=e.children,n=e.redirectTo,o=void 0===n?null:n,i=Object(f.b)().isAdmin;return t.includes(i?"admin":"user")||"*"===t?a:null!==o?o:r.a.createElement("div",null)},Me=a(406),Ie=a.n(Me),Le=a(640);a.n(Le).a.config({path:"../../.env"});var Ue="http://52.54.195.156:3000/api/v1/jobs",Be=(function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ue,{headers:{"nexrender-secret":"myapisecret"}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json().then((function(e){return e.sort((function(e,t){return new Date(null===t||void 0===t?void 0:t.updatedAt)-new Date(null===e||void 0===e?void 0:e.updatedAt)}))}));case 6:return e.abrupt("return",e.sent);case 9:throw new Error("Wrong or no authentication secret provided. Please check the nexrender-secret header.");case 10:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(oe.a)(re.a.mark((function e(t){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ue,"/").concat(t),{headers:{"nexrender-secret":"myapisecret"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ue,"/").concat(t),{method:"DELETE",headers:{"nexrender-secret":"myapisecret"}});case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a=arguments;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.next=3,Promise.all(t.map((function(e){return fetch("".concat(Ue,"/").concat(e),{method:"DELETE",headers:{"nexrender-secret":"myapisecret"}})})));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://ip-api.com/json");case 2:return a=e.sent,e.next=5,a.json();case 5:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=9;break}e.t0=void 0===t;case 9:if(!e.t0){e.next=13;break}e.t2=void 0,e.next=14;break;case 13:e.t2=t.countryCode;case 14:return n=e.t2,e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ze=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="https://buzzle-extraction-service-6cjz5.ondigitalocean.app","ae"!==t){e.next=14;break}if(!a){e.next=11;break}return e.next=5,fetch("".concat(a,"/status"));case 5:if(!e.sent.ok){e.next=10;break}return e.abrupt("return",a);case 10:throw new Error("Error Server Status Not Ok");case 11:throw new Error("No Extraction Server Found");case 14:return e.next=16,fetch("".concat("https://remotion-bundler.buzzle.site"));case 16:if(!e.sent.ok){e.next=21;break}return e.abrupt("return","https://remotion-bundler.buzzle.site");case 21:throw new Error("Error!");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Fe={USD:1,EUR:.87985093329795,GBP:.73450700199059,CAD:1.2698383167071,JPY:115.05990179902,AUD:1.3892320834385,CHF:.92072290045529,MWK:808.45386025666,GTQ:7.7392745709827,KWD:.30314836447479,CZK:21.439723296941,PGK:3.5111065779074,UAH:28.265942045787,ETB:51.077220077221,XCD:2.7259427158459,MMK:1789.3146979261,MVR:15.557428459428,SEK:9.3335747794564,MAD:9.3935714654842,RON:4.3475087997087,BYN:2.5725356245269,RSD:104.63566570582,GMD:53.631081081083,AWG:1.8016615216996,SLL:11570.55393586,KES:114.37505403614,BHD:.37749526073605,OMR:.38563450243603,RUB:76.152817022385,LYD:4.5942825180297,CLP:796.93656650785,BSD:1.0052940878464,DJF:179.16572615232,MZN:64.531707317073,UGX:3540.3211418376,BDT:85.681810736362,QAR:3.6589343123353,MXN:20.293380048467,AMD:480.22641931647,HTG:102.56732909318,FJD:2.1561990655221,CDF:2015.5916708989,SDG:445.92134831462,TOP:2.3061770004068,VUV:113.97432583785,HKD:7.798745283396,THB:32.378643272596,XAF:577.99842044124,MDL:17.961792637666,UYU:43.211830335327,LRD:155.02734375,LAK:11503.47826087,BWP:11.560442761433,JOD:.71014361797584,BGN:1.7201929132523,VND:22679.242315895,UZS:10800.540096605,MGA:4008.7878787878,TTD:6.8343378680903,AOA:529.15999999999,KHR:4091.4432989689,NOK:8.9113497970422,LKR:202.95696897418,PLN:3.9620041365406,PEN:3.7398443571328,IQD:1453.5516083382,NIO:35.689748201439,CVE:97.992592592591,HNL:24.7734082397,SCR:13.344653665097,DOP:56.784303999445,NZD:1.4921814200551,HRK:6.6242835332476,DZD:139.88308557561,ARS:106.96648770524,STN:21.878169790518,XPF:105.57018593887,LSL:15.147709923664,TZS:2329.0492957747,BBD:2.0001592060179,ANG:1.7974325744432,PKR:175.86062031829,KRW:1197.533015952,AZN:1.6937229731155,CRC:641.44678248905,BND:1.3522897642088,KMF:438.09471244068,MRU:36.577880184332,MNT:2892.638483965,BRL:5.170196791905,EGP:15.736655107857,SGD:1.3434876049496,ZAR:14.971148757071,KGS:84.616525461596,PYG:6964.3819143818,JMD:158.1155378486,SSP:435.21219431956,GHS:6.4406037000972,CUP:1.0052940878464,DKK:6.5430746836678,INR:75.042870268125,TRY:13.599495141737,TWD:27.872495995024,TMT:3.4893190325974,AFN:92.16674407803,SRD:20.584543568465,ZMW:18.039545454545,YER:251.83704549781,LBP:1502.7741416444,HUF:312.96173498065,NGN:417.16633698862,IRR:41811.474953212,SVC:8.8115008880995,SBD:8.0582741116752,ALL:107.2969611766,MUR:44.343016759777,VES:4.4544402211163,NPR:120.5251854543,ISK:124.54167087878,GIP:.73870738653128,GEL:3.0288780977101,MKD:54.455268935236,BIF:2011.5053218449,SZL:15.147709923664,SOS:582.17691066451,AED:3.6611806534397,PHP:51.291726106389,ILS:3.1871342480973,MRO:36.370413511941,COP:3959.5910211226,BZD:2.0285728889798,GNF:9060.9589041098,ERN:15.170871559633,WST:2.6375357214062,CNY:6.3378620103284,SAR:3.7527113829009,MYR:4.1815063525545,KZT:428.78060847135,PAB:1.0026470439232,GYD:210.54111405835,RWF:1046.3221724229,SYP:2480.4375,MOP:8.0911314984709,BAM:1.7328297602934,IDR:14279.085907792,TND:2.8876513810311,XOF:577.89007974538,TJS:11.266057855192,BOB:6.8894665271965,NAD:15.159281894576},We={BD:"BDT",BE:"EUR",BF:"XOF",BG:"BGN",BA:"BAM",BB:"BBD",WF:"XPF",BL:"EUR",BM:"BMD",BN:"BND",BO:"BOB",BH:"BHD",BI:"BIF",BJ:"XOF",BT:"BTN",JM:"JMD",BV:"NOK",BW:"BWP",WS:"WST",BQ:"USD",BR:"BRL",BS:"BSD",JE:"GBP",BY:"BYR",BZ:"BZD",RU:"RUB",RW:"RWF",RS:"RSD",TL:"USD",RE:"EUR",TM:"TMT",TJ:"TJS",RO:"RON",TK:"NZD",GW:"XOF",GU:"USD",GT:"GTQ",GS:"GBP",GR:"EUR",GQ:"XAF",GP:"EUR",JP:"JPY",GY:"GYD",GG:"GBP",GF:"EUR",GE:"GEL",GD:"XCD",GB:"GBP",GA:"XAF",SV:"USD",GN:"GNF",GM:"GMD",GL:"DKK",GI:"GIP",GH:"GHS",OM:"OMR",TN:"TND",JO:"JOD",HR:"HRK",HT:"HTG",HU:"HUF",HK:"HKD",HN:"HNL",HM:"AUD",VE:"VEF",PR:"USD",PS:"ILS",PW:"USD",PT:"EUR",SJ:"NOK",PY:"PYG",IQ:"IQD",PA:"PAB",PF:"XPF",PG:"PGK",PE:"PEN",PK:"PKR",PH:"PHP",PN:"NZD",PL:"PLN",PM:"EUR",ZM:"ZMK",EH:"MAD",EE:"EUR",EG:"EGP",ZA:"ZAR",EC:"USD",IT:"EUR",VN:"VND",SB:"SBD",ET:"ETB",SO:"SOS",ZW:"ZWL",SA:"SAR",ES:"EUR",ER:"ERN",ME:"EUR",MD:"MDL",MG:"MGA",MF:"EUR",MA:"MAD",MC:"EUR",UZ:"UZS",MM:"MMK",ML:"XOF",MO:"MOP",MN:"MNT",MH:"USD",MK:"MKD",MU:"MUR",MT:"EUR",MW:"MWK",MV:"MVR",MQ:"EUR",MP:"USD",MS:"XCD",MR:"MRO",IM:"GBP",UG:"UGX",TZ:"TZS",MY:"MYR",MX:"MXN",IL:"ILS",FR:"EUR",IO:"USD",SH:"SHP",FI:"EUR",FJ:"FJD",FK:"FKP",FM:"USD",FO:"DKK",NI:"NIO",NL:"EUR",NO:"NOK",NA:"NAD",VU:"VUV",NC:"XPF",NE:"XOF",NF:"AUD",NG:"NGN",NZ:"NZD",NP:"NPR",NR:"AUD",NU:"NZD",CK:"NZD",XK:"EUR",CI:"XOF",CH:"CHF",CO:"COP",CN:"CNY",CM:"XAF",CL:"CLP",CC:"AUD",CA:"CAD",CG:"XAF",CF:"XAF",CD:"CDF",CZ:"CZK",CY:"EUR",CX:"AUD",CR:"CRC",CW:"ANG",CV:"CVE",CU:"CUP",SZ:"SZL",SY:"SYP",SX:"ANG",KG:"KGS",KE:"KES",SS:"SSP",SR:"SRD",KI:"AUD",KH:"KHR",KN:"XCD",KM:"KMF",ST:"STD",SK:"EUR",KR:"KRW",SI:"EUR",KP:"KPW",KW:"KWD",SN:"XOF",SM:"EUR",SL:"SLL",SC:"SCR",KZ:"KZT",KY:"KYD",SG:"SGD",SE:"SEK",SD:"SDG",DO:"DOP",DM:"XCD",DJ:"DJF",DK:"DKK",VG:"USD",DE:"EUR",YE:"YER",DZ:"DZD",US:"USD",UY:"UYU",YT:"EUR",UM:"USD",LB:"LBP",LC:"XCD",LA:"LAK",TV:"AUD",TW:"TWD",TT:"TTD",TR:"TRY",LK:"LKR",LI:"CHF",LV:"EUR",TO:"TOP",LT:"LTL",LU:"EUR",LR:"LRD",LS:"LSL",TH:"THB",TF:"EUR",TG:"XOF",TD:"XAF",TC:"USD",LY:"LYD",VA:"EUR",VC:"XCD",AE:"AED",AD:"EUR",AG:"XCD",AF:"AFN",AI:"XCD",VI:"USD",IS:"ISK",IR:"IRR",AM:"AMD",AL:"ALL",AO:"AOA",AQ:"",AS:"USD",AR:"ARS",AU:"AUD",AT:"EUR",AW:"AWG",IN:"INR",AX:"EUR",AZ:"AZN",IE:"EUR",ID:"IDR",UA:"UAH",QA:"QAR",MZ:"MZN"},Ne={BD:"+880",BE:"+32",BF:"+226",BG:"+359",BA:"+387",BB:"+1-246",WF:"+681",BL:"+590",BM:"+1-441",BN:"+673",BO:"+591",BH:"+973",BI:"+257",BJ:"+229",BT:"+975",JM:"+1-876",BV:"+",BW:"+267",WS:"+685",BQ:"+599",BR:"+55",BS:"+1-242",JE:"+44-1534",BY:"+375",BZ:"+501",RU:"+7",RW:"+250",RS:"+381",TL:"+670",RE:"+262",TM:"+993",TJ:"+992",RO:"+40",TK:"+690",GW:"+245",GU:"+1-671",GT:"+502",GS:"+",GR:"+30",GQ:"+240",GP:"+590",JP:"+81",GY:"+592",GG:"+44-1481",GF:"+594",GE:"+995",GD:"+1-473",GB:"+44",GA:"+241",SV:"+503",GN:"+224",GM:"+220",GL:"+299",GI:"+350",GH:"+233",OM:"+968",TN:"+216",JO:"+962",HR:"+385",HT:"+509",HU:"+36",HK:"+852",HN:"+504",HM:"+ ",VE:"+58",PR:"+1-787 and 1-939",PS:"+970",PW:"+680",PT:"+351",SJ:"+47",PY:"+595",IQ:"+964",PA:"+507",PF:"+689",PG:"+675",PE:"+51",PK:"+92",PH:"+63",PN:"+870",PL:"+48",PM:"+508",ZM:"+260",EH:"+212",EE:"+372",EG:"+20",ZA:"+27",EC:"+593",IT:"+39",VN:"+84",SB:"+677",ET:"+251",SO:"+252",ZW:"+263",SA:"+966",ES:"+34",ER:"+291",ME:"+382",MD:"+373",MG:"+261",MF:"+590",MA:"+212",MC:"+377",UZ:"+998",MM:"+95",ML:"+223",MO:"+853",MN:"+976",MH:"+692",MK:"+389",MU:"+230",MT:"+356",MW:"+265",MV:"+960",MQ:"+596",MP:"+1-670",MS:"+1-664",MR:"+222",IM:"+44-1624",UG:"+256",TZ:"+255",MY:"+60",MX:"+52",IL:"+972",FR:"+33",IO:"+246",SH:"+290",FI:"+358",FJ:"+679",FK:"+500",FM:"+691",FO:"+298",NI:"+505",NL:"+31",NO:"+47",NA:"+264",VU:"+678",NC:"+687",NE:"+227",NF:"+672",NG:"+234",NZ:"+64",NP:"+977",NR:"+674",NU:"+683",CK:"+682",XK:"+",CI:"+225",CH:"+41",CO:"+57",CN:"+86",CM:"+237",CL:"+56",CC:"+61",CA:"+1",CG:"+242",CF:"+236",CD:"+243",CZ:"+420",CY:"+357",CX:"+61",CR:"+506",CW:"+599",CV:"+238",CU:"+53",SZ:"+268",SY:"+963",SX:"+599",KG:"+996",KE:"+254",SS:"+211",SR:"+597",KI:"+686",KH:"+855",KN:"+1-869",KM:"+269",ST:"+239",SK:"+421",KR:"+82",SI:"+386",KP:"+850",KW:"+965",SN:"+221",SM:"+378",SL:"+232",SC:"+248",KZ:"+7",KY:"+1-345",SG:"+65",SE:"+46",SD:"+249",DO:"+1-809 and 1-829",DM:"+1-767",DJ:"+253",DK:"+45",VG:"+1-284",DE:"+49",YE:"+967",DZ:"+213",US:"+1",UY:"+598",YT:"+262",UM:"+1",LB:"+961",LC:"+1-758",LA:"+856",TV:"+688",TW:"+886",TT:"+1-868",TR:"+90",LK:"+94",LI:"+423",LV:"+371",TO:"+676",LT:"+370",LU:"+352",LR:"+231",LS:"+266",TH:"+66",TF:"+",TG:"+228",TD:"+235",TC:"+1-649",LY:"+218",VA:"+379",VC:"+1-784",AE:"+971",AD:"+376",AG:"+1-268",AF:"+93",AI:"+1-264",VI:"+1-340",IS:"+354",IR:"+98",AM:"+374",AL:"+355",AO:"+244",AQ:"+",AS:"+1-684",AR:"+54",AU:"+61",AT:"+43",AW:"+297",IN:"+91",AX:"+358-18",AZ:"+994",IE:"+353",ID:"+62",UA:"+380",QA:"+974",MZ:"+258"},Ke={AED:{symbol:"\u062f.\u0625",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},AFN:{symbol:"\u060b",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},ALL:{symbol:"L",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},AMD:{symbol:"\u0564\u0580.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},ANG:{symbol:"\u0192",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},AOA:{symbol:"Kz",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},ARS:{symbol:"$",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},AUD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},AWG:{symbol:"\u0192",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},AZN:{symbol:"\u20bc",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BAM:{symbol:"\u041a\u041c",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BBD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BDT:{symbol:"\u09f3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BGN:{symbol:"\u043b\u0432.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},BHD:{symbol:"\u062f.\u0628",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!0},BIF:{symbol:"Fr",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},BMD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BND:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BOB:{symbol:"Bs.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BRL:{symbol:"R$",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},BSD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BTN:{symbol:"Nu.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},BWP:{symbol:"P",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},BYN:{symbol:"Br",subunit_to_unit:100,decimal_mark:",",thousands_separator:" ",symbol_first:!1},BYR:{symbol:"Br",subunit_to_unit:1,decimal_mark:",",thousands_separator:" ",symbol_first:!1},BZD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},CAD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},CDF:{symbol:"Fr",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},CHF:{symbol:"CHF",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},CLF:{symbol:"UF",subunit_to_unit:1e4,decimal_mark:",",thousands_separator:".",symbol_first:!0},CLP:{symbol:"$",subunit_to_unit:1,decimal_mark:",",thousands_separator:".",symbol_first:!0},CNY:{symbol:"\xa5",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},COP:{symbol:"$",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},CRC:{symbol:"\u20a1",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},CUC:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},CUP:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},CVE:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},CZK:{symbol:"K\u010d",subunit_to_unit:100,decimal_mark:",",thousands_separator:" ",symbol_first:!1},DJF:{symbol:"Fdj",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},DKK:{symbol:"kr.",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!1},DOP:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},DZD:{symbol:"\u062f.\u062c",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},EGP:{symbol:"\u062c.\u0645",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},ERN:{symbol:"Nfk",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},ETB:{symbol:"Br",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},EUR:{symbol:"\u20ac",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},FJD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},FKP:{symbol:"\xa3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},GBP:{symbol:"\xa3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},GEL:{symbol:"\u10da",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},GHS:{symbol:"\u20b5",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},GIP:{symbol:"\xa3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},GMD:{symbol:"D",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},GNF:{symbol:"Fr",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},GTQ:{symbol:"Q",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},GYD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},HKD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},HNL:{symbol:"L",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},HRK:{symbol:"kn",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!1},HTG:{symbol:"G",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},HUF:{symbol:"Ft",subunit_to_unit:1,decimal_mark:",",thousands_separator:" ",symbol_first:!1},IDR:{symbol:"Rp",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},ILS:{symbol:"\u20aa",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},INR:{symbol:"\u20b9",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},IQD:{symbol:"\u0639.\u062f",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!1},IRR:{symbol:"\ufdfc",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},ISK:{symbol:"kr.",subunit_to_unit:1,decimal_mark:",",thousands_separator:".",symbol_first:!1},JMD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},JOD:{symbol:"\u062f.\u0627",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!0},JPY:{symbol:"\xa5",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!0},KES:{symbol:"KSh",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},KGS:{symbol:"som",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},KHR:{symbol:"\u17db",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},KMF:{symbol:"Fr",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},KPW:{symbol:"\u20a9",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},KRW:{symbol:"\u20a9",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!0},KWD:{symbol:"\u062f.\u0643",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!0},KYD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},KZT:{symbol:"\u20b8",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},LAK:{symbol:"\u20ad",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},LBP:{symbol:"\u0644.\u0644",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},LKR:{symbol:"\u20a8",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},LRD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},LSL:{symbol:"L",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},LYD:{symbol:"\u0644.\u062f",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!1},MAD:{symbol:"\u062f.\u0645.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MDL:{symbol:"L",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MGA:{symbol:"Ar",subunit_to_unit:5,decimal_mark:".",thousands_separator:",",symbol_first:!0},MKD:{symbol:"\u0434\u0435\u043d",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MMK:{symbol:"K",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MNT:{symbol:"\u20ae",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MOP:{symbol:"P",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MRU:{symbol:"UM",subunit_to_unit:5,decimal_mark:".",thousands_separator:",",symbol_first:!1},MUR:{symbol:"\u20a8",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},MVR:{symbol:"MVR",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MWK:{symbol:"MK",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},MXN:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},MYR:{symbol:"RM",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},MZN:{symbol:"MTn",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},NAD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},NGN:{symbol:"\u20a6",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},NIO:{symbol:"C$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},NOK:{symbol:"kr",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!1},NPR:{symbol:"Rs.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},NZD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},OMR:{symbol:"\u0631.\u0639.",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!0},PAB:{symbol:"B/.",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},PEN:{symbol:"S/",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},PGK:{symbol:"K",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},PHP:{symbol:"\u20b1",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},PKR:{symbol:"\u20a8",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},PLN:{symbol:"z\u0142",subunit_to_unit:100,decimal_mark:",",thousands_separator:" ",symbol_first:!1},PYG:{symbol:"\u20b2",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!0},QAR:{symbol:"\u0631.\u0642",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},RON:{symbol:"Lei",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!1},RSD:{symbol:"\u0420\u0421\u0414",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},RUB:{symbol:"\u20bd",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!1},RWF:{symbol:"FRw",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},SAR:{symbol:"\u0631.\u0633",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},SBD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SCR:{symbol:"\u20a8",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SDG:{symbol:"\xa3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},SEK:{symbol:"kr",subunit_to_unit:100,decimal_mark:",",thousands_separator:" ",symbol_first:!1},SGD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},SHP:{symbol:"\xa3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SKK:{symbol:"Sk",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},SLL:{symbol:"Le",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SOS:{symbol:"Sh",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SRD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SSP:{symbol:"\xa3",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},STD:{symbol:"Db",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SVC:{symbol:"\u20a1",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},SYP:{symbol:"\xa3S",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},SZL:{symbol:"E",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},THB:{symbol:"\u0e3f",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},TJS:{symbol:"\u0405\u041c",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},TMT:{symbol:"T",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},TND:{symbol:"\u062f.\u062a",subunit_to_unit:1e3,decimal_mark:".",thousands_separator:",",symbol_first:!1},TOP:{symbol:"T$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},TRY:{symbol:"\u20ba",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},TTD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},TWD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},TZS:{symbol:"Sh",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},UAH:{symbol:"\u20b4",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},UGX:{symbol:"USh",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},USD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},UYU:{symbol:"$U",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},UZS:{symbol:"so'm",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},VES:{symbol:"Bs",subunit_to_unit:100,decimal_mark:",",thousands_separator:".",symbol_first:!0},VND:{symbol:"\u20ab",subunit_to_unit:1,decimal_mark:",",thousands_separator:".",symbol_first:!1},VUV:{symbol:"Vt",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!0},WST:{symbol:"T",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},XAF:{symbol:"CFA",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XAG:{symbol:"oz t",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XAU:{symbol:"oz t",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XBA:{symbol:"",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XBB:{symbol:"",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XBC:{symbol:"",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XBD:{symbol:"",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XCD:{symbol:"$",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},XDR:{symbol:"SDR",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XOF:{symbol:"Fr",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XPD:{symbol:"oz t",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XPF:{symbol:"Fr",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XPT:{symbol:"oz t",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},XTS:{symbol:"",subunit_to_unit:1,decimal_mark:".",thousands_separator:",",symbol_first:!1},YER:{symbol:"\ufdfc",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},ZAR:{symbol:"R",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0},ZMK:{symbol:"ZK",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!1},ZMW:{symbol:"K",subunit_to_unit:100,decimal_mark:".",thousands_separator:",",symbol_first:!0}},Ve=Object(n.createContext)({getConvertedCurrency:function(e,t,a){return""},currency:"INR",countryCode:"+91",getConvertedCurrencyValue:function(e){return 0},baseUnitValueOfCurrency:100});function Ge(){var e=Object(n.useContext)(Ve);return e||console.log("useCurrency must be used within a CurrencyProvider"),e}function qe(e){var t=Object(n.useState)("IN"),a=Object(l.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){s()}),[]);var c=Ke[We[o||"IN"]||"INR"],s=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=localStorage.getItem("country"))){e.next=6;break}a=We[t],i((null===Fe||void 0===Fe?void 0:Fe.hasOwnProperty(a))?t:"IN"),e.next=12;break;case 6:return e.next=8,Be();case 8:n=e.sent,r=We[n],i((null===Fe||void 0===Fe?void 0:Fe.hasOwnProperty(r))?n:"IN"),localStorage.setItem("country",(null===Fe||void 0===Fe?void 0:Fe.hasOwnProperty(r))&&n||"IN");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Ie.a.rates=Fe}),[Fe]);var u=function(e,t,a){var n=Ie()(e).from("USD").to(We[o||"IN"]||"INR"),r=c.symbol_first?"".concat(c.symbol," ").concat(t?parseFloat(n).toFixed(2):n):"".concat(t?parseFloat(n).toFixed(2):n," ").concat(c.symbol);return(0==n&&a?"FREE":r).replace(".",c.decimal_mark)},d=function(e,t){var a=Ie()(e).from("USD").to(We[o||"IN"]||"INR");return t?parseFloat(a).toFixed(2):parseFloat(a)},m=Object(n.useMemo)((function(){return{getConvertedCurrency:u,currency:We[o||"IN"]||"INR",countryCode:Ne[o],getConvertedCurrencyValue:d,baseUnitValueOfCurrency:c.subunit_to_unit}}),[o]);return r.a.createElement(Ve.Provider,Object.assign({value:m},e))}function Je(e){var t=e.icon,a=e.primary,o=e.to,i=Object(n.useMemo)((function(){return Object(n.forwardRef)((function(e,t){return r.a.createElement(ae.b,Object.assign({to:o,ref:t},e))}))}),[o]);return r.a.createElement("li",null,r.a.createElement(F.a,{style:{height:48},button:!0,component:i},t?r.a.createElement(W.a,{style:{marginLeft:5}},t):null,r.a.createElement(N.a,{primary:a})))}var He=Object(E.a)((function(e){return Object(g.a)({root:{display:"flex",flexgrow:1},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:Object(x.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}),menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:Object(x.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(x.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),drawerPaper:{width:240},toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(1,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menu:{},grow:{flexGrow:1}})}));function Ye(e){var t,a,o,i,c=e.items,s=e.window,u=He(),d=Object(f.b)().user,m=(Object(te.b)().enqueueSnackbar,Pe().reAuthInit,Object(K.a)()),v=Ge().getConvertedCurrency,_=Object(n.useState)(!1),h=Object(l.a)(_,2),E=h[0],g=h[1],y=Object(n.useState)(null),O=Object(l.a)(y,2),j=O[0],D=O[1],k=Object(f.b)().signOut,S=Object(b.g)(),F=p(),W=Object(l.a)(F,3),N=(W[0],W[1],W[2],Boolean(j)),q=function(){D(null)},H=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:u.toolbar},r.a.createElement(M.a,{flex:1},r.a.createElement(G.a,{noWrap:!0,component:ae.b,to:"/home",variant:"h5",color:"textPrimary",style:{paddingLeft:20,textDecoration:"none",fontWeight:800,fontFamily:"Poppins"}},"Buzzle!")),r.a.createElement(B.a,{onClick:function(){g(!1)}},"rtl"===m.direction?r.a.createElement(Y.a,null):r.a.createElement(J.a,null))),r.a.createElement(L.a,null),r.a.createElement(z.a,null,c.map((function(e,t){var a;return r.a.createElement(Re,{key:e.text,allowedRoles:null!==(a=null===e||void 0===e?void 0:e.allowedRoles)&&void 0!==a?a:[]},r.a.createElement(Je,{key:e.text+e.icon,to:e.to,primary:E?e.text:"",icon:e.icon}))})))),Z=void 0!==s?function(){return s().document.body}:void 0;return r.a.createElement("div",{className:u.root},r.a.createElement(I.a,null),r.a.createElement(A.a,{position:"fixed",className:Object(Q.a)(u.appBar,Object(x.a)({},u.appBarShift,E))},r.a.createElement(V.a,null,r.a.createElement(B.a,{color:"inherit","aria-label":"open drawer",onClick:function(){g(!0)},edge:"start",className:Object(Q.a)(u.menuButton,Object(x.a)({},u.hide,E))},r.a.createElement(X.a,null)),E?r.a.createElement("div",null):r.a.createElement(G.a,{color:"inherit",component:ae.b,to:"/home",noWrap:!0,variant:"h5",style:{textDecoration:"none",fontWeight:800,fontFamily:"Poppins"}},"Buzzle!"),r.a.createElement("div",{className:u.grow}),r.a.createElement("div",{className:u.menu},r.a.createElement(w.a,{style:{marginRight:10},avatar:r.a.createElement(ee.a,null),label:"".concat(v(parseFloat("".concat(null!==(t=null===d||void 0===d||null===(a=d.stripeCustomer)||void 0===a?void 0:a.balance)&&void 0!==t?t:0)),!0)),variant:"default"}),r.a.createElement(w.a,{avatar:r.a.createElement(R.a,{alt:"avatar",src:(null===d||void 0===d?void 0:d.photoURL)||"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"}),label:null===d||void 0===d?void 0:d.name,onClick:function(e){D(null===e||void 0===e?void 0:e.currentTarget)},variant:"default"}),r.a.createElement(C.a,{id:"menu-appbar",anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:N,onClose:q},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(G.a,{noWrap:!0,color:"textPrimary",style:{paddingLeft:10,paddingRight:10,textDecoration:"none",fontFamily:"Poppins"}},"Logged in as"),r.a.createElement(G.a,{noWrap:!0,color:"textPrimary",style:{paddingLeft:10,paddingRight:10,marginBottom:10,fontWeight:700,textDecoration:"none",fontFamily:"Poppins"}},null===d||void 0===d?void 0:d.email),r.a.createElement(L.a,null)),r.a.createElement(T.a,{onClick:function(){q(),S.push("/home/settings?tab=profile")}},"Profile"),r.a.createElement(T.a,{onClick:function(){q(),k()}},"Logout"))))),r.a.createElement(P.a,{smUp:!0,implementation:"css"},r.a.createElement(U.a,{container:Z,variant:"temporary",anchor:"rtl"===m.direction?"right":"left",open:E,onClose:function(){return g((function(e){return!e}))},classes:{paper:u.drawerPaper},ModalProps:{keepMounted:!0}},H)),r.a.createElement(P.a,{xsDown:!0,implementation:"css"},r.a.createElement(U.a,{variant:"permanent",className:Object(Q.a)(u.drawer,(o={},Object(x.a)(o,u.drawerOpen,E),Object(x.a)(o,u.drawerClose,!E),o)),classes:{paper:Object(Q.a)((i={},Object(x.a)(i,u.drawerOpen,E),Object(x.a)(i,u.drawerClose,!E),i))}},H)))}var Ze=function(e){var t,a=Object(f.b)(),o=a.user,i=a.isUserLoading,c=Object(n.useState)(!(!o&&!i)),s=Object(l.a)(c,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){d(!(!o&&!i))}),[o,i]),u?(null===(t=e.allowedRoles)||void 0===t?void 0:t.includes(null===o||void 0===o?void 0:o.role))||"*"===e.allowedRoles?r.a.createElement(b.b,e):r.a.createElement(b.a,{to:"/NotFound"}):r.a.createElement(b.a,{to:"/login"})},Xe=a(133),Qe=a(1373),$e=a(1375),et=a(647),tt=a.n(et),at=a(648),nt=a.n(at),rt=a(649),ot=a.n(rt),it=a(14),lt=a.n(it),ct=a(645),st=(a(752),a(753),a(646)),ut=a.n(st),dt=a(33),mt=function(){var e=Object(te.b)().enqueueSnackbar,t=Object(dt.b)().Analytics,a=(Object(f.b)().token,Object(n.useState)({startDate:lt()().startOf("d").toDate(),endDate:lt()().endOf("d").toDate(),key:"selection"})),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)("day"),v=Object(l.a)(p,2),b=v[0],_=v[1],E=function e(t){var a=[];switch(t=t||b){case"day":for(var n=lt()(i.startDate);n.isBefore(lt()(i.endDate).add(1,"s"),"s");n.add(3,"h"))a.push({from:n.toDate(),to:lt()(n.toDate()).add(3,"h").subtract(1,"s").toDate()});return a;case"week":for(var r=lt()(i.startDate);r.isBefore(lt()(i.endDate).add(1,"s"),"s");r.add(1,"d"))a.push({from:r.startOf("d").toDate(),to:r.endOf("d").toDate()});return a;case"month":for(var o=lt()(i.startDate);o.isBefore(lt()(i.endDate).add(1,"s"),"s");o.add(1,"d"))a.push({from:o.startOf("d").toDate(),to:o.endOf("d").toDate()});return a;case"year":for(var l=lt()(i.startDate);l.isBefore(lt()(i.endDate).add(1,"s"),"s");l.add(1,"month"))a.push({from:l.startOf("month").toDate(),to:l.endOf("month").toDate()});return a;case"custom":var c=Math.round(lt()(i.endDate).diff(lt()(i.startDate),"seconds")/60/60)/24;if(c<=31)return e(c<=1?"day":c<=7?"week":"month");for(var s=lt()(i.startDate);s.isBefore(lt()(i.endDate).add(1,"s"),"s");s.add(7,"d"))if(lt()(s.toDate()).add(7,"d").isBefore(lt()(i.endDate).add(1,"s"),"s"))a.push({from:s.toDate(),to:lt()(s.toDate()).add(7,"d").subtract(1,"s").toDate()});else{var u=Math.round(lt()(i.endDate).diff(s,"seconds")/60/60)/24;a.push({from:s.toDate(),to:lt()(s.toDate()).add(u,"d").subtract(1,"s").toDate()})}return a;default:return[]}},g=Object(n.useState)(E(b)),y=Object(l.a)(g,2),O=y[0],j=y[1],D=Object(n.useState)(null),k=Object(l.a)(D,2),S=k[0],x=k[1],C=Object(n.useState)(null),P=Object(l.a)(C,2),A=P[0],R=P[1],I=r.a.useState(null),L=Object(l.a)(I,2),U=L[0],z=L[1],F=Object(n.useState)(!1),W=Object(l.a)(F,2),N=W[0],K=W[1],V=Object(n.useState)("template"),q=Object(l.a)(V,2),J=(q[0],q[1],function(){var a=Object(oe.a)(re.a.mark((function a(){var n,o,l,c,s,u,d,p,v,f;return re.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=E(b),j(l),m(!0),a.next=6,t.jobsPerTemplate(i.startDate,i.endDate,"template");case 6:for(c=a.sent,x((null===c||void 0===c?void 0:c.count)||null),s=(null===(n=null!==(o=null===c||void 0===c?void 0:c.data)&&void 0!==o?o:[])||void 0===n?void 0:n.map((function(e){return e.id})))||[],u=[],d=function(e){var t=s[e];u.find((function(e){return e===t}))||u.push(t)},p=0;p<s.length;p++)d(p);R(u.map((function(e){var t,a;return{name:(null===c||void 0===c||null===(t=c.data)||void 0===t||null===(a=t.find((function(t){return t.id===e})))||void 0===a?void 0:a.title)||"",data:l.map((function(t){var a,n;return null===c||void 0===c||null===(a=c.data)||void 0===a||null===(n=a.filter((function(a){var n=a.id,r=a.date;return n===e&&lt()(r).isBetween(lt()(null===t||void 0===t?void 0:t.from),lt()(null===t||void 0===t?void 0:t.to),"s","[]")})))||void 0===n?void 0:n.length}))}}))),m(!1),a.next=23;break;case 16:a.prev=16,a.t0=a.catch(0),m(!1),R(null),j(E(b)),x(null),e("".concat(null!==(v=null===(f=a.t0)||void 0===f?void 0:f.message)&&void 0!==v?v:"Something went wrong"),{variant:"error",action:function(){return r.a.createElement(be.a,{size:"small",color:"inherit",children:"retry",onClick:J})}});case 23:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(){return a.apply(this,arguments)}}());Object(n.useEffect)((function(){N||J()}),[i,N]),Object(n.useEffect)((function(){!U&&N&&K(!1)}),[U,N]);var H=function(){z(null)},Y=Boolean(U),Z=Y?"simple-popover":void 0,X=function(){_("day"),c({startDate:lt()().startOf("d").toDate(),endDate:lt()().endOf("d").toDate(),key:"selection"})};return r.a.createElement(M.a,null,r.a.createElement(Xe.a,{style:{padding:15}},r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(be.a,{onClick:X,children:"today",variant:"outlined"}),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",marginLeft:15,marginRight:15}},r.a.createElement(B.a,{"aria-label":"previous",onClick:function(){switch(b){case"custom":var e=lt()(i.endDate).diff(lt()(i.startDate),"seconds");c({startDate:lt()(i.startDate).subtract(e,"seconds").startOf("d").toDate(),endDate:lt()(i.endDate).subtract(e+1,"seconds").endOf("d").toDate(),key:"selection"});break;case"day":c({startDate:lt()(i.startDate).subtract(1,"d").startOf("d").toDate(),endDate:lt()(i.startDate).subtract(1,"d").endOf("d").toDate(),key:"selection"});break;case"week":c({startDate:lt()(i.startDate).subtract(1,"d").startOf("week").toDate(),endDate:lt()(i.startDate).subtract(1,"d").endOf("week").toDate(),key:"selection"});break;case"month":c({startDate:lt()(i.startDate).subtract(1,"d").startOf("month").toDate(),endDate:lt()(i.startDate).subtract(1,"d").endOf("month").toDate(),key:"selection"});break;case"year":c({startDate:lt()(i.startDate).subtract(1,"d").startOf("year").toDate(),endDate:lt()(i.startDate).subtract(1,"d").endOf("year").toDate(),key:"selection"})}}},r.a.createElement(tt.a,{fontSize:"small"})),r.a.createElement(B.a,{"aria-label":"next",onClick:function(){switch(b){case"custom":var e=lt()(i.endDate).diff(lt()(i.startDate),"seconds");c({startDate:lt()(i.startDate).add(e+1,"seconds").startOf("d").toDate(),endDate:lt()(i.endDate).add(e,"seconds").endOf("d").toDate(),key:"selection"});break;case"day":c({startDate:lt()(i.endDate).add(1,"d").startOf("d").toDate(),endDate:lt()(i.endDate).add(1,"d").endOf("d").toDate(),key:"selection"});break;case"week":c({startDate:lt()(i.endDate).add(1,"d").startOf("week").toDate(),endDate:lt()(i.endDate).add(1,"d").endOf("week").toDate(),key:"selection"});break;case"month":c({startDate:lt()(i.endDate).add(1,"d").startOf("month").toDate(),endDate:lt()(i.endDate).add(1,"d").endOf("month").toDate(),key:"selection"});break;case"year":c({startDate:lt()(i.endDate).add(1,"d").startOf("year").toDate(),endDate:lt()(i.endDate).add(1,"d").endOf("year").toDate(),key:"selection"});break;default:c({startDate:lt()().startOf("d").toDate(),endDate:lt()().endOf("d").toDate(),key:"selection"})}}},r.a.createElement(nt.a,{fontSize:"small"})),r.a.createElement(be.a,{onClick:function(e){z(e.currentTarget)},startIcon:r.a.createElement(ot.a,null)},0==lt()(i.endDate).diff(lt()(i.startDate),"d")?lt()(i.startDate).format("LL"):"".concat(lt()(i.startDate).format("D MMM, YYYY")," - ").concat(lt()(i.endDate).format("D MMM, YYYY")),r.a.createElement(w.a,{style:{fontSize:9,height:13,marginLeft:10,marginTop:2},label:b.toLocaleUpperCase(),size:"small"})),Y?r.a.createElement(Qe.a,{id:Z,open:Y,anchorEl:U,onClose:H,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},N?r.a.createElement(M.a,{style:{flexDirection:"column",display:"flex"}}," ",r.a.createElement(ct.DateRange,{editableDateInputs:!0,onChange:function(e){return c(Object(h.a)(Object(h.a)({},e.selection),{},{startDate:lt()(e.selection.startDate).startOf("d").toDate(),endDate:lt()(e.selection.endDate).endOf("d").toDate()}))},moveRangeOnFirstSelection:!1,ranges:[i]}),r.a.createElement(be.a,{size:"small",onClick:H,variant:"contained",children:"Apply",color:"primary"})):r.a.createElement($e.a,{style:{minWidth:220}},["day","week","month","custom"].map((function(e){return r.a.createElement(T.a,{onClick:function(){return function(e){switch(_(e),e){case"custom":K(!0);break;case"day":lt()(i.endDate).endOf("d").isAfter(lt()().endOf("d"))?X():c({startDate:lt()(i.endDate).startOf("d").toDate(),endDate:lt()(i.endDate).endOf("d").toDate(),key:"selection"}),H();break;case"week":c({startDate:lt()(i.startDate).startOf("w").toDate(),endDate:lt()(i.startDate).endOf("w").toDate(),key:"selection"}),H();break;case"month":c({startDate:lt()(i.startDate).startOf("month").toDate(),endDate:lt()(i.startDate).endOf("month").toDate(),key:"selection"}),H();break;case"year":c({startDate:lt()(i.startDate).startOf("year").toDate(),endDate:lt()(i.startDate).endOf("year").toDate(),key:"selection"}),H();break;default:c({startDate:lt()().startOf("d").toDate(),endDate:lt()().endOf("d").toDate(),key:"selection"}),H()}}(e)},children:e.toLocaleUpperCase()})})))):r.a.createElement(M.a,null)))),r.a.createElement(M.a,{style:{minHeight:400,display:"flex",paddingTop:15,paddingBottom:15,justifyContent:"space-between"}},r.a.createElement(Xe.a,{style:{width:"24%",display:"flex",height:500,alignItems:"center",justifyContent:"center"}},d?r.a.createElement(fe.a,null):r.a.createElement(ce.a,{style:{alignSelf:"flex-start",paddingTop:30}},r.a.createElement(G.a,{variant:"h5",color:"inherit"},"Total Count"),r.a.createElement(G.a,{color:"textSecondary"},0==lt()(i.endDate).diff(lt()(i.startDate),"d")?lt()(i.startDate).format("LL"):"".concat(lt()(i.startDate).format("D MMM, YYYY")," - ").concat(lt()(i.endDate).format("D MMM, YYYY")),"  ",r.a.createElement(w.a,{style:{fontSize:9,height:13,marginLeft:10,marginTop:2},label:b.toLocaleUpperCase(),size:"small"})),r.a.createElement(G.a,{variant:"h3",color:"inherit"},S||"---"))),r.a.createElement(Xe.a,{style:{width:"75%",display:"flex",height:500,alignItems:"center",justifyContent:"center"}},d?r.a.createElement(fe.a,null):null!==S&&(null===O||void 0===O?void 0:O.every((function(e){var t=e.from,a=void 0===t?"":t,n=e.to;return a&&(void 0===n?"":n)})))?r.a.createElement(ut.a,{width:780,options:{chart:{type:"bar",height:450,width:780,stacked:!0,zoom:{enabled:!0},toolbar:{show:!0}},plotOptions:{bar:{horizontal:!1}},stroke:{width:1,colors:["#fff"]},title:{text:"Jobs per Videotemplate"},xaxis:{categories:O,labels:{formatter:function(e){return function(e){switch(b){case"day":return lt()(null===e||void 0===e?void 0:e.to).add(1,"s").format("LT");case"week":return lt()(null===e||void 0===e?void 0:e.to).format("ddd, DD MMM");case"month":return lt()(null===e||void 0===e?void 0:e.to).format("DD MMM");case"year":return lt()(null===e||void 0===e?void 0:e.to).format("MMM");case"custom":var t=Math.round(lt()(i.endDate).diff(lt()(i.startDate),"seconds")/60/60)/24;return t<=31?t<=1?lt()(null===e||void 0===e?void 0:e.to).add(1,"s").format("LT"):t<=7?lt()(null===e||void 0===e?void 0:e.to).format("ddd, DD MMM"):lt()(null===e||void 0===e?void 0:e.to).format("DD MMM"):"".concat(lt()(null===e||void 0===e?void 0:e.from).format("DD MMM")," - ").concat(lt()(null===e||void 0===e?void 0:e.to).format("DD MMM"));default:return""}}(e)}}},yaxis:{labels:{formatter:function(e){return e+""}}},tooltip:{y:{formatter:function(e){return"".concat(e," Jobs")}},x:{formatter:function(e){return function(e){switch(b){case"day":return"".concat(lt()(null===e||void 0===e?void 0:e.from).format("LT")," - ").concat(lt()(null===e||void 0===e?void 0:e.to).add(1,"s").format("LT"));case"week":case"month":return"".concat(lt()(null===e||void 0===e?void 0:e.to).format("ddd, DD MMM"));case"year":return lt()(null===e||void 0===e?void 0:e.to).format("MMM");case"custom":var t=Math.round(lt()(i.endDate).diff(lt()(i.startDate),"seconds")/60/60)/24;return t<=31?t<=1?"".concat(lt()(null===e||void 0===e?void 0:e.from).format("LT")," - ").concat(lt()(null===e||void 0===e?void 0:e.to).add(1,"s").format("LT")):"".concat(lt()(null===e||void 0===e?void 0:e.to).format("ddd, DD MMM")):"".concat(lt()(null===e||void 0===e?void 0:e.from).format("DD MMM")," - ").concat(lt()(null===e||void 0===e?void 0:e.to).format("DD MMM"));default:return""}}(e)}}},fill:{opacity:1},legend:{position:"bottom",horizontalAlign:"left"}},series:A||[],type:"bar",height:450}):r.a.createElement("div",null))))},pt=a(1402),vt=function(e){var t=e.message,a=(e.showRetry,e.onRetry),n=e.severity,o=void 0===n?"error":n,i=e.title,l=void 0===i?"":i,c=e.buttonText,s=e.style,u=void 0===s?{}:s;return r.a.createElement(ye.a,{style:Object(h.a)({marginBottom:20},u),severity:o,action:a&&r.a.createElement(be.a,{onClick:function(){return a()},color:"inherit",size:"small"},c||"Retry")},l?r.a.createElement(pt.a,null,l):"",t)},bt=function(){var e=Object(f.b)(),t=e.user,a=e.verifyEmail,o=Object(n.useState)("Your email verification is pending!"),i=Object(l.a)(o,2),c=i[0],s=i[1],u=Object(n.useState)("warning"),d=Object(l.a)(u,2),m=d[0],p=d[1],v=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:s("Email verification link has been sent to ".concat(null===t||void 0===t?void 0:t.email,", Follow the instructions to verify your email")),p("info");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(null===t||void 0===t?void 0:t.emailVerified)?r.a.createElement("div",null):r.a.createElement(vt,{message:c,buttonText:"verify",severity:m,onRetry:v})};function ft(){return r.a.createElement(M.a,null,r.a.createElement(bt,null),r.a.createElement(mt,null))}var _t=a(105),ht=a(1457),Et=a(1404);function gt(e){var t=e.children,a=e.value,n=e.index,o=Object(_t.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,style:{height:"100%",width:"100%"},id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},o),a===n?r.a.createElement(M.a,{style:{height:"100%",width:"100%"}},t):r.a.createElement("div",null))}var yt=Object(E.a)((function(e){return{}}));function Ot(e){var t,a,o=e.tabs,i=e.initialTabIndex,c=void 0===i?0:i,s=e.onTabIndexChange,u=(yt(),Object(f.b)().user),d=r.a.useState(c),m=Object(l.a)(d,2),p=m[0],v=m[1];Object(n.useEffect)((function(){c!==p&&b(null,c)}),[c]);var b=function(e,t){v(t),s&&s(t)};return r.a.createElement(Xe.a,null,r.a.createElement(ht.a,{value:p,onChange:b,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},null===(t=o.filter((function(e){return e.allowedRoles.includes(null===u||void 0===u?void 0:u.role)})))||void 0===t?void 0:t.map((function(e,t){var a=e.label;return r.a.createElement(Et.a,Object.assign({label:a},function(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}(t)))}))),null===(a=o.filter((function(e){return e.allowedRoles.includes(null===u||void 0===u?void 0:u.role)})))||void 0===a?void 0:a.map((function(e,t){var a=e.component;e.allowedRoles;return r.a.createElement(gt,{value:p,index:t},a)})))}var jt=a(1405),Dt=a(116),kt=function(){var e,t,a=Object(f.b)(),o=a.user,i=a.refreshUser,c=Object(dt.b)().User,s=Object(te.b)().enqueueSnackbar,u=Object(n.useState)(0),d=Object(l.a)(u,2),m=d[0],p=d[1],v=Object(n.useState)(!1),b=Object(l.a)(v,2),_=b[0],h=b[1],E=Object(n.useState)(!1),g=Object(l.a)(E,2),y=g[0],O=g[1],j=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.photoURL,e.prev=1,O(!0),e.next=5,c.update({name:a});case 5:return o=e.sent,e.next=8,null===(r=ie.a.currentUser)||void 0===r?void 0:r.updateProfile({displayName:a,photoURL:n});case 8:return e.next=10,i(o.data);case 10:O(!1),s("Profile Updated successfully!",{variant:"success"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),O(!1),s("Failed to update profile",{variant:"error"});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}return e.prev=1,h(!0),(n=Object(Dt.a)("".concat(null!==(a=null===o||void 0===o?void 0:o.uid)&&void 0!==a?a:"users","/avatar-").concat(null===o||void 0===o?void 0:o.email,".").concat(t.name.split(".").pop()),t)).on("httpUploadProgress",(function(e){var t=e.loaded,a=e.total;return p(t/a)})),e.next=7,n.promise();case 7:r=e.sent,i=(i=r.Location).startsWith("http")?i:"https://".concat(i),h(!1),C("photoURL",i),p(0),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),p(0),h(!1),s("Failed to upload your profile picture!",{variant:"error"});case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(Oe.a)({initialValues:{name:null!==(e=null===o||void 0===o?void 0:o.name)&&void 0!==e?e:null===o||void 0===o?void 0:o.displayName,photoURL:null!==(t=null===o||void 0===o?void 0:o.photoURL)&&void 0!==t?t:""},validationSchema:je.c({name:je.d().required("Name can't be empty!"),photoURL:je.d()}),onSubmit:j}),S=k.handleChange,x=k.handleBlur,w=k.handleSubmit,C=k.setFieldValue,T=k.values,P=k.errors,A=k.touched;return r.a.createElement(ce.a,{onSubmit:w,noValidate:!0,component:"form",style:{padding:20,paddingLeft:25,paddingRight:25,margin:0}},r.a.createElement(ke,{style:{marginBottom:20}},"Your Profile"),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",flexDirection:"column",marginRight:20,marginBottom:15,justifyContent:"center"}},r.a.createElement("input",{accept:"image/*",onChange:function(e){var t=e.target.files;return D((t||[])[0])},style:{display:"none"},id:"contained-button-file",multiple:!0,type:"file"}),r.a.createElement("img",{style:{height:150,width:150,borderRadius:75,background:"lightgrey"},alt:"profile",src:T.photoURL||"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(be.a,{style:{marginTop:15,alignSelf:"center"},size:"small",component:"span",disabled:_||y,startIcon:_?r.a.createElement(fe.a,{color:"inherit",size:20}):r.a.createElement(jt.a,{color:"inherit",fontSize:"small"}),children:_?"".concat(Math.floor(100*m),"%"):"Change",color:"primary",variant:"outlined"}))),r.a.createElement(M.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(se.a,{name:"name",margin:"dense",value:T.name,label:"Your name",onBlur:x,onChange:S,error:A.name&&!!P.name,variant:"outlined",placeholder:"Enter your name",helperText:A.name&&P.name?null===P||void 0===P?void 0:P.name:""}),r.a.createElement(be.a,{disabled:_||y,style:{marginTop:15,alignSelf:"flex-start"},size:"small",type:"submit",children:y?r.a.createElement(fe.a,{color:"inherit",size:20}):"Update",color:"primary",variant:"contained"}))))},St=a(650),xt=a.n(St),wt=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.permissions.query({name:"clipboard-write"});case 2:if("granted"!=(a=e.sent).state&&"prompt"!=a.state){e.next=5;break}return e.abrupt("return",navigator.clipboard.writeText("".concat(t)).then((function(){return Promise.resolve()}),(function(e){return Promise.reject("Copying not supported in your browser!")})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function e(t,a,n){return n=n||"ae",t?"remotion"===n?a?t.fields:{textLayers:e(t,"textLayers",n),imageLayers:e(t,"imageLayers",n)}:a?t[a]?t[a]:[]:{textLayers:t.textLayers,imageLayers:t.imageLayers}:[]},Tt=function(){return Math.random().toString(36).substr(2,9)},Pt=function(){var e=Object(oe.a)(re.a.mark((function e(t,a,n){var r,o,i,l,c,s,u,d,m,p,v;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ae"!==n){e.next=34;break}return e.next=3,fetch("".concat(t||"https://buzzle-extraction-service-6cjz5.ondigitalocean.app","/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fileUrl:a})});case 3:if(!(r=e.sent).ok){e.next=15;break}return e.next=7,r.json();case 7:return o=e.sent,i=o.compositions,l=o.staticAssets,c=o.url,s=void 0===c?a:c,e.abrupt("return",{compositions:i,staticAssets:l,url:s||a});case 15:return e.t0=Error,e.next=18,r.json();case 18:if(e.t3=u=e.sent,e.t2=null===e.t3,e.t2){e.next=22;break}e.t2=void 0===u;case 22:if(!e.t2){e.next=26;break}e.t4=void 0,e.next=27;break;case 26:e.t4=u.message;case 27:if(e.t1=e.t4,e.t1){e.next=30;break}e.t1="Something went wrong!";case 30:throw e.t5=e.t1,new e.t0(e.t5);case 32:e.next=60;break;case 34:if("remotion"!==n){e.next=59;break}return e.next=37,fetch("".concat(t||"https://remotion-bundler.buzzle.site"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fileUrl:a})});case 37:if((p=e.sent).ok){e.next=53;break}return e.t6=Error,e.next=42,p.json();case 42:if(e.t8=v=e.sent,e.t7=null===e.t8,e.t7){e.next=46;break}e.t7=void 0===v;case 46:if(!e.t7){e.next=50;break}e.t9=void 0,e.next=51;break;case 50:e.t9=v.message;case 51:throw e.t10=e.t9,new e.t6(e.t10);case 53:return e.next=55,p.json();case 55:return p=e.sent,e.abrupt("return",{compositions:null===(d=p)||void 0===d?void 0:d.compositions,staticAssets:[],url:null===(m=p)||void 0===m?void 0:m.url});case 59:throw new Error("Template type missing!");case 60:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),At=a(1406),Rt=a(1407),Mt=function(){var e=Pe().reAuthInit,t=Object(f.b)(),a=t.user,o=t.refreshUser,i=Object(dt.b)().User,c=Object(n.useState)(""),s=Object(l.a)(c,2),u=s[0],d=s[1],m=Object(te.b)().enqueueSnackbar,p=Object(n.useState)(!0),v=Object(l.a)(p,2),b=v[0],_=v[1],h=Object(n.useCallback)(function(){var t=Object(oe.a)(re.a.mark((function t(a){var n;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d("update"),t.next=4,e();case 4:return t.next=6,i.update({},{keyOperation:a});case 6:return n=t.sent,t.next=9,o(n.data);case 9:m("API key ".concat(a,"ed Successfully"),{variant:"success"}),d(""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),d(""),m("Operation dismissed, Failed to authenticate!",{variant:"error"});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),[]),E=Object(n.useCallback)(Object(oe.a)(re.a.mark((function t(){var a;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d("revoke"),t.next=4,e();case 4:return t.next=6,i.update({},{keyOperation:"revoke"});case 6:return a=t.sent,t.next=9,o(a.data);case 9:m("API key Revoked Successfully",{variant:"success"}),d(""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),d(""),m("Failed to authenticate, key revokation failed!",{variant:"error"});case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))),[]),g=Object(n.useCallback)(Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt(null!==(t=null===a||void 0===a?void 0:a.APIKey)&&void 0!==t?t:"");case 3:m("API key copied successfully!",{variant:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),m("".concat(e.t0.message||"Failed to copy API Key"),{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[a]);return r.a.createElement(ce.a,{style:{padding:20,paddingLeft:25,paddingRight:25,margin:0}},r.a.createElement(ke,{style:{marginBottom:15}},"API Key"),r.a.createElement(vt,{message:(null===a||void 0===a?void 0:a.APIKey)?"Do not disclose API key in public, Use it on server side to make API calls, Using it on client is not recommendable, If you find your API key compromised Revoke or Regenerate the key!":"API Key is for developers who wants to integerate and automate video rendering on their platform or service!",severity:(null===a||void 0===a?void 0:a.APIKey)?"warning":"info"}),(null===a||void 0===a?void 0:a.APIKey)?r.a.createElement(M.a,{style:{marginBottom:15}},r.a.createElement(se.a,{type:b?"password":"text",contentEditable:"false",margin:"dense",size:"small",style:{marginBottom:2,fontSize:12,maxWidth:350},InputProps:{endAdornment:r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},r.a.createElement(B.a,{onClick:function(){_((function(e){return!e}))},"aria-label":"showKey"},b?r.a.createElement(At.a,{color:"inherit",fontSize:"small"}):r.a.createElement(Rt.a,{color:"inherit",fontSize:"small"})),r.a.createElement(L.a,{style:{height:28,margin:4},orientation:"vertical"}),r.a.createElement(B.a,{onClick:g,"aria-label":"copyKey"},r.a.createElement(xt.a,{color:"inherit",fontSize:"small"})))},variant:"outlined",value:"".concat(null===a||void 0===a?void 0:a.APIKey)})):r.a.createElement("div",null),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},r.a.createElement(be.a,{disabled:"update"===u,children:"update"===u?r.a.createElement(fe.a,{color:"inherit",size:20}):(null===a||void 0===a?void 0:a.APIKey)?"Re-Generate":"Generate Key",onClick:function(){return h((null===a||void 0===a?void 0:a.APIKey)?"update":"generate")},variant:"contained",color:"primary"}),(null===a||void 0===a?void 0:a.APIKey)?r.a.createElement(be.a,{disabled:"revoke"===u,style:{marginLeft:15},children:"revoke"===u?"revoking...":"Revoke",onClick:E,color:"secondary"}):r.a.createElement("div",null)))},It=function(){return r.a.createElement(M.a,null,r.a.createElement(Ce,{initialMode:"change-pass"}),r.a.createElement(ce.a,null,r.a.createElement(L.a,null)),r.a.createElement(Mt,null))},Lt=function(){return r.a.createElement(ce.a,{style:{padding:20,paddingLeft:25,paddingRight:25,margin:0}},r.a.createElement(ke,{style:{marginBottom:15}},"Webhooks"),r.a.createElement(Se,null,"Coming soon"))};var Ut=function(){var e=new URLSearchParams(Object(b.h)().search).get("tab")||"profile",t=Object(b.g)(),a=Object(n.useState)(e),o=Object(l.a)(a,2),i=o[0],c=o[1],s=[{label:"Profile",key:"profile",component:r.a.createElement(kt,null),allowedRoles:["admin","user"]},{label:"Credentials",component:r.a.createElement(It,null),key:"credentials",allowedRoles:["admin","user"]},{label:"Webhooks",component:r.a.createElement(Lt,null),key:"webhooks",allowedRoles:["admin","user"]}];return Object(n.useEffect)((function(){c(e)}),[e]),r.a.createElement(Ot,{onTabIndexChange:function(e){return t.push("/home/settings?tab=".concat(s[e].key))},initialTabIndex:s.findIndex((function(e){return e.key===i})),tabs:s})},Bt=a(1408);function zt(e){return r.a.createElement(ye.a,Object.assign({elevation:6,variant:"filled"},e))}var Ft=function(e){var t=e.open,a=e.message,n=e.type,o=e.onClose;return r.a.createElement(Bt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:t,autoHideDuration:5e3,onClose:o},r.a.createElement(zt,{onClose:o,severity:n},a))},Wt=a(110),Nt=a.n(Wt),Kt=a(241),Vt=a.n(Kt),Gt=a(145),qt=function(e){var t,a,o,i,c,s=Object(b.j)(),u=(s.url,s.path),d=Object(b.g)(),m=Object(dt.b)(),p=(m.Job,m.VideoTemplate,m.User),v=Object(n.useState)(!1),_=Object(l.a)(v,2),h=(_[0],_[1],Object(n.useState)(null)),g=Object(l.a)(h,2),y=g[0],O=g[1],j=Object(n.useState)(null),D=Object(l.a)(j,2),k=(D[0],D[1],Object(n.useState)(!1)),S=Object(l.a)(k,2),x=(S[0],S[1],Object(n.useState)([])),w=Object(l.a)(x,2),C=(w[0],w[1]),T=Object(n.useState)("list"),P=Object(l.a)(T,2),A=(P[0],P[1],Object(n.useRef)(null)),I=(Object(f.b)().user.role,"".concat("https://api.buzzle.site","/creators/"),Object(E.a)((function(e){return{root:{display:"flex",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:850},icon:{color:"rgba(255, 255, 255, 0.54)"},drafted:{marginLeft:10}}}))(),Object(n.useState)(null!==(t=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(o=a.state)||void 0===o?void 0:o.statusObj)&&void 0!==t?t:{status:!1,err:!1})),L=Object(l.a)(I,2),U=L[0],B=L[1];Object(n.useEffect)((function(){(function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=C,e.next=3,p.getAll(1,10);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var z=U.status,F=U.err;return r.a.createElement(ce.a,null,y&&r.a.createElement(vt,{message:y.message,showRetry:!0,onRetry:function(){O(!1),A.current&&A.current.onQueryChange()}}),r.a.createElement(Ft,{open:F||z,type:z?"success":"error",message:z?null!==(i=null===z||void 0===z?void 0:z.message)&&void 0!==i?i:"Deleted Successfully":null!==(c=null===F||void 0===F?void 0:F.message)&&void 0!==c?c:"Oops, something went wrong, action failed !",onClose:function(){return B({status:!1,err:!1})}}),r.a.createElement(M.a,{display:"flex",alignItems:"end",justifyContent:"space-between",flexDirection:"row",p:1}),r.a.createElement(Nt.a,{tableRef:A,title:"Creators",onRowClick:function(e,t){var a=t.id;d.push("".concat(u).concat(a))},columns:[{title:"Name",field:"name",render:function(e){var t=e.imageUrl,a=e.name;return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(R.a,{style:{marginRight:10,height:30,width:30},alt:"thumbnail",src:t}),a)}},{title:"Creator Id",field:"id"},{title:"Email",field:"email"}],localization:{body:{emptyDataSourceMessage:r.a.createElement(G.a,null,"No Creator Found.")}},detailPanel:[{render:function(e){return r.a.createElement(Vt.a,{displayDataTypes:!1,name:e.id,collapsed:1,src:e})},icon:"code",tooltip:"Show Code"}],data:function(e){return p.getAll(e.page+1,e.pageSize).then((function(t){var a=t.data,n=t.count;return{data:a,page:e.page,totalCount:n}})).catch((function(t){return O(t),{data:[],page:e.page,totalCount:0}}))},options:{pageSize:10,headerStyle:{fontWeight:700},minBodyHeight:500,actionsColumnIndex:-1}}))},Jt=function(){return r.a.createElement(ce.a,null,r.a.createElement(G.a,null,"User Details"))},Ht=function(e){var t=e.component,a=e.title,o=e.props;return Object(n.useEffect)((function(){document.title="Buzzle".concat(a?" | ".concat(a):"")}),[a]),r.a.createElement(t,o)},Yt=function(){var e=Object(b.j)().path;return r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"".concat(e,"/"),exact:!0,render:function(e){return r.a.createElement(Ht,{props:e,component:qt,title:"Developers"})}}),r.a.createElement(b.b,{path:"".concat(e,"/:id"),render:function(e){return r.a.createElement(Ht,{props:e,component:Jt,title:"Developer Details"})}}))},Zt=a(1417),Xt=a(1419),Qt=a(41);var $t=function(e,t){var a,n,r,o;switch(t.type){case"UPDATE_FIELD_CHANGES":var i=e.versions[t.payload.activeVersionIndex].fields.map((function(a,n){var r=a.type,o=a.rendererData,i=a.constraints,l=a.placeholder,c=a.label,s=(null===o||void 0===o?void 0:o.layerName)+(null===o||void 0===o?void 0:o.property);return t.payload.updatedFields.includes(s)?e.versions[0].fields[t.payload.updatedFields.indexOf(s)]:{type:r,rendererData:o,constraints:i,placeholder:l,label:c}}));return e.versions[t.payload.activeVersionIndex].fields=i,Object.assign({},e);case"RESTORE_FIELDS":var c=e.versions[(null===t||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.restoreVersionIndex)||0].fields.filter((function(e){var a=e.rendererData;return(t.payload.currentCompositionFields||[]).includes(a.layerName)}));return e.versions[t.payload.activeVersionIndex].fields=c,Object.assign({},e);case"SWAP_FIELDS":return e.versions[t.payload.activeVersionIndex].fields=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(l.a)(r,1)[0];return n.splice(a,0,o),n}(e.versions[t.payload.activeVersionIndex].fields,t.payload.swapIndex,t.payload.targetSwapIndex),Object.assign({},e);case"EDIT_VIDEO_KEYS":return Object(h.a)(Object(h.a)({},e),t.payload.value);case"REMOVE_VERSION":return Object(h.a)(Object(h.a)({},e),{},{versions:e.versions.filter((function(e,a){return a!==t.payload.activeVersionIndex}))});case"EDIT_VERSION_KEYS":return e.versions[t.payload.activeVersionIndex]=Object(h.a)(Object(h.a)({},e.versions[t.payload.activeVersionIndex]),{},{fields:null!==(n=null===(r=e.versions[t.payload.activeVersionIndex])||void 0===r?void 0:r.fields)&&void 0!==n?n:[]},t.payload.value),Object.assign({},e);case"REMOVE_FIELD":return e=Object(h.a)(Object(h.a)({},e),{},{versions:e.versions.map((function(e,a){return a===t.payload.activeVersionIndex?Object(h.a)(Object(h.a)({},e),{},{fields:e.fields.filter((function(e,a){return t.payload.fieldIndex!==a}))}):e}))});case"ADD_FIELD":return e.versions[t.payload.activeVersionIndex].fields.push(Object(h.a)({},t.payload.field)),Object.assign({},e);case"UPDATE_FIELD":return e.versions[t.payload.activeVersionIndex].fields[t.payload.fieldIndex]=Object(h.a)({},t.payload.field),Object.assign({},e);case"LOAD_STATE":return Object(h.a)({},t.payload);case"RESET_STATE":return{title:"",idCreatedBy:ie.a.currentUser.uid,type:null===(o=t.payload)||void 0===o?void 0:o.type,src:"",versions:[],description:"",keywords:[],staticAssets:[],fonts:[],thumbnail:""};default:throw new Error("Action not recognized")}},ea=Object(n.createContext)(),ta=function(e){var t=e.children,a=Object(n.useReducer)($t,{title:"",idCreatedBy:ie.a.currentUser.uid,src:"",type:"ae",versions:[],description:"",keywords:[],staticAssets:[],fonts:[],thumbnail:""}),o=Object(l.a)(a,2),i=o[0],c=o[1];return r.a.createElement(ea.Provider,{value:[i,c],children:t})};function aa(){var e=r.a.useContext(ea),t=Object(l.a)(e,2),a=(t[0],t[1]);return{restoreChanges:function(e,t){a({type:"UPDATE_FIELD_CHANGES",payload:{activeVersionIndex:e,updatedFields:t}})},restoreFieldsFromPreviousVersion:function(e,t,n){a({type:"RESTORE_FIELDS",payload:{restoreVersionIndex:e,activeVersionIndex:t,currentCompositionFields:n}})},editVideoKeys:function(e){a({type:"EDIT_VIDEO_KEYS",payload:{value:e}})},editversionKeys:function(e,t){a({type:"EDIT_VERSION_KEYS",payload:{value:t,activeVersionIndex:e}})},removeVersion:function(e){a({type:"REMOVE_VERSION",payload:{activeVersionIndex:e}})},resetVideo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ae";a({type:"RESET_STATE",payload:{id:e,type:t}})},addField:function(e,t){a({type:"ADD_FIELD",payload:{activeVersionIndex:e,field:t}})},swapFields:function(e,t,n){a({type:"SWAP_FIELDS",payload:{activeVersionIndex:e,swapIndex:t,targetSwapIndex:n}})},removeField:function(e,t){a({type:"REMOVE_FIELD",payload:{activeVersionIndex:e,fieldIndex:t}})},updateField:function(e,t,n){a({type:"UPDATE_FIELD",payload:{activeVersionIndex:e,fieldIndex:t,field:n}})},loadVideo:function(e){a({type:"LOAD_STATE",payload:e})}}}var na=a(1372),ra=a(466),oa=a(381),ia=a(690),la=a(653),ca=a.n(la),sa=a(1424),ua=a(172),da=a.n(ua),ma=a(1433),pa=a(1434),va=a(1435),ba=a(1436),fa=a(1437);function _a(e){var t=e.asset,a=e.handleDelete,o=void 0===a?void 0:a,i=e.setAssets,c=e.type,s=e.assetsNames,u=e.isFolderResolved,d=Object(n.useState)(!1),m=Object(l.a)(d,2),p=m[0],v=m[1],b=Object(n.useContext)(ea),_=Object(l.a)(b,1)[0],E=(Object(f.b)().user,Object(n.useState)("string"===typeof(null===t||void 0===t?void 0:t.src)?null===t||void 0===t?void 0:t.src:"")),g=Object(l.a)(E,2),y=g[0],O=g[1],j=Object(n.useState)("file"),D=Object(l.a)(j,2),k=D[0],S=D[1],x=Object(n.useState)(null),w=Object(l.a)(x,2),C=w[0],T=w[1],P=Object(n.useState)(null),A=Object(l.a)(P,2),R=A[0],I=A[1],L=Object(n.useState)(null),U=Object(l.a)(L,2),B=U[0],z=U[1],N=".".concat(null===t||void 0===t?void 0:t.name.split(".").pop());Object(n.useEffect)((function(){u&&"string"!==typeof(null===t||void 0===t?void 0:t.src)&&V(t.src)}),[]),Object(n.useEffect)((function(){"string"===typeof t.src&&t.src&&!t.src.startsWith("http")&&I(new Error("Invalid url, Please re-check the url"))}),[t]);var K=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,o,l,u,d;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("folder"===c){e.next=7;break}if(l=(null!==(a=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.files)&&void 0!==a?a:[null])[0]||(null!==(r=null===t||void 0===t||null===(o=t.dataTransfer)||void 0===o?void 0:o.files)&&void 0!==r?r:[null])[0]){e.next=4;break}return e.abrupt("return");case 4:V(l),e.next=9;break;case 7:d=Object.assign([],null===t||void 0===t?void 0:t.target.files),i(null===(u=d.filter((function(e){var t=e.name;return s.includes(t)})))||void 0===u?void 0:u.map((function(e){return{name:e.name,src:e}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(null),T(null),v(!0),a=Object(Dt.a)("templates/".concat(null===_||void 0===_?void 0:_.title,"/assets/").concat(t.name||"".concat(Date.now(),".").concat(null===t||void 0===t?void 0:t.name.split(".").pop())),t),z(a),a.on("httpUploadProgress",(function(e){var t=e.loaded,a=e.total;return T("".concat(Math.floor(t/a*100),"%"))})),e.next=9,a.promise();case 9:n=e.sent,r=(r=n.Location).startsWith("http")?r:"https://".concat(r),v(!1),i(r),O(r),T(null),v(!1),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(0),T(null),v(!1),I(e.t0),z(null);case 25:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===B||void 0===B?void 0:B.abort();case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),v(!1),I(e.t0),z(null);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(M.a,null,r.a.createElement(F.a,null,r.a.createElement(W.a,null,[".ogm",".wmp",".mpg",".webm",".ogv",".mov",".asx",".mpeg",".mp4",".m4v",".avi"].includes(N)?r.a.createElement(ma.a,{fontSize:"large"}):[".opus",".flac",".webm",".weba",".wav",".ogg",".m4a",".mp3",".oga",".mid",".amr",".aiff",".wma",".au",".aac"].includes(N)?r.a.createElement(pa.a,{fontSize:"large"}):[".tiff",".pjp",".pjpeg",".jfif",".tif",".gif",".svg",".bmp",".png",".jpeg",".svgz",".jpg",".webp",".ico",".xbm",".dib"].includes(N)?r.a.createElement(va.a,{fontSize:"large"}):r.a.createElement(ba.a,{fontSize:"large"})),r.a.createElement(M.a,null,r.a.createElement(Se,{style:{fontWeight:600}},null===t||void 0===t?void 0:t.name),"file"===c?r.a.createElement(ue.a,{component:"fieldset"},r.a.createElement(ra.a,{"aria-label":"type",name:"type",value:k,onChange:function(e){var t=e.target.value;return S(t)},row:!0},r.a.createElement(oa.a,{value:"file",control:r.a.createElement(ia.a,null),label:"File"}),r.a.createElement(oa.a,{value:"url",control:r.a.createElement(ia.a,null),label:"URL"}))):r.a.createElement("div",null),"file"==k||"file"!==c?r.a.createElement(M.a,{m:1,ml:0},"folder"===c?r.a.createElement("input",{id:null===t||void 0===t?void 0:t.name,style:{display:"none"},type:"file",name:null===t||void 0===t?void 0:t.name,webkitdirectory:"",mozdirectory:"",onChange:K}):r.a.createElement("input",{id:null===t||void 0===t?void 0:t.name,style:{display:"none"},type:"file",name:null===t||void 0===t?void 0:t.name,accept:N,onChange:K}),r.a.createElement("label",{htmlFor:null===t||void 0===t?void 0:t.name},r.a.createElement(be.a,{disabled:p,variant:"contained",size:"small",color:"primary",startIcon:r.a.createElement(fa.a,null),component:"span"},y?"Change":"Upload")),r.a.createElement(G.a,{style:Object(h.a)({marginLeft:10},"string"!==typeof(null===t||void 0===t?void 0:t.src)||"file"!==c||p?{}:{color:"green"}),variant:"body2",component:"span",color:"textSecondary"},p?" Uploading: ".concat(C||"0%"," "):"".concat("folder"===c?"":"string"===typeof t.src?da.a.basename(null===t||void 0===t?void 0:t.src):"")),p&&r.a.createElement(be.a,{onClick:q,size:"small",color:"secondary",component:"span"},"Cancel")):r.a.createElement(M.a,null,r.a.createElement(se.a,{label:"File URL",placeholder:"Paste URL here",margin:"dense",style:{marginRight:20},variant:"outlined",value:y,onChange:function(e){var t=e.target.value;I(null),i(t),O(t)}})),r.a.createElement(ve.a,{error:!!R,children:R?null===R||void 0===R?void 0:R.message:(null===t||void 0===t?void 0:t.src)?"":"Upload ".concat("folder"===c?"Folder":"or ignore to continue")})),r.a.createElement(sa.a,null,r.a.createElement(be.a,{disabled:!o||!!y,onClick:function(){return o?o():console.log("disabled")},color:"secondary"},"Ignore"))))}var ha=a(393),Ea=a.n(ha),ga=Object(E.a)((function(e){return{root:{border:"1px solid ".concat(e.palette.divider)}}}));function ya(e){var t,a,o,i,c=e.staticAssets,s=e.activeDisplayIndex,u=e.setActiveDisplayIndex,d=e.isAssetNavigated,m=e.setIsAssetNavigated,p=e.isSubmitting,v=e.submitError,b=e.handleSubmitForm,f=ga(),_=Object(n.useState)(!1),E=Object(l.a)(_,2),g=E[0],y=E[1],O=Object(n.useContext)(ea),j=Object(l.a)(O,1)[0],D=aa().editVideoKeys,k=Object(te.b)().enqueueSnackbar,S=Object(n.useState)(""===(null!==(t=null===(a=c[0])||void 0===a?void 0:a.src)&&void 0!==t&&t)?"folder":"file"),x=Object(l.a)(S,2),w=x[0],C=x[1],T=Object(n.useState)([]),P=Object(l.a)(T,2),A=P[0],R=P[1],I=Object(n.useState)("string"!==typeof(null===(o=c[0])||void 0===o?void 0:o.src)||!!(null===(i=c[0])||void 0===i?void 0:i.src)),U=Object(l.a)(I,2),F=U[0],W=U[1];Object(n.useEffect)((function(){m(!0),R(d?j.staticAssets||[]:null===c||void 0===c?void 0:c.map((function(e){return(j.staticAssets||[]).find((function(t){return t.name===e.name}))||e})))}),[]),Object(n.useEffect)((function(){D({staticAssets:A}),y(A.every((function(e){return!!e.src})))}),[A]);return r.a.createElement(M.a,null,r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(ke,null,"Upload Asset Files"),r.a.createElement(B.a,{onClick:function(){R(null===c||void 0===c?void 0:c.map((function(e){return(j.staticAssets||[]).find((function(t){return t.name===e.name}))||e})))}},r.a.createElement(Ea.a,null))),r.a.createElement(ue.a,{style:{marginTop:5},component:"fieldset"},r.a.createElement(na.a,{component:"legend"},"Choose Asset Upload Structure"),r.a.createElement(ra.a,{value:w,onChange:function(e){C(e.target.value)},row:!0},r.a.createElement(oa.a,{value:"folder",control:r.a.createElement(ia.a,null),label:"Complete Assets Folder"}),r.a.createElement(oa.a,{value:"file",control:r.a.createElement(ia.a,null),label:"Individual Assets"}))),function(e){var t;switch(e){case"folder":return r.a.createElement(z.a,{className:f.root},r.a.createElement(_a,{type:e,assetsNames:null===(t=A.filter((function(e){return!e.src})))||void 0===t?void 0:t.map((function(e){return e.name})),setAssets:function(e){"string"!==typeof e&&(e.length||k("No asset present in this folder, Upload your asset individually",{variant:"warning"}),R((function(t){return t.map((function(t){var a;return Object(h.a)(Object(h.a)({},t),{},{src:(null===(a=e.find((function(e){return t.name===e.name})))||void 0===a?void 0:a.src)||(null===t||void 0===t?void 0:t.src)||""})}))})),W(!0),C("file"))},asset:{name:"Asset Folder",src:"",type:"static"},isFolderResolved:F}));case"file":return r.a.createElement(M.a,{mt:2},r.a.createElement(z.a,{className:f.root},0!==(null===A||void 0===A?void 0:A.length)?null===A||void 0===A?void 0:A.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{type:"file",assetsNames:[e.name],key:e.name,handleDelete:function(){R(A.filter((function(t,a){return t.name!==e.name})))},setAssets:function(t){"string"===typeof t&&R((function(a){return null===a||void 0===a?void 0:a.map((function(a,n){return(null===a||void 0===a?void 0:a.name)===(null===e||void 0===e?void 0:e.name)?Object(h.a)(Object(h.a)({},a),{},{src:t}):a}))}))},asset:e,isFolderResolved:F}),t!==A.length-1&&r.a.createElement(L.a,null))})):r.a.createElement(M.a,{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200},r.a.createElement(G.a,null,"No Assets Found!"))));default:return}}(w),r.a.createElement(M.a,{display:"flex",justifyContent:"space-between",mt:4},r.a.createElement(be.a,{startIcon:r.a.createElement(ca.a,null),style:{margin:10},color:"primary",variant:"outlined",children:"Back",onClick:function(){return u(s-1)}}),r.a.createElement(be.a,{endIcon:p&&r.a.createElement(fe.a,{color:"inherit",size:20}),disabled:p||!g,style:{margin:10},color:v?"secondary":"primary",variant:v?"outlined":"contained",children:v?"Retry":p?"Submitting":"Submit",onClick:function(){return b(j)}})))}var Oa=a(1438),ja=a(1439),Da=a(77),ka=Object(E.a)((function(e){return{root:{border:"1px solid ".concat(e.palette.divider)}}}));function Sa(e){e.compositions;var t=e.fonts,a=e.setActiveDisplayIndex,o=e.setIsFontNavigated,i=e.isFontNavigated,c=e.activeDisplayIndex,s=aa().editVideoKeys,u=Object(n.useContext)(ea),d=Object(l.a)(u,1)[0],m=ka(),p=Object(n.useState)([]),v=Object(l.a)(p,2),b=v[0],f=v[1],_=Object(n.useState)(!1),E=Object(l.a)(_,2),g=E[0],y=E[1];Object(n.useEffect)((function(){o(!0),f(i?(null===d||void 0===d?void 0:d.fonts)||[]:t.map((function(e){var t;return(null===d||void 0===d||null===(t=d.fonts)||void 0===t?void 0:t.find((function(t){return t.name===e.name})))||e})))}),[]);return Object(n.useEffect)((function(){s({fonts:b}),y(b.every((function(e){return!!e.src})))}),[b]),r.a.createElement(M.a,null,r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(ke,null,"Upload Font Files"),r.a.createElement(B.a,{onClick:function(){f(t.map((function(e){var t;return(null===d||void 0===d||null===(t=d.fonts)||void 0===t?void 0:t.find((function(t){return t.name===e.name})))||e})))}},r.a.createElement(Ea.a,null))),r.a.createElement(M.a,{mt:2},r.a.createElement(z.a,{className:m.root},b.length?b.map((function(e,t){return r.a.createElement(M.a,{key:e.name},r.a.createElement(F.a,null,r.a.createElement(Da.a,{uploadFileNameColor:"#4BB543",value:e.src,storageType:"archive",label:e.name,helperText:e.src?"":"Upload Font or Ignore to continue",name:e.name,forceUploadDirectory:!0,uploadDirectory:"templates/".concat(null===d||void 0===d?void 0:d.title,"/fonts"),onChange:function(t){f((function(a){return null===a||void 0===a?void 0:a.map((function(a){return a.name===e.name?Object(h.a)(Object(h.a)({},a),{},{src:t}):a}))}))},accept:".ttf,.otf"}),r.a.createElement(sa.a,null,r.a.createElement(be.a,{disabled:!!e.src,onClick:function(){f(b.filter((function(t,a){return t.name!==e.name})))},color:"secondary"},"Ignore"))),t!==b.length-1&&r.a.createElement(L.a,null))})):r.a.createElement(M.a,{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200},r.a.createElement(Se,{color:"textSecondary"},"No Fonts Found in this template!")))),r.a.createElement(M.a,{display:"flex",justifyContent:"space-between",mt:4},r.a.createElement(be.a,{startIcon:r.a.createElement(Oa.a,null),color:"primary",variant:"outlined",onClick:function(){return a(c-1)}},"Back"),r.a.createElement(be.a,{disabled:!g,endIcon:r.a.createElement(ja.a,null),color:"primary",variant:"contained",onClick:function(){a(c+1)}},"Next")))}var xa=a(1427),wa=a(1430),Ca=a(1428),Ta=function(e){var t=e.activeDisplayIndex,a=e.type,n="ae"===(void 0===a?"ae":a)?["File Meta","Versions","Font Files","Assets Files"]:["File Meta","Versions"];return r.a.createElement(wa.a,{style:{background:"transparent"},activeStep:t},n.map((function(e){return r.a.createElement(xa.a,{key:e},r.a.createElement(Ca.a,{style:{fontWeight:700}},e))})))},Pa=a(1418),Aa=a(1440),Ra=a(306),Ma=a.n(Ra),Ia=a(477),La=a.n(Ia),Ua=a(657),Ba=a.n(Ua),za=a(656),Fa=a.n(za),Wa=function(e){var t,a=e.text,n=e.style,o=void 0===n?{}:n,i=e.textStyle,l=void 0===i?{}:i,c=e.type,s=void 0===c?"lower":c,u=e.variant,d={error:{background:"#d32f2f",text:"#fff",secondary:"#871b1b",icon:r.a.createElement(La.a,{style:{color:"#fff",paddingLeft:5,paddingRight:5},fontSize:"inherit"})},info:{background:"#2196f3",text:"#fff",secondary:"#1b4667",icon:r.a.createElement(La.a,{style:{color:"#fff",paddingLeft:5,paddingRight:5},fontSize:"inherit"})},warning:{background:"#ffc372",text:"#663c00",secondary:"#b68749",icon:r.a.createElement(Fa.a,{style:{color:"#663c00",paddingLeft:5,paddingRight:5},fontSize:"inherit"})},success:{background:"#8bc34a",text:"#fff",secondary:"#507129",icon:r.a.createElement(Ba.a,{style:{color:"#fff",paddingLeft:5,paddingRight:5},fontSize:"inherit"})}},m={upperRibon:{fontSize:25,alignItems:"center",display:"flex",backgroundColor:d[u].background,borderTopRightRadius:3,borderBottomRightRadius:3},smallRibbon:{width:0,height:0,backgroundColor:"transparent",borderStyle:"solid",borderWidth:5,borderColor:"transparent",borderTopColor:d[u].secondary,borderRightColor:d[u].secondary},text:{color:d[u].text,padding:5,fontSize:12,marginBottom:0,marginTop:0}};return r.a.createElement(M.a,{style:Object(h.a)({position:"absolute",zIndex:1,top:5,left:5},o)},"upper"===s?r.a.createElement(M.a,{style:Object(h.a)(Object(h.a)({},m.smallRibbon),{},{transform:"rotate(90deg)"})}):r.a.createElement(M.a,null),r.a.createElement(M.a,{style:m.upperRibon},null===(t=d[u])||void 0===t?void 0:t.icon,r.a.createElement(Se,{style:Object(h.a)(Object(h.a)({},m.text),l)},a)),"lower"===s?r.a.createElement(M.a,{style:Object(h.a)({},m.smallRibbon)}):r.a.createElement(M.a,null))},Na=a(395),Ka=a.n(Na),Va=a(479),Ga=a(206),qa=a(1431),Ja=a(1420),Ha=a(1411),Ya=a(1412),Za=a(1460),Xa=je.c().shape({type:je.d().required("Layer type is required!"),propertyType:je.d().required("Property Type is required!"),property:je.d().when("propertyType",{is:"image",then:je.d(),otherwise:je.d().required("Property of the layer is required!")}),placeholder:je.d().when("type",{is:"data",then:je.d().required("Placeholder is required!"),otherwise:je.d()}),layerName:je.d().required("Layer name is required!"),label:je.d().required("Field Label is required!"),maxLength:je.b().when("type",{is:"data",then:je.b().required("Max Length is required"),otherwise:je.b()}),width:je.b().when("type",{is:"image",then:je.b().required("Width of image is required"),otherwise:je.b()}),height:je.b().when("type",{is:"image",then:je.b().required("Height of image is required"),otherwise:je.b()})}),Qa=function(e){var t=e.textLayers,a=void 0===t?[]:t,n=e.onDataSubmit,o=e.initialValue,i=e.imageLayers,l=void 0===i?[]:i,c=e.templateType,s=void 0===c?"ae":c,u=e.editField,d=e.onClose,m=Object(Oe.a)({initialValues:o,validationSchema:Xa,onSubmit:function(e){var t=e.key,a=void 0===t?"":t,r=e.property,o=e.label,i=e.layerName,l=e.maxLength,c=e.placeholder,d=e.propertyType,m=e.required,p=e.type,v=e.extension,b=e.height,f=e.width;switch(p){case"data":n({key:u?a:Tt(),type:d,label:o,placeholder:c,constraints:"Source Text.text"===r?{required:m,maxLength:l}:{required:m},rendererData:{layerName:i,property:"ae"===s?r:"",type:p}});break;case"image":n({key:u?a:Tt(),type:d,label:o,constraints:"image"===d?{required:m,width:f,height:b}:{required:m},rendererData:"image"===d?{layerName:i,type:p,extension:"null"===v?"png":v||"png"}:{layerName:i,property:"ae"===s?r:"",type:p}});break;default:throw new Error}g(!1)}}),p=m.values,v=m.errors,b=m.touched,f=m.handleBlur,_=m.handleSubmit,h=(m.resetForm,m.handleChange),E=m.setFieldValue,g=function(e){d(e)};return r.a.createElement(le.a,{fullWidth:!0,open:!0,scroll:"paper",onClose:function(){return g(!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(Ja.a,{id:"form-dialog-title"},u?"Edit Field":"Add Field"),r.a.createElement(Ha.a,{dividers:!0},r.a.createElement(ue.a,{fullWidth:!0,margin:"dense",disabled:u,variant:"outlined",error:(null===b||void 0===b?void 0:b.type)&&!!(null===v||void 0===v?void 0:v.type)},r.a.createElement(de.a,{id:"demo-simple-select-outlined-label"},"Layer Type"),r.a.createElement(Ga.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onBlur:f,onChange:function(e){e.target.value&&E("propertyType","data"===e.target.value?"string":"image"===e.target.value?"image":""),h(e)},name:"type",value:null===p||void 0===p?void 0:p.type,placeholder:"Select Layer Type",label:"Layer Type"},[{label:"Text",value:"data"},{label:"Image",value:"image"}].map((function(e,t){return r.a.createElement(T.a,{key:t,disabled:(null===p||void 0===p?void 0:p.type)===e.value,value:e.value,children:e.label,selected:(null===p||void 0===p?void 0:p.type)===e.value})}))),r.a.createElement(ve.a,null,(null===b||void 0===b?void 0:b.type)&&(null===v||void 0===v?void 0:v.type))),r.a.createElement(Za.a,{value:null===p||void 0===p?void 0:p.layerName,onChange:function(e,t){t&&function(e){if(E("layerName",e),"data"===(null===p||void 0===p?void 0:p.type)){var t,n=a.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:e}));E("property","Source Text.text"),E("placeholder",(null===(t=a[n.indexOf(e)])||void 0===t?void 0:t.text)||"")}else{var r,o,i=l.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:e}));E("height",l[i.indexOf(e)].height||0),E("width",l[i.indexOf(e)].width||0),E("extension","null"===(null===(r=l[i.indexOf(e)])||void 0===r?void 0:r.extension)?"png":(null===(o=l[i.indexOf(e)])||void 0===o?void 0:o.extension)||"png")}}(t)},autoHighlight:!0,id:"controllable-states-demo",options:function(){switch(null===p||void 0===p?void 0:p.type){case"data":return a.length?a.map((function(e,t){var a;return null!==(a=null===e||void 0===e?void 0:e.name)&&void 0!==a?a:e})):[];case"image":return l.length?l.map((function(e,t){var a;return null!==(a=null===e||void 0===e?void 0:e.name)&&void 0!==a?a:e})):[];default:return[]}}(),renderInput:function(e){return r.a.createElement(se.a,Object.assign({margin:"dense"},e,{label:"Select Layer",variant:"outlined",error:!(!(null===b||void 0===b?void 0:b.layerName)||!(null===v||void 0===v?void 0:v.layerName)),helperText:(null===b||void 0===b?void 0:b.layerName)&&(null===v||void 0===v?void 0:v.layerName)?null===v||void 0===v?void 0:v.layerName:""}))}}),r.a.createElement(ue.a,{required:!0,style:{marginTop:8,marginBottom:8},component:"fieldset"},r.a.createElement(na.a,{component:"legend"},"Select Field Type"),r.a.createElement(ra.a,{"aria-label":"propertyType",name:"propertyType",row:!0,defaultValue:"string",value:null===p||void 0===p?void 0:p.propertyType,onChange:h},r.a.createElement(oa.a,{value:"string",disabled:"image"===(null===p||void 0===p?void 0:p.type),control:r.a.createElement(ia.a,null),label:"Text"}),r.a.createElement(oa.a,{value:"image",disabled:"data"===(null===p||void 0===p?void 0:p.type),control:r.a.createElement(ia.a,null),label:"Image"})),r.a.createElement(ve.a,{error:(null===b||void 0===b?void 0:b.propertyType)&&!!(null===v||void 0===v?void 0:v.propertyType)},(null===b||void 0===b?void 0:b.propertyType)&&(null===v||void 0===v?void 0:v.propertyType)?null===v||void 0===v?void 0:v.propertyType:"Field type describes, what you want to input from a user, Text for date and text, while image is for picture")),function(){var e=["scale","color"].concat({data:["Source Text.text","Source Text.font","Source Text.fontSize","Source Text.fillColor"],image:["opacity"]}[null===p||void 0===p?void 0:p.type]);return(null===p||void 0===p?void 0:p.type)&&(null===p||void 0===p?void 0:p.propertyType)&&"image"!==(null===p||void 0===p?void 0:p.propertyType)&&"string"!==(null===p||void 0===p?void 0:p.propertyType)&&"remotion"!==s?r.a.createElement(ue.a,{required:"image"!==(null===p||void 0===p?void 0:p.propertyType),fullWidth:!0,margin:"dense",variant:"outlined",error:(null===b||void 0===b?void 0:b.property)&&!!(null===v||void 0===v?void 0:v.property)},r.a.createElement(de.a,{id:"property-select"},"Select Property"),r.a.createElement(Ga.a,{labelId:"property-select",id:"property-select",onBlur:f,onChange:h,name:"property",value:p.property,placeholder:"Click to Pick Property",label:"Select Property"},e.map((function(e,t){return r.a.createElement(T.a,{key:e,id:e,value:e,children:e,selected:p.property===e})}))),r.a.createElement(ve.a,{error:(null===b||void 0===b?void 0:b.property)&&!!(null===v||void 0===v?void 0:v.property)},(null===b||void 0===b?void 0:b.property)&&(null===v||void 0===v?void 0:v.property)?null===v||void 0===v?void 0:v.property:"")):r.a.createElement("div",null)}(),function(){switch(null===p||void 0===p?void 0:p.type){case"data":return r.a.createElement("div",null,r.a.createElement(se.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"dense",value:null===p||void 0===p?void 0:p.label,name:"label",onBlur:f,onChange:h,error:(null===b||void 0===b?void 0:b.label)&&!!(null===v||void 0===v?void 0:v.label),helperText:(null===b||void 0===b?void 0:b.label)&&(null===v||void 0===v?void 0:v.label)?null===v||void 0===v?void 0:v.label:"",type:"text",label:"Field Title",placeholder:"Field Title"}),r.a.createElement(se.a,{required:"data"===(null===p||void 0===p?void 0:p.type),fullWidth:!0,variant:"outlined",margin:"dense",value:null===p||void 0===p?void 0:p.placeholder,name:"placeholder",onBlur:f,onChange:h,error:(null===b||void 0===b?void 0:b.placeholder)&&!!(null===v||void 0===v?void 0:v.placeholder),helperText:(null===b||void 0===b?void 0:b.placeholder)&&(null===v||void 0===v?void 0:v.placeholder)?null===v||void 0===v?void 0:v.placeholder:"",type:"text",label:"Field Placeholder",placeholder:"Enter Field Placeholder Text"}),"Source Text.text"===(null===p||void 0===p?void 0:p.property)&&r.a.createElement(r.a.Fragment,null,"   ",r.a.createElement(se.a,{fullWidth:!0,required:"data"===(null===p||void 0===p?void 0:p.type),variant:"outlined",margin:"dense",onBlur:f,onChange:h,value:null===p||void 0===p?void 0:p.maxLength,error:(null===b||void 0===b?void 0:b.maxLength)&&!!(null===v||void 0===v?void 0:v.maxLength),helperText:(null===b||void 0===b?void 0:b.maxLength)&&(null===v||void 0===v?void 0:v.maxLength)?null===v||void 0===v?void 0:v.maxLength:"",type:"number",name:"maxLength",label:"Max length",placeholder:"Max length"})),r.a.createElement("br",null),r.a.createElement(oa.a,{control:r.a.createElement(qa.a,{checked:null===p||void 0===p?void 0:p.required,onBlur:f,name:"required",onChange:h,color:"primary"}),label:"Required"}));case"image":return function(){var e,t;return r.a.createElement("div",null,r.a.createElement(se.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"dense",value:null===p||void 0===p?void 0:p.label,name:"label",onBlur:f,onChange:h,error:(null===b||void 0===b?void 0:b.label)&&!!(null===v||void 0===v?void 0:v.label),helperText:(null===b||void 0===b?void 0:b.label)&&(null===v||void 0===v?void 0:v.label)?null===v||void 0===v?void 0:v.label:"",type:"text",label:"Field Title",placeholder:"Field Title"}),"image"===(null===p||void 0===p?void 0:p.propertyType)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{required:"image"===(null===p||void 0===p?void 0:p.type),fullWidth:!0,variant:"outlined",margin:"dense",value:null!==(e=null===p||void 0===p?void 0:p.width)&&void 0!==e?e:0,name:"width",onBlur:f,onChange:h,error:(null===b||void 0===b?void 0:b.width)&&!!(null===v||void 0===v?void 0:v.width),helperText:(null===b||void 0===b?void 0:b.width)&&(null===v||void 0===v?void 0:v.width)?null===v||void 0===v?void 0:v.width:"",type:"number",label:"Image Width",placeholder:"Enter Width"}),r.a.createElement(se.a,{required:"image"===(null===p||void 0===p?void 0:p.type),fullWidth:!0,variant:"outlined",margin:"dense",value:null!==(t=null===p||void 0===p?void 0:p.height)&&void 0!==t?t:0,name:"height",onBlur:f,onChange:h,error:(null===b||void 0===b?void 0:b.height)&&!!(null===v||void 0===v?void 0:v.height),helperText:(null===b||void 0===b?void 0:b.height)&&(null===v||void 0===v?void 0:v.height)?null===v||void 0===v?void 0:v.height:"",type:"number",label:"Image Height",placeholder:"Enter Height"})),r.a.createElement("br",null),r.a.createElement(oa.a,{control:r.a.createElement(qa.a,{checked:null===p||void 0===p?void 0:p.required,onBlur:f,name:"required",onChange:h,color:"primary"}),label:"Required"}))}();default:return null}}()),r.a.createElement(Ya.a,null,r.a.createElement(be.a,{onClick:function(){return g(!1)},color:"primary"},"Cancel"),r.a.createElement(be.a,{variant:"contained",type:"submit",onClick:function(e){return _()},color:"primary",children:u?"Save":"Add"})))},$a=a(569),en=a(1441),tn=a(1442),an=a(104),nn=function(e){var t=e.mode,a=e.label,o=e.tags,i=(e.type,e.constraints),c=void 0===i?{}:i,s=e.onBlur,u=e.value,d=void 0===u?"":u,m=e.onChange,p=e.helperText,v=void 0===p?"":p,b=(e.onError,e.name),f=e.placeholder,_=e.rendererData,E=e.key,g=e.otherProps,y=void 0===g?{}:g,O=c.required,j=void 0!==O&&O,D=c.maxLength,k=_.layerName,S=Object(n.useState)(("form"===t?d:f)||""),x=Object(l.a)(S,2),C=x[0],T=x[1];return Object(n.useEffect)((function(){m&&m(b||E,C)}),[C]),r.a.createElement(M.a,{key:E,style:{display:"flex",flexDirection:"column"}},"preview"===t?r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},r.a.createElement(w.a,{style:{fontSize:12,height:20,alignSelf:"flex-start",marginRight:10,marginBottom:15},label:"Layer name \u2192 ".concat(k),size:"small"}),o||r.a.createElement("div",null)):r.a.createElement("div",null),r.a.createElement(se.a,Object.assign({label:a,style:{alignSelf:"flex-start"},required:j,value:"preview"===t?f:C,onBlur:function(e){s&&s(b||E,!0)},helperText:"form"===t?v:j?"* Field required":"",onChange:function(e){var t;T((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"")},placeholder:f,inputProps:Object(h.a)({},D?{maxLength:D}:{}),InputProps:Object(h.a)(Object(h.a)({},"preview"===t?{readOnly:!0}:{}),{},{endAdornment:r.a.createElement(xe,{color:"textSecondary"},"".concat(C.length,"/").concat(D))})},y)))},rn=a(658),on=a.n(rn);function ln(e){return r.a.createElement(M.a,{position:"relative",display:"inline-flex"},r.a.createElement(fe.a,Object.assign({variant:"determinate"},e)),r.a.createElement(M.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(we,{color:"textSecondary"},"".concat(Math.round(e.value),"%"))))}var cn=function(e){var t=e.mode,a=e.label,o=e.tags,i=(e.type,e.onError),c=e.constraints,s=void 0===c?{}:c,u=e.onBlur,d=e.value,m=void 0===d?"":d,p=e.helperText,v=e.onChange,b=e.name,_=(e.placeholder,e.rendererData),h=e.key,E=(e.otherProps,s.required),g=void 0!==E&&E,y=s.width,O=s.height,j=(Object(f.b)().user,Object(n.useState)("")),D=Object(l.a)(j,2),k=D[0],S=D[1],x=Object(n.useState)(null),C=Object(l.a)(x,2),T=C[0],P=C[1],A=Object(n.useState)(0),R=Object(l.a)(A,2),I=R[0],L=R[1],U=Object(n.useState)(!1),B=Object(l.a)(U,2),z=B[0],F=B[1],W=Object(n.useState)(null),N=Object(l.a)(W,2),K=(N[0],N[1]),V=_.layerName,G=_.extension,q=Object(n.useState)("form"===t?m:""),J=Object(l.a)(q,2),H=J[0],Y=J[1],Z=function(e){u&&u(b||h,!0)},X=function(){var e=Object(oe.a)(re.a.mark((function e(a){var n,r,o,l,c,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(null),i&&i(b||h,""),c=(null!==(n=null===a||void 0===a||null===(r=a.target)||void 0===r?void 0:r.files)&&void 0!==n?n:[null])[0]||(null!==(o=null===a||void 0===a||null===(l=a.dataTransfer)||void 0===l?void 0:l.files)&&void 0!==o?o:[null])[0]){e.next=5;break}return e.abrupt("return");case 5:if(S(c.name),s=c.name.split(".").pop()||"",console.log(s,G),s===G){e.next=12;break}return Z(),i?i(b||h,"Image required in ".concat(G," format")):P(new Error("Image required in ".concat(G," format"))),e.abrupt("return");case 12:if("preview"!==t){e.next=15;break}return Y(URL.createObjectURL(c)),e.abrupt("return");case 15:return e.next=17,Q(c,s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),n=Object(Dt.a)("jobData/".concat(Date.now(),".").concat(a),t,"deleteAfter90Days"),K(n),n.on("httpUploadProgress",(function(e){var t=e.loaded,a=e.total;return L(Math.floor(t/a*100))})),e.next=7,n.promise();case 7:r=e.sent,o=(o=r.Location).startsWith("http")?o:"https://".concat(o),F(!1),Y(o),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),Z(),K(null),F(!1),i?i(b||h,e.t0.message):P(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){H&&(H.split(".").pop()===G||k.split(".").pop()===G?(v&&v(b||h,H),Z()):(i?i(b||h,"Image required in ".concat(G," format")):P(new Error("Image required in ".concat(G," format"))),v&&v(b||h,"")))}),[H]),r.a.createElement(M.a,{key:h},"preview"===t?r.a.createElement(M.a,null,r.a.createElement(w.a,{style:{fontSize:12,height:20,alignSelf:"flex-start",marginRight:10,marginBottom:15},label:"Layer name \u2192 ".concat(V),size:"small"}),o||r.a.createElement("div",null)):r.a.createElement("div",null),r.a.createElement("input",{type:"file",accept:".".concat(G),id:h||b||a,onChange:X,style:{display:"none"}}),r.a.createElement(Zt.a,{variant:"outlined",style:{borderRadius:5,padding:H?0:10,display:"flex",width:110,height:110,alignItems:"center",justifyContent:"center"}},z?r.a.createElement(ln,{value:I}):H?r.a.createElement("img",{height:"100%",width:"100%",src:H}):r.a.createElement(M.a,{style:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center"}},r.a.createElement(we,null,a,g?"*":"","".concat("preview"===t?" (".concat(G,")"):"")),r.a.createElement(on.a,{fontSize:"large"}),"preview"==t?r.a.createElement(we,{color:"textPrimary"},y," x ",O):r.a.createElement("div",null))),r.a.createElement(ve.a,{error:!!T},T?null===T||void 0===T?void 0:T.message:"preview"===t?g?"* Required Field":"":p),"preview"===t?r.a.createElement("div",null):r.a.createElement("label",{htmlFor:h||b||a},r.a.createElement(be.a,{style:{marginTop:15,alignSelf:"center"},size:"small",component:"span",disabled:z,startIcon:r.a.createElement(jt.a,{color:"inherit",fontSize:"small"}),children:H?"Change":"Upload",color:"primary",variant:"outlined"})))},sn=r.a.memo((function(e){var t,a,o,i,c,s,u,d,m,p,v,b,f,_,E,g,y,O,j,D,k,S,x,C,P,A,R,I,U,B,F,W,N,K,V,G,q,J,H,Y,Z,X,Q,$=e.compositions,ee=(e.editVersion,e.activeVersionIndex),te=Object(n.useContext)(ea),ae=Object(l.a)(te,1)[0],ne=aa(),re=ne.updateField,oe=ne.addField,ie=ne.removeField,le=ne.restoreFieldsFromPreviousVersion,ce=(ne.restoreChanges,ne.swapFields),ue=Object(n.useState)([]),de=Object(l.a)(ue,2),me=de[0],pe=de[1],ve=Object(n.useState)(null),fe=Object(l.a)(ve,2),_e=fe[0],he=fe[1],Ee=Object(n.useState)(!1),ge=Object(l.a)(Ee,2),ye=ge[0],Oe=ge[1],je=Object(n.useState)(!1),De=Object(l.a)(je,2),ke=(De[0],De[1],null===(t=ae.versions[ee])||void 0===t||null===(a=t.fields)||void 0===a?void 0:a.map((function(e){var t=e.rendererData;return t.layerName+t.property}))),xe=Object(n.useState)(null),we=Object(l.a)(xe,2),Ce=we[0],Te=we[1];Object(n.useEffect)((function(){var e,t=Ct($[ae.versions[ee].composition],void 0,null!==(e=null===ae||void 0===ae?void 0:ae.type)&&void 0!==e?e:"ae");Q=Object.keys(t).map((function(e){return t[e].map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:e}))})).flat(),pe(Q)}),[]);var Pe=function(e,t){return r.a.createElement(an.Draggable,{key:e.key,draggableId:e.key,index:t},(function(a,n){var o,i,l,c,s,u,d,m;return r.a.createElement(un,{provided:a,style:(u=n.isDragging,d=a.draggableProps.style,m=dn.fieldPreview,Object(h.a)(Object(h.a)(Object(h.a)({},u?{background:"#e4f5fa",border:"2px solid #4894fa"}:{}),m),d)),editField:function(){return function(e){he(e),Oe(!0)}(t)},deleteField:function(){return function(e,t){ie(ee,t)}(0,t)},index:t,children:r.a.createElement(M.a,{style:{display:"flex",position:"relative"}},"data"===(null===e||void 0===e||null===(o=e.rendererData)||void 0===o?void 0:o.type)?r.a.createElement(nn,Object.assign({tags:r.a.createElement(r.a.Fragment,null,me.includes(null!==(i=null===e||void 0===e||null===(l=e.rendererData)||void 0===l?void 0:l.layerName)&&void 0!==i?i:"")?r.a.createElement("div",null):r.a.createElement(w.a,{color:"primary",style:{fontSize:12,height:20,alignSelf:"flex-start",background:"#d32f2f",color:"#fff",marginRight:10,marginBottom:15},label:"Field not found in this compostion!",size:"small"}),1!==ke.filter((function(t){var a,n;return t===(null===e||void 0===e||null===(a=e.rendererData)||void 0===a?void 0:a.layerName)+(null===e||void 0===e||null===(n=e.rendererData)||void 0===n?void 0:n.property)})).length?r.a.createElement(w.a,{color:"primary",style:{fontSize:12,height:20,alignSelf:"flex-start",backgroundColor:"#ffc372",color:"#663c00",marginRight:10,marginBottom:15},label:"Duplicate Field!",size:"small"}):r.a.createElement("div",null)),otherProps:{variant:"outlined"},name:e.key},e,{mode:"preview"})):r.a.createElement(cn,Object.assign({tags:r.a.createElement(r.a.Fragment,null,me.includes(null!==(c=null===e||void 0===e||null===(s=e.rendererData)||void 0===s?void 0:s.layerName)&&void 0!==c?c:"")?r.a.createElement("div",null):r.a.createElement(w.a,{color:"primary",style:{fontSize:12,height:20,alignSelf:"flex-start",background:"#d32f2f",color:"#fff",marginRight:10,marginBottom:15},label:"Field not found in this compostion!",size:"small"}),1!==ke.filter((function(t){var a,n;return t===(null===e||void 0===e||null===(a=e.rendererData)||void 0===a?void 0:a.layerName)+(null===e||void 0===e||null===(n=e.rendererData)||void 0===n?void 0:n.property)})).length?r.a.createElement(w.a,{color:"primary",style:{fontSize:12,height:20,alignSelf:"flex-start",backgroundColor:"#ffc372",color:"#663c00",marginRight:10,marginBottom:15},label:"Duplicate Field!",size:"small"}):r.a.createElement("div",null)),mode:"preview",name:e.key},e)))})}))};return r.a.createElement(M.a,{style:dn.container},r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",marginBottom:10,flexWrap:"wrap"}},r.a.createElement($a.a,{title:"Adds Field to version"},r.a.createElement(be.a,{style:{marginBottom:10},endIcon:r.a.createElement(Aa.a,null),size:"small",variant:"contained",color:"primary",onClick:function(){he(null),Oe(!0)},children:"Add Field"})),(null!==(o=null===ae||void 0===ae||null===(i=ae.versions)||void 0===i?void 0:i.length)&&void 0!==o?o:1)-1!==0?r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{style:{margin:10,marginTop:0},color:"textSecondary"},"Or"),r.a.createElement(se.a,{select:!0,style:{maxWidth:320,marginTop:0,marginBottom:10},label:"Import Common fields from other version",placeholder:"Select Version",margin:"dense",onChange:function(e){return Te(parseInt(e.target.value))},fullWidth:!0,size:"small",InputProps:{startAdornment:r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},r.a.createElement(be.a,{disabled:null==Ce,color:"primary",size:"small",children:"import",onClick:function(){return le(Ce,ee,me.length?me:Q)}}),r.a.createElement(L.a,{style:{height:28,margin:4},orientation:"vertical"}))},variant:"outlined",value:Ce},ae.versions.slice(0,ae.versions.length-1).map((function(e,t){return r.a.createElement(T.a,{key:e.title,value:t},e.title)})))):r.a.createElement("div",null)),r.a.createElement(Se,{style:{fontWeight:700}},"Field Previews"),(null===(c=ae.versions[ee])||void 0===c?void 0:c.fields.length)?r.a.createElement(z.a,null,r.a.createElement(an.DragDropContext,{onDragEnd:function(e){e.destination&&ce(ee,e.source.index,e.destination.index)}},r.a.createElement(an.Droppable,{droppableId:"droppable"},(function(e,t){var a,n,o;return r.a.createElement("div",{style:(o=t.isDraggingOver,Object(h.a)(Object(h.a)({},o?{background:"#fbe3e7"}:{}),{},{padding:8,maxWidth:600})),ref:e.innerRef},null===(a=ae.versions[ee])||void 0===a||null===(n=a.fields)||void 0===n?void 0:n.map(Pe),e.placeholder)})))):r.a.createElement(Se,{style:{marginTop:10},color:"textSecondary"},"No Fields added yet!"),ye?r.a.createElement(Qa,{templateType:null!==(s=null===ae||void 0===ae?void 0:ae.type)&&void 0!==s?s:"ae",textLayers:Ct($[null===ae||void 0===ae||null===(u=ae.versions[ee])||void 0===u?void 0:u.composition],"textLayers",null!==(d=null===ae||void 0===ae?void 0:ae.type)&&void 0!==d?d:"ae"),imageLayers:Ct($[null===ae||void 0===ae||null===(m=ae.versions[ee])||void 0===m?void 0:m.composition],"imageLayers",null!==(p=null===ae||void 0===ae?void 0:ae.type)&&void 0!==p?p:"ae"),initialValue:{key:null!==_e?null===(v=ae.versions[ee])||void 0===v||null===(b=v.fields[_e])||void 0===b?void 0:b.key:"",property:null!==_e?null===(f=ae.versions[ee])||void 0===f||null===(_=f.fields[_e])||void 0===_||null===(E=_.rendererData)||void 0===E?void 0:E.property:"",propertyType:null!==_e?null===(g=ae.versions[ee])||void 0===g||null===(y=g.fields[_e])||void 0===y?void 0:y.type:"",placeholder:null!==_e?null===(O=ae.versions[ee])||void 0===O||null===(j=O.fields[_e])||void 0===j?void 0:j.placeholder:"",type:null!==_e?null===(D=ae.versions[ee])||void 0===D||null===(k=D.fields[_e])||void 0===k||null===(S=k.rendererData)||void 0===S?void 0:S.type:"",layerName:null!==_e?null===(x=ae.versions[ee])||void 0===x||null===(C=x.fields[_e])||void 0===C||null===(P=C.rendererData)||void 0===P?void 0:P.layerName:"",label:null!==_e?null===(A=ae.versions[ee])||void 0===A||null===(R=A.fields[_e])||void 0===R?void 0:R.label:"",required:null!==_e&&(null===(I=ae.versions[ee])||void 0===I||null===(U=I.fields[_e])||void 0===U||null===(B=U.constraints)||void 0===B?void 0:B.required),width:null!==_e?null===(F=ae.versions[ee])||void 0===F||null===(W=F.fields[_e])||void 0===W||null===(N=W.constraints)||void 0===N?void 0:N.width:400,extension:null!==_e?null===(K=ae.versions[ee])||void 0===K||null===(V=K.fields[_e])||void 0===V||null===(G=V.rendererData)||void 0===G?void 0:G.extension:"png",height:null!==_e?null===(q=ae.versions[ee])||void 0===q||null===(J=q.fields[_e])||void 0===J||null===(H=J.constraints)||void 0===H?void 0:H.height:400,maxLength:null!==_e?null===(Y=ae.versions[ee])||void 0===Y||null===(Z=Y.fields[_e])||void 0===Z||null===(X=Z.constraints)||void 0===X?void 0:X.maxLength:50},editField:null!==_e,onClose:Oe,onDataSubmit:null!==_e?function(e){re(ee,_e,e),he(null)}:function(e){oe(ee,e)}}):r.a.createElement("div",null))}),(function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),un=function(e){var t=e.editField,a=e.deleteField,n=(e.ref,e.index,e.provided),o=e.children,i=e.style,l=Object(_t.a)(e,["editField","deleteField","ref","index","provided","children","style"]);return r.a.createElement(Zt.a,Object.assign({variant:"outlined"},l,{ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:i}),r.a.createElement(F.a,null,r.a.createElement(N.a,null,o),r.a.createElement(sa.a,null,r.a.createElement(B.a,{edge:"end",onClick:t,"aria-label":"edit"},r.a.createElement(en.a,null)),r.a.createElement(B.a,{onClick:a,edge:"end","aria-label":"delete"},r.a.createElement(tn.a,null)))))},dn={container:{marginTop:10,marginBottom:10,padding:15},fieldPreview:{margin:10}},mn=function(e){var t=e.activeVersionIndex,a=e.editVersion,n=e.compositions,o=e.onSubmit,i=e.onBack;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement(sn,{compositions:n,editVersion:a,activeVersionIndex:t}),r.a.createElement("div",null,r.a.createElement(be.a,{onClick:function(){return i()},size:"small",style:{width:"fit-content",marginTop:10},children:"back"}),r.a.createElement(be.a,{style:{marginTop:10},color:"primary",variant:"contained",onClick:function(){return o()},children:"Next"})))},pn=je.c().shape({title:je.d().min(3,"Lenght Too Short!").max(80,"Length Too Long!").required("Version title is required!"),description:je.d().max(200,"Lenght Too Long!")}),vn=function(e){var t=e.onSubmit,a=e.initialValue,n=e.onBack,o=Object(Oe.a)({initialValues:a,validationSchema:pn,onSubmit:t}),i=o.values,l=o.errors,c=o.touched,s=o.handleBlur,u=o.handleSubmit,d=o.handleChange;return r.a.createElement("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(se.a,{required:!0,variant:"outlined",name:"title",value:i.title,onBlur:s,onChange:d,error:c.title&&l.title,helperText:c.title&&l.title,type:"text",margin:"dense",placeholder:"Enter Version Title",label:"Version Title"}),r.a.createElement(se.a,{variant:"outlined",name:"description",value:i.description,onBlur:s,onChange:d,error:c.description&&l.description,helperText:c.description&&l.description,type:"text",multiline:!0,rows:3,margin:"dense",placeholder:"Enter Version Description",label:"Version Description"}),r.a.createElement("div",null,r.a.createElement(be.a,{onClick:function(){return n()},size:"small",style:{width:"fit-content",marginTop:10},children:"back"}),r.a.createElement(be.a,{size:"small",style:{width:"fit-content",marginTop:10},color:"primary",variant:"contained",type:"submit",children:"Next"})))},bn=a(1429),fn=function(e){var t=e.activeStep,a=e.editVersion,n=e.renderStep,o=["".concat(a?"Edit":"Add"," Version"),"".concat(a?"Edit":"Add"," Version Meta"),"".concat(a?"Edit":"Add"," Fields"),"".concat(a?"Edit":"Add"," Sample Video")];return r.a.createElement(wa.a,{activeStep:t,orientation:"vertical"},o.map((function(e){return r.a.createElement(xa.a,{key:e},r.a.createElement(Ca.a,null,e),r.a.createElement(bn.a,null,n(t)))})))},_n=function(e){var t=e.composition,a=e.setComposition,n=e.compositions,o=e.openVersionMeta;return r.a.createElement("form",{style:{display:"flex",alignItems:"center"},onSubmit:function(e){e.preventDefault()}},r.a.createElement(ue.a,{style:{width:400},margin:"dense",variant:"outlined"},r.a.createElement(de.a,{id:"demo-simple-select-outlined-label"},"Select Composition"),r.a.createElement(Ga.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){return a(e.target.value)},value:t,placeholder:"Select Composition",label:"Select Composition"},0===Object.keys(n).length&&r.a.createElement(T.a,{disabled:!0},"No Compositions Found:("),Object.keys(n).map((function(e,t){return r.a.createElement(T.a,{key:t,id:t,value:e},e)})))),r.a.createElement(be.a,{style:{marginLeft:10},color:"primary",variant:"outlined",onClick:function(){return o()},disabled:""===t,children:t?"Next":"Add"}))},hn=function(e){var t,a=e.isEdit,o=e.activeVersionIndex,i=e.editVersion,c=e.setActiveVersionIndex,s=e.openVersionDisplay,u=e.onBack,d=Object(n.useState)(null),m=Object(l.a)(d,2),p=m[0],v=m[1],b=Object(n.useContext)(ea),f=Object(l.a)(b,1)[0],_=aa().editversionKeys;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement(Da.a,{uploadDirectory:"samples",name:"sample"+Math.random(),value:null===f||void 0===f||null===(t=f.versions[o])||void 0===t?void 0:t.sample,onError:function(e){return v(e.message)},onChange:function(e){return _(o,{sample:e})},label:"Version Sample Video",onTouched:function(){return v(null)},error:p,accept:"video/*",helperText:"Sample Video of your template should be specific to version you are creating."}),r.a.createElement("div",null,r.a.createElement(be.a,{onClick:function(){return u()},size:"small",style:{width:"fit-content",marginTop:10},children:"back"}),r.a.createElement(be.a,{style:{marginTop:10},color:"primary",variant:"contained",type:"submit",onClick:function(){i||c(o+1),s()},children:a||i?"Save Edits":"Create Version"})))},En=Object(E.a)((function(e){return Object(g.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})})),gn=r.a.forwardRef((function(e,t){return r.a.createElement(Va.a,Object.assign({direction:"up",ref:t},e))})),yn=function(e){var t,a=e.handleClose,o=e.isEdit,i=e.compositions,c=e.editIndex,s=e.onDone,u=En(),d=Object(n.useContext)(ea),m=Object(l.a)(d,1)[0],p=Object(n.useState)(o?null===(t=m.versions[c])||void 0===t?void 0:t.composition:""),v=Object(l.a)(p,2),b=v[0],f=v[1],_=aa().editversionKeys,h=Object(n.useState)(0),E=Object(l.a)(h,2),g=E[0],y=E[1],O=Object(n.useState)(o?1:0),j=Object(l.a)(O,2),D=j[0],k=j[1],S=function(){a()};Object(n.useEffect)((function(){y(m.versions.length)}),[g]);var x=function(){_(o?c:g,{composition:b}),k(D+1)};return r.a.createElement(le.a,{fullScreen:!0,open:!0,onClose:S,TransitionComponent:gn},r.a.createElement(A.a,{className:u.appBar},r.a.createElement(V.a,null,r.a.createElement(B.a,{edge:"start",color:"inherit",onClick:S,"aria-label":"close"},r.a.createElement(Ka.a,null)),r.a.createElement(ke,{className:u.title},o?"Update Version":"Add Version"))),r.a.createElement(fn,{editVersion:o,activeStep:D,renderStep:function(e){var t,a;switch(e){case 0:return r.a.createElement(_n,{composition:b,setComposition:f,compositions:i,openVersionMeta:x});case 1:return r.a.createElement(vn,{onBack:function(){var t;f(null===m||void 0===m||null===(t=m.versions[o?c:g])||void 0===t?void 0:t.composition),k(e-1)},onSubmit:function(t){_(o?c:g,{title:t.title,description:t.description}),k(e+1)},initialValue:{title:null===m||void 0===m||null===(t=m.versions[o?c:g])||void 0===t?void 0:t.title,description:null===m||void 0===m||null===(a=m.versions[o?c:g])||void 0===a?void 0:a.description}});case 2:return r.a.createElement(mn,{onBack:function(){return k(e-1)},editVersion:o,compositions:i,activeVersionIndex:o?c:g,onSubmit:function(){return k(e+1)}});case 3:return r.a.createElement(hn,{onBack:function(){return k(e-1)},isEdit:o,editVersion:o,activeVersionIndex:o?c:g,setActiveVersionIndex:y,openVersionDisplay:s});default:return}}}))},On=function(e){e.isEdit;var t,a,o,i,c=e.isSubmitting,s=e.handleSubmitForm,u=e.submitError,d=e.compositions,m=e.activeDisplayIndex,p=e.setActiveDisplayIndex,v=Object(n.useContext)(ea),b=Object(l.a)(v,1)[0],f=Object(n.useState)(0),_=Object(l.a)(f,2),h=_[0],E=_[1],g=Object(n.useState)(null),y=Object(l.a)(g,2),O=y[0],j=y[1],D=r.a.useState(""),k=Object(l.a)(D,2),S=k[0],x=k[1],w=function(){x("add")},C=aa().removeVersion,T=Object(n.useState)(null===b||void 0===b||null===(t=b.versions)||void 0===t?void 0:t.map((function(e){var t,a=e.fields,n=e.composition,r=Ct(d[n],void 0,(null===b||void 0===b?void 0:b.type)||"ae"),o=null===(t=Object.keys(r))||void 0===t?void 0:t.flatMap((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:e}))}));return null===a||void 0===a?void 0:a.map((function(e){var t=e.rendererData;return null===t||void 0===t?void 0:t.layerName})).every((function(e){return o.includes(e)}))}))),P=Object(l.a)(T,2),A=P[0],R=P[1],I=Object(n.useState)(null===b||void 0===b||null===(a=b.versions)||void 0===a?void 0:a.map((function(e){var t,a=e.fields,n=null===a||void 0===a?void 0:a.map((function(e){var t=e.rendererData;return t.layerName+t.property}));return(null===(t=new Set(n))||void 0===t?void 0:t.size)!==n.length}))),L=Object(l.a)(I,2),U=L[0],z=L[1];Object(n.useEffect)((function(){var e,t;R(null===b||void 0===b||null===(e=b.versions)||void 0===e?void 0:e.map((function(e){var t,a,n=e.fields,r=e.composition,o=Ct(d[r],void 0,null!==(t=null===b||void 0===b?void 0:b.type)&&void 0!==t?t:"ae"),i=null===(a=Object.keys(o))||void 0===a?void 0:a.flatMap((function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:e}))}));return null===n||void 0===n?void 0:n.map((function(e){return e.rendererData.layerName})).every((function(e){return i.includes(e)}))}))),z(null===b||void 0===b||null===(t=b.versions)||void 0===t?void 0:t.map((function(e){var t,a=e.fields,n=null===a||void 0===a?void 0:a.map((function(e){var t=e.rendererData;return t.layerName+t.property}));return(null===(t=new Set(n))||void 0===t?void 0:t.size)!==n.length})))}),[b]),Object(n.useEffect)((function(){E(b.versions.length)}),[b]);var F=function(){x(""),j(null)};return r.a.createElement(M.a,null,r.a.createElement(M.a,{style:{marginBottom:10,display:"flex",alignItems:"center"}},r.a.createElement(ke,null,"Versions"),b.versions.length?r.a.createElement(be.a,{style:{margin:10},endIcon:r.a.createElement(Aa.a,null),size:"small",variant:"contained",color:"primary",onClick:w,children:"Add Version"}):r.a.createElement("div",null)),r.a.createElement(M.a,{style:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:15,paddingLeft:0}},b.versions.length?null===b||void 0===b||null===(o=b.versions)||void 0===o?void 0:o.map((function(e,t){var a,n,o=null===e||void 0===e||null===(a=e.fields)||void 0===a?void 0:a.filter((function(e){return"image"===e.type})).length,i=null===e||void 0===e||null===(n=e.fields)||void 0===n?void 0:n.filter((function(e){var t=e.type;return"string"===t||"data"===t})).length;return t===h||t===O?r.a.createElement("div",null):r.a.createElement(Zt.a,{key:null===e||void 0===e?void 0:e.title,style:{maxWidth:345,position:"relative",overflow:"visible",marginRight:20,marginBottom:20}},!A[t]&&r.a.createElement(Wa,{variant:"error",text:"Some fields not found in this composition!",type:"lower",style:{left:-10,top:-5}}),U[t]&&r.a.createElement(Wa,{variant:"warning",text:"Contains Duplicate Fields!",type:"lower",style:{left:-10,top:35}}),r.a.createElement("video",{height:150,controls:!0,width:"100%",style:{backgroundColor:"#000"},poster:null===b||void 0===b?void 0:b.thumbnail,src:null===e||void 0===e?void 0:e.sample}),r.a.createElement(Xt.a,null,r.a.createElement(Se,{style:{fontWeight:600}},e.title),r.a.createElement(xe,{color:"textSecondary"},"Contains ",i," Text fields and ",o," Image fields")),r.a.createElement(Pa.a,{disableSpacing:!0},r.a.createElement(B.a,{style:{marginLeft:"auto"},onClick:function(){return function(e){j(e),x("edit")}(t)},"aria-label":"Edit this version ".concat(e.title)},r.a.createElement(Ma.a,null))))})):r.a.createElement(Zt.a,{variant:"outlined",style:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"center",height:200}},r.a.createElement(Se,{color:"textSecondary"},"No Version Added Yet."),r.a.createElement(be.a,{style:{marginLeft:20},endIcon:r.a.createElement(Aa.a,null),size:"small",variant:"contained",color:"primary",onClick:w,children:"Add Version"}))),S?r.a.createElement(yn,{editIndex:O,compositions:d,onDone:F,handleClose:function(){"edit"===S||C(h),F()},isEdit:"edit"===S}):r.a.createElement("div",null),r.a.createElement(M.a,{display:"flex",justifyContent:"space-between",mt:4},r.a.createElement(be.a,{startIcon:r.a.createElement(Oa.a,null),color:"primary",variant:"outlined",onClick:function(){return p(m-1)}},"Back"),"ae"===(null!==(i=null===b||void 0===b?void 0:b.type)&&void 0!==i?i:"ae")?r.a.createElement(be.a,{disabled:0===b.versions.length||!!S||!(null===A||void 0===A?void 0:A.every((function(e){return e})))||!(null===U||void 0===U?void 0:U.every((function(e){return!e}))),endIcon:r.a.createElement(ja.a,null),color:"primary",variant:"contained",onClick:function(){p(m+1)}},"Next"):r.a.createElement(be.a,{endIcon:c&&r.a.createElement(fe.a,{color:"inherit",size:15}),disabled:c,style:{margin:10},color:u?"secondary":"primary",variant:u?"outlined":"contained",children:u?"Retry":c?"Submitting":"Submit",onClick:function(){return s(b)}})))},jn=a(394),Dn=a.n(jn),kn=a(468),Sn=a.n(kn),xn=Object(E.a)((function(e){return Object(g.a)({content:{border:" dashed #ccc",flexDirection:"column",display:"flex",minHeight:"10rem",borderRadius:"0.2rem",alignItems:"center",padding:e.spacing(2),textAlign:"center",justifyContent:"center"},label:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},spacedText:{marginTop:e.spacing(3),marginBottom:e.spacing(1)},invisible:{opacity:0,height:0,width:0}})})),wn=function(e){var t,a,o=e.value,i=e.compositions,c=e.assets,s=e.isEdit,u=e.placeholder,d=e.onData,m=e.name,p=e.templateType,v=(e.onTouched,e.onError),b=xn(),_=Object(f.b)().user,h=Object(n.useState)(o),E=Object(l.a)(h,2),g=E[0],y=E[1],O=Object(n.useState)(""),j=Object(l.a)(O,2),D=j[0],k=j[1],S=Object(n.useState)(!1),x=Object(l.a)(S,2),w=x[0],C=x[1],T=Object(n.useState)(null),P=Object(l.a)(T,2),A=P[0],R=P[1],I=Object(n.useState)(!1),L=Object(l.a)(I,2),U=L[0],B=L[1],z=Object(n.useState)(s),F=Object(l.a)(z,2),W=F[0],N=(F[1],Object(n.useState)("file")),K=Object(l.a)(N,2),V=K[0],G=K[1],q=Object(n.useState)(!!o),J=Object(l.a)(q,2),H=J[0],Y=J[1],Z=Object(n.useState)(s?0!==i.length:!!o),X=Object(l.a)(Z,2),Q=X[0],$=X[1],ee=Object(n.useState)(!Q),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],ie=Object(n.useState)(0===i.length?null:De(i,p)),le=Object(l.a)(ie,2),ce=le[0],de=le[1],me=Object(n.useRef)(null),pe=Object(n.useState)(null),_e=Object(l.a)(pe,2),he=_e[0],Ee=_e[1],ge=function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(!0),e.next=4,ze(p);case 4:(t=e.sent)?k(t):(R(new Error("No Extraction Server URL Found!")),ne(!1)),ne(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),R(e.t0),ne(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Q||ge()}),[]),Object(n.useEffect)((function(){W&&g&&!ae&&!A?0===i.length?(G("file"),Oe()):d({compositions:i,staticAssets:c,fileUrl:g}):g&&!W&&d({compositions:i,staticAssets:c,fileUrl:g})}),[W,ae,A]);var ye=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),C(!1),(n=Object(Dt.a)("".concat(null!==(a=null===_||void 0===_?void 0:_.uid)&&void 0!==a?a:"users","/templates/").concat(Date.now(),".").concat(t.name.split(".").pop()),t)).on("httpUploadProgress",(function(e){var t=e.loaded,a=e.total;return de("".concat(Math.floor(t/a*100),"% uploaded"))})),e.next=7,n.promise();case 7:return r=e.sent,o=r.Location,B(!1),e.abrupt("return",o.startsWith("http")?o:"https://".concat(o));case 13:return e.prev=13,e.t0=e.catch(0),B(!1),C(!0),e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n,r,o,i,l,c,s,u,m,b,f,_,h;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),t&&t.stopPropagation(),de(null),Ee(null),Y(!0),$(!1),n=null,r="",e.prev=8,g){e.next=55;break}if(s=(null!==(o=null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.files)&&void 0!==o?o:[null])[0]||(null!==(l=null===t||void 0===t||null===(c=t.dataTransfer)||void 0===c?void 0:c.files)&&void 0!==l?l:[null])[0]){e.next=13;break}return e.abrupt("return");case 13:if("remotion"!==p||"zip"===s.name.split(".").pop()){e.next=18;break}return Y(!1),$(!1),v("Invalid file, Remotion project zip file required!"),e.abrupt("return");case 18:if("remotion"!==p){e.next=43;break}return e.next=21,Sn.a.loadAsync(s);case 21:if(n=e.sent,!Object.keys(n.files).toString().includes("node_modules")){e.next=28;break}return Y(!1),$(!1),v("Remove node_modules folder from the zip and try again!"),e.abrupt("return");case 28:return e.prev=28,e.next=31,null===(u=n)||void 0===u||null===(m=u.file("buzzle.config.json"))||void 0===m?void 0:m.async("text");case 31:n=e.sent,n=JSON.parse(n),e.next=43;break;case 35:return e.prev=35,e.t0=e.catch(28),n=null,console.log(e.t0),Y(!1),$(!1),v("buzzle.config.json file not found, Please upload zip file with the same"),e.abrupt("return");case 43:return de("Processing..."),e.next=46,ye(s);case 46:if(r=e.sent){e.next=52;break}return Y(!1),$(!1),v("Failed to upload file, Try again"),e.abrupt("return");case 52:y(r),e.next=56;break;case 55:r=g;case 56:return de("Extracting Layer and compositions ..."),e.next=59,Pt(D,r||g,p);case 59:b=e.sent,f=b.compositions,_=b.staticAssets,h=b.url,f?($(!0),de(De(f,p)),$(!0),d({compositions:f,staticAssets:_.map((function(e){return{name:da.a.basename(e),type:"static",src:""}})),fileUrl:h})):Ee(new Error("Could not extract project structure.")),e.next=71;break;case 66:e.prev=66,e.t1=e.catch(8),Y(!1),$(!1),Ee(e.t1);case 71:case"end":return e.stop()}}),e,null,[[8,66],[28,35]])})));return function(t,a){return e.apply(this,arguments)}}(),je=function(e){e&&e.preventDefault(),Ee(null),Y(!1),$(!1),de(""),y("")};function De(e,t){if("ae"!==t){for(var a,n,r,o=null===(a=Object.keys(e))||void 0===a||null===(n=a.map((function(t){var a,n;return null!==(a=null===(n=e[t])||void 0===n?void 0:n.fields)&&void 0!==a?a:[]})))||void 0===n?void 0:n.flat(),i=[],l=0;l<o.length;l++){var c=o[l];i.includes(c)||i.push(c)}return"".concat(null===(r=Object.keys(e))||void 0===r?void 0:r.length," Compositions & ").concat(null===i||void 0===i?void 0:i.length," Input Fields Found")}try{var s=Object.values(e).map((function(e){var a=Ct(e,void 0,t||"ae"),n=a.textLayers,r=a.imageLayers;return[].concat(Object(Qt.a)(n),Object(Qt.a)(r))})).flat();return"".concat(Object.keys(e).length," compositions & ").concat(s.length," layers found")}catch(d){var u;v(null===(u=d)||void 0===u?void 0:u.message)}}var ke={url:r.a.createElement(M.a,null,r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},r.a.createElement(se.a,{disabled:ae||U||null!==A,label:"File URL",placeholder:"Paste URL here",margin:"dense",style:{marginRight:20},variant:"outlined",value:g,onChange:function(e){var t=e.target.value;H&&!Q||ae||null!==A||y(t),Q&&(de(""),$(!1),Y(!1))}}),r.a.createElement(be.a,{disabled:H&&!Q||ae||null!==A||Q||!g,variant:"contained",color:"primary",children:U?"Uploading File":null!==he?"Retry":Q&&H?"Extract":H?"Extracting Data":"Extract",onClick:function(e){Oe()}})),w?r.a.createElement("div",null):r.a.createElement(ve.a,{error:null!==he||null!==A,style:Q&&H?{color:"green"}:{}},(null===A||void 0===A?void 0:A.message)||(null!==(t=null===he||void 0===he?void 0:he.message)&&void 0!==t?t:ce))),file:r.a.createElement(M.a,null,r.a.createElement("label",{onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){return H||ae||null!==A||null!==he?console.log("Disabled drop"):Oe(e)},htmlFor:"contained-button-file"},r.a.createElement(M.a,{className:b.content},null!==A?r.a.createElement(xe,{color:"error"},null===A||void 0===A?void 0:A.message):ae?r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{color:"primary",size:20}),r.a.createElement(xe,{style:{marginTop:10}},"Please wait while we load some resources...")):H||he?r.a.createElement(r.a.Fragment,null,Q?r.a.createElement(be.a,{style:{marginBottom:5},color:"primary",variant:"contained",children:"Change",disabled:!Q,onClick:je}):r.a.createElement("div",null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Dn.a,{fontSize:"large"}),r.a.createElement(Se,null,u),r.a.createElement(Se,null,"OR"),r.a.createElement(Se,{color:"primary"},"Browse file")),w?r.a.createElement("div",null):r.a.createElement(Se,{color:null!==he?"error":"initial",style:Q&&H?{color:"green"}:{}},null!==(a=null===he||void 0===he?void 0:he.message)&&void 0!==a?a:ce),null===he||w?r.a.createElement("div",null):r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",marginTop:10}},r.a.createElement(be.a,{style:{marginRight:10},color:"primary",size:"small",children:"Change File",onClick:je}),r.a.createElement(be.a,{onClick:Oe,size:"small",children:"Retry",color:"secondary",variant:"contained"})))))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{component:"fieldset"},r.a.createElement(na.a,{component:"legend"},"Select file input type"),r.a.createElement(ra.a,{"aria-label":"type",name:"type",value:V,onChange:function(e){var t=e.target.value;return G(t)},row:!0},r.a.createElement(oa.a,{value:"file",control:r.a.createElement(ia.a,null),label:"File"}),r.a.createElement(oa.a,{value:"url",control:r.a.createElement(ia.a,null),label:"URL"}))),r.a.createElement("input",{ref:me,disabled:H||ae||null!==A||null!==he,onChange:Oe,style:{display:"none"},id:"contained-button-file",type:"file",name:m,accept:"remotion"===p?"zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed":".aepx,.aep"}),ke[V])},Cn=function(e){var t=e.disabled,a=e.onChange,o=e.keywords,i=e.placeholder,c=void 0===i?"Enter Value":i,s=e.label,u=void 0===s?"Value":s,d=e.maxKeywords,m=e.variant,p=void 0===m?"outlined":m,v=Object(n.useState)(""),b=Object(l.a)(v,2),f=b[0],_=b[1],h=function(e){","!==e.substr(-1)&&" "!==e.substr(-1)||" "===e.substr(0,1)||","===e.substr(0,1)?_(e):(a([].concat(Object(Qt.a)(o),[e.substr(0,e.length-1)])),_(""))};return r.a.createElement(se.a,{fullWidth:!0,margin:"dense",disabled:t||!!d&&o.length>=d,variant:p,onChange:function(e){var t=e.target.value;return h(t)},value:f,type:"text",placeholder:c,label:u,error:d&&o.length>d||" "===f.substr(0,1)||","===f.substr(0,1),helperText:" "===f.substr(0,1)||","===f.substr(0,1)?"Invalid Keyword Value":d?"You can add maximum of ".concat(d," keywords"):"",InputProps:{startAdornment:o.map((function(e,t){return r.a.createElement(w.a,{key:t,style:{margin:6},size:"small",label:e,onDelete:function(){return t=e,void a(o.filter((function(e){return e!==t})));var t}})}))}})},Tn=je.c({title:je.d().required("Title is Required"),projectFile:je.c().required("Project File is required").nullable(),orientation:je.d().oneOf(["landscape","portrait"]).required("Video orientation is required"),thumbnail:je.d().required("Thumbnail is required!")}),Pn=function(e){var t,a=e.initialValues,o=void 0===a?{}:a,i=e.isEdit,c=e.type,s=void 0===c?"ae":c,u=e.assets,d=e.compositions,m=e.onSubmit,p=Object(n.useState)(null!==(t=null===o||void 0===o?void 0:o.keywords)&&void 0!==t?t:[]),v=Object(l.a)(p,2),b=v[0],f=v[1],_=Object(n.useState)(!1),E=Object(l.a)(_,2),g=E[0],y=E[1],O=Object(Oe.a)({initialValues:o,validationSchema:Tn,onSubmit:function(e){m(Object(h.a)(Object(h.a)({},e),{},{keywords:b}))}}),j=O.handleChange,D=O.handleBlur,k=O.handleSubmit,S=O.isSubmitting,x=O.setFieldValue,w=O.setFieldError,C=O.setFieldTouched,T=O.values,P=O.errors,A=O.touched;return r.a.createElement("form",{onSubmit:k,noValidate:!0},r.a.createElement(M.a,{style:{marginBottom:20}},r.a.createElement(wn,{templateType:s,isEdit:i,assets:u,compositions:d,onData:function(e){y(!0),x("projectFile",e)},onError:function(e){C("projectFile",!!e,!1),w("projectFile",e)},onTouched:function(e){return C("projectFile",e,!1)},value:T.projectFile,name:"projectFile",placeholder:"Drag & Drop Your ".concat("remotion"===s?"Remotion project zip file here":"After effects file here")}),(null===A||void 0===A?void 0:A.projectFile)&&P.projectFile&&r.a.createElement(ve.a,{error:!0},P.projectFile)),r.a.createElement(Da.a,{storageType:"archive",required:!0,accept:"image/*",value:T.thumbnail,onError:function(e){C("thumbnail",!!e,!1),w("thumbnail",e)},onChange:function(e){return x("thumbnail",e)},uploadDirectory:"thumbnails",label:"Template Thumbnail",onTouched:function(e){return C("thumbnail",e,!1)},error:A.thumbnail&&P.thumbnail?new Error(null===P||void 0===P?void 0:P.thumbnail):void 0,helperText:"Thumbnail for video template",name:"thumbnail"}),r.a.createElement(G.a,null,"Video orientation *"),r.a.createElement(ue.a,{style:{marginBottom:15},component:"fieldset"},r.a.createElement(ra.a,{"aria-label":"orientation",name:"orientation",value:T.orientation,onChange:function(e){var t=e.target.value;x("orientation",t,!1)},row:!0},r.a.createElement(oa.a,{value:"portrait",control:r.a.createElement(ia.a,null),label:"Portrait"}),r.a.createElement(oa.a,{value:"landscape",control:r.a.createElement(ia.a,null),label:"Landscape"})),r.a.createElement(ve.a,{error:!!P.orientation},P.orientation?P.orientation:"")),r.a.createElement(se.a,{required:!0,fullWidth:!0,margin:"dense",variant:"outlined",onChange:j,onBlur:D,value:T.title,name:"title",type:"text",placeholder:"Enter title",label:"Title",error:A.title&&!!P.title,helperText:A.title&&P.title?P.title:"Do not include generic terms like 'video', 'template' etc. in your title"}),r.a.createElement(se.a,{fullWidth:!0,margin:"dense",variant:"outlined",multiline:!0,rows:3,onChange:j,onBlur:D,value:T.description,name:"description",type:"text",placeholder:"Enter description",label:"Description",error:A.description&&!!P.description,helperText:A.description&&(null===P||void 0===P?void 0:P.description)?P.description:"Keep your description short and simple."}),r.a.createElement(Cn,{disabled:!1,maxKeywords:5,onChange:f,placeholder:"Enter Keywords",label:"Keywords",keywords:b}),r.a.createElement(M.a,{display:"flex",justifyContent:"space-between",mt:4},r.a.createElement("div",null),r.a.createElement(be.a,{endIcon:r.a.createElement(ja.a,{color:"inherit",fontSize:"small"}),color:"primary",style:{marginTop:5,alignSelf:"flex-end"},variant:"contained",type:"submit",children:S?r.a.createElement(fe.a,{color:"inherit",size:20}):"Next",disabled:S||!g})))},An=function(e){var t,a=e.submitForm,o=e.isEdit,i=e.isDrafted,c=void 0!==i&&i,s=e.video,u=e.type,d=Object(f.b)().user,m=Object(n.useContext)(ea),p=Object(l.a)(m,1)[0],v=aa(),b=v.resetVideo,_=v.editVideoKeys,E=v.loadVideo,g=Object(n.useState)(!1),y=Object(l.a)(g,2),O=y[0],j=y[1],D=Object(n.useState)(0),k=Object(l.a)(D,2),S=k[0],x=k[1],w=Object(n.useState)([]),C=Object(l.a)(w,2),T=C[0],P=C[1],A=Object(n.useState)(null),R=Object(l.a)(A,2),I=R[0],L=R[1],U=Object(n.useState)([]),B=Object(l.a)(U,2),z=B[0],F=B[1],W=Object(n.useState)([]),N=Object(l.a)(W,2),K=N[0],V=N[1],G=Object(n.useState)(!1),q=Object(l.a)(G,2),J=q[0],H=q[1],Y=Object(n.useState)(!1),Z=Object(l.a)(Y,2),X=Z[0],Q=Z[1],$=Object(n.useState)(o||c),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(null),j(!0),e.next=5,a(p);case 5:j(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),j(!1),L(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(o||c)&&JSON.stringify(s)===JSON.stringify(p)&&ae(!1)}),[p]);var ie=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,i,l,d,m,p,v,b,f,E,g,y,O,j,D,k;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.keywords,i=t.title,l=t.orientation,d=t.description,m=t.thumbnail,p=t.projectFile,v=p.fileUrl,b=void 0===v?"":v,f=p.staticAssets,E=void 0===f?[]:f,g=p.compositions,y=void 0===g?[]:g,o?null===(a=null!==(n=null===s||void 0===s?void 0:s.staticAssets)&&void 0!==n?n:[])||void 0===a?void 0:a.map((function(e){return e.name})):[],P(y),O=Object.values(y).map((function(e){return Ct(e,"textLayers")})).flat(),j=[],O.map((function(e){var t=e.font,a=void 0===t?"":t;j.includes(a)||j.push(a)})),D=o?E.map((function(e,t){var a,n;return(null===(a=null!==(n=null===s||void 0===s?void 0:s.staticAssets)&&void 0!==n?n:[])||void 0===a?void 0:a.find((function(t){return t.name===e.name})))||e})):E,k=j.map((function(e){var t,a,n;return{name:e,src:(null===(t=null!==(n=null===s||void 0===s?void 0:s.fonts)&&void 0!==n?n:[])||void 0===t||null===(a=t.find((function(t){return t.name===e})))||void 0===a?void 0:a.src)||""}})),V(D),F(k),_(Object(h.a)(Object(h.a)({},o||c?{}:{type:u}),{},{keywords:r,title:i,orientation:l,description:d,src:b,thumbnail:m,fonts:k,staticAssets:D})),x(1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=[r.a.createElement(Pn,{type:o||c?null===s||void 0===s?void 0:s.type:u,isEdit:o||c,assets:p.staticAssets,compositions:T,initialValues:Object(h.a)(Object(h.a)({},p),{},{projectFile:null!==(t=null===p||void 0===p?void 0:p.src)&&void 0!==t?t:""}),onSubmit:ie}),r.a.createElement(On,{isEdit:o||c,compositions:T,activeDisplayIndex:S,setActiveDisplayIndex:x,isSubmitting:O,handleSubmitForm:ne,submitError:I})].concat(Object(Qt.a)("ae"===(o||c?null===s||void 0===s?void 0:s.type:u)?[r.a.createElement(Sa,{isFontNavigated:X,setIsFontNavigated:Q,compositions:T,setActiveDisplayIndex:x,activeDisplayIndex:S,fonts:z}),r.a.createElement(ya,{isAssetNavigated:J,setIsAssetNavigated:H,isSubmitting:O,handleSubmitForm:ne,submitError:I,setActiveDisplayIndex:x,activeDisplayIndex:S,staticAssets:K})]:[]));return Object(n.useEffect)((function(){o||c?E(s):b(null===d||void 0===d?void 0:d.id,u)}),[c,o]),r.a.createElement(M.a,null,null!==I?r.a.createElement(vt,{severity:"error",message:(null===I||void 0===I?void 0:I.message)||"Oop's, something went wrong, action failed !"}):r.a.createElement("div",null),r.a.createElement(Ta,{type:o||c?null===s||void 0===s?void 0:s.type:u,activeDisplayIndex:S}),r.a.createElement(Xe.a,{elevation:2,style:{padding:32}},te?r.a.createElement("div",null):le[S]))},Rn=function(e){var t,a=e.location,o=Object(n.useState)(!0),i=Object(l.a)(o,2),c=(i[0],i[1]),s=Object(n.useState)(null),u=Object(l.a)(s,2),d=u[0],m=u[1],p=Object(dt.b)().VideoTemplate,v=Object(b.i)().type,f=void 0===v?"ae":v,_=Object(n.useContext)(ea),h=(Object(l.a)(_,1)[0],null!==(t=null===a||void 0===a?void 0:a.state)&&void 0!==t?t:{}),E=h.video,g=h.isEdit,y=h.draftIndex,O=void 0===y?null:y,j=Object(b.g)(),D=function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),e.prev=1,!g){e.next=7;break}return e.next=5,p.update(t.id,t);case 5:e.next=9;break;case 7:return e.next=9,p.create(t);case 9:c(!1),j.push({pathname:"/home/videoTemplates",state:{statusObj:{status:{message:"Video Template ".concat(g?"Edited":"Added"," Successfully.")},err:!1}}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),m(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,d&&r.a.createElement(ye.a,{severity:"error",children:d.message}),r.a.createElement(An,{type:f,isEdit:g,isDrafted:null!==O,video:E,submitForm:D}))},Mn=function(e){return r.a.createElement(ta,null,r.a.createElement(Rn,e))},In=a(661),Ln=a.n(In),Un=a(685),Bn=a(197),zn=a.n(Bn),Fn=a(659),Wn=(a(1224),function(e){var t=e.json,a=e.onSubmit,o=e.onClose,i=Object(n.useState)(t),c=Object(l.a)(i,2),s=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{fullWidth:!0,onClose:o,"aria-labelledby":"simple-dialog-title",open:!0},r.a.createElement(Ja.a,{id:"simple-dialog-title"},"Edit/View JSON"),r.a.createElement(Ha.a,null,r.a.createElement(Fn.a,{value:s,onChange:u})),r.a.createElement(Ya.a,null,r.a.createElement(be.a,{onClick:o,color:"primary"},"Cancel"),r.a.createElement(be.a,{onClick:function(){delete s.tableData,a(s)},variant:"contained",color:"primary"},"Update"))))}),Nn=function(e){var t=e.activeStep,a=e.renderStep;return r.a.createElement(wa.a,{activeStep:t,orientation:"vertical"},["Average Render Time","Set Loyalty Amount"].map((function(e){return r.a.createElement(xa.a,{key:e},r.a.createElement(Ca.a,null,e),r.a.createElement(bn.a,null,a(t)))})))},Kn=a(579),Vn=a(577),Gn=a(573),qn=a(567),Jn=a(572),Hn=function(e){var t=[],a=Math.trunc(e/36e5);a>0&&(t.push(a+"h"),e-=36e5*a);var n=Math.trunc(e/6e4);n>0&&(t.push(n+"m"),e-=6e4*n);var r=Math.trunc(e/1e3);return r>0&&t.push(r+"s"),t.join(" ")},Yn=function(e,t){return t.map((function(t){var a,n;return{idVideoTemplate:e||"",idVersion:null!==(a=null===t||void 0===t?void 0:t.id)&&void 0!==a?a:"",renderPrefs:Object(h.a)(Object(h.a)({},(null===t||void 0===t?void 0:t.settingsTemplate)?{settingsTemplate:null===t||void 0===t?void 0:t.settingsTemplate}:{}),void 0!==(null===t||void 0===t?void 0:t.incrementFrame)?{incrementFrame:null===t||void 0===t?void 0:t.incrementFrame}:{}),data:Zn(null!==(n=null===t||void 0===t?void 0:t.fields)&&void 0!==n?n:[],t.dataFillType)}}))};function Zn(e,t){var a={};return e.map((function(e){var n,r;switch(e.type){case"image":a[e.key]="https://via.placeholder.com/".concat(e.constraints.width,"x").concat(e.constraints.height,"/dceef7/000.").concat(null===(n=e.rendererData)||void 0===n?void 0:n.extension);break;default:switch(t){case"label":a[e.key]=e.label;break;case"placeholder":a[e.key]=e.placeholder;break;case"maxLength":a[e.key]=Xn((null===(r=e.constraints)||void 0===r?void 0:r.maxLength)||80,e.label)}}})),a}var Xn=function(e,t){if((null===t||void 0===t?void 0:t.length)>e)return t.substr(0,e);var a=e-(null===t||void 0===t?void 0:t.length)||0,n=Array.from({length:e/2},(function(e,t){return t+1})).join("-").substr(0,a/2),r=n.split("").reverse().join("");return n+t+r},Qn=function(e){var t,a=e.handleSubmit,o=e.data,i=e.pricing,c=Object(dt.b)().Job,s=Object(b.g)(),u=Object(te.b)().enqueueSnackbar,d=Object(n.useState)(!1),m=Object(l.a)(d,2),p=m[0],v=m[1],f=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=null===o||void 0===o||null===(t=o.versions)||void 0===t?void 0:t.map((function(e){var t,a,n=(null===i||void 0===i?void 0:i.find((function(t){return t.idVersion===(null===e||void 0===e?void 0:e.id)})))||{},r=n.full,o=n.half,l=n.idVersion,c=void 0===l?null===e||void 0===e?void 0:e.id:l;return[].concat(Object(Qt.a)((null===o||void 0===o||null===(t=o.render)||void 0===t?void 0:t.averageTime)?[]:[Object(h.a)(Object(h.a)({},e),{},{id:c,settingsTemplate:"half",dataFillType:"maxLength"})]),Object(Qt.a)((null===r||void 0===r||null===(a=r.render)||void 0===a?void 0:a.averageTime)?[]:[Object(h.a)(Object(h.a)({},e),{},{id:c,settingsTemplate:"full",dataFillType:"maxLength"})]))})).flat(),v(!0),n=Yn((null===o||void 0===o?void 0:o.id)||"",a),e.next=6,Promise.all(null===n||void 0===n?void 0:n.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.create(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:s.push("/home/jobs",{message:"Video renders created successfully, Once finished you can continue to publish the template section."}),v(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),v(!1),u((null===(r=e.t0)||void 0===r?void 0:r.message)||"Failed to create renders, Please Try later",{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=!!i.length&&i.every((function(e){var t,a,n=e.half,r=e.full;return(null===n||void 0===n||null===(t=n.render)||void 0===t?void 0:t.averageTime)&&(null===r||void 0===r||null===(a=r.render)||void 0===a?void 0:a.averageTime)}));return r.a.createElement(ce.a,null,r.a.createElement(Zt.a,{style:{margin:15},variant:"outlined"},r.a.createElement(Kn.a,{size:"small"},r.a.createElement(Vn.a,null,r.a.createElement(Gn.a,null,r.a.createElement(qn.a,null,r.a.createElement("b",null,"Version Name")),r.a.createElement(qn.a,null,r.a.createElement("b",null,"Avg. Render Time (HD)")),r.a.createElement(qn.a,null,r.a.createElement("b",null,"Avg. Render Time (Full HD)")))),r.a.createElement(Jn.a,null,null===o||void 0===o||null===(t=o.versions)||void 0===t?void 0:t.map((function(e){var t,a,n,o,l,c,s=e.id,u=e.title,d=(e.averageRenderTime,null===i||void 0===i?void 0:i.find((function(e){var t=e.idVersion;return s===t})));return r.a.createElement(Gn.a,{key:s},r.a.createElement(qn.a,null,u),r.a.createElement(qn.a,null,Hn(null!==(t=null===d||void 0===d||null===(a=d.half)||void 0===a||null===(n=a.render)||void 0===n?void 0:n.averageTime)&&void 0!==t?t:0)||"NA"),r.a.createElement(qn.a,null,Hn(null!==(o=null===d||void 0===d||null===(l=d.full)||void 0===l||null===(c=l.render)||void 0===c?void 0:c.averageTime)&&void 0!==o?o:0)||"NA"))}))))),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",margin:15}},r.a.createElement(be.a,{disabled:_||p,onClick:f,style:{marginTop:10,marginRight:10},color:"primary",variant:"contained",size:"small",children:p?r.a.createElement(fe.a,{color:"inherit",size:20}):"Render"}),r.a.createElement(be.a,{disabled:!_,style:{marginTop:10},size:"small",color:"primary",variant:"contained",onClick:a,children:"Next"})))},$n=a(103),er=function(e){var t,a,o,i=e.onBackPress,c=e.handlePublish,s=e.data,u=Object(f.b)().user,d=Object(dt.b)().VideoTemplate,m=Object(te.b)().enqueueSnackbar,p=Object(n.useState)(!1),v=Object(l.a)(p,2),b=v[0],_=v[1],E=Object($n.b)().createrLoyaltyPercentageShareValue,g=Object(n.useState)(s),y=Object(l.a)(g,2),O=y[0],j=y[1],D=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,d.update((null===O||void 0===O?void 0:O.id)||"",O,{publishAction:"publish"});case 4:t=e.sent,c(null===t||void 0===t?void 0:t.data),_(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),_(!1),m("Failed to publish, due to ".concat(null===(a=e.t0)||void 0===a?void 0:a.message),{variant:"error"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ce.a,null,r.a.createElement(Zt.a,{style:{marginTop:15,marginBottom:15},variant:"outlined"},r.a.createElement(Kn.a,{size:"small"},r.a.createElement(Vn.a,null,r.a.createElement(Gn.a,null,null===(t=["Version Title","Loyalty Amount in USD","admin"===(null===u||void 0===u?void 0:u.role)?"Creator get":"You Get","We get"])||void 0===t?void 0:t.map((function(e){return r.a.createElement(qn.a,null,r.a.createElement(Se,{style:{fontWeight:600}},e))})))),r.a.createElement(Jn.a,null,null===O||void 0===O||null===(a=O.versions)||void 0===a?void 0:a.map((function(e){var t,a;return r.a.createElement(Gn.a,{key:null===e||void 0===e?void 0:e.title},r.a.createElement(qn.a,null,r.a.createElement(xe,null,null===e||void 0===e?void 0:e.title)),r.a.createElement(qn.a,null,r.a.createElement(se.a,{size:"small",margin:"dense",variant:"filled",label:"Loyalty Amount in USD",inputProps:{type:"number"},onChange:function(t){var a;t.persist(),console.log(null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value),j((function(a){var n;return Object(h.a)(Object(h.a)({},a),{},{versions:null===a||void 0===a||null===(n=a.versions)||void 0===n?void 0:n.map((function(a){var n,r;return a.id===(null===e||void 0===e?void 0:e.id)?Object(h.a)(Object(h.a)({},a),{},{loyaltyCurrency:"USD",loyaltyValue:(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value)?parseInt("".concat((null===t||void 0===t||null===(r=t.target)||void 0===r?void 0:r.value)||0)):void 0}):a}))})}))},placeholder:"Enter Amount in USD",value:(null===e||void 0===e?void 0:e.loyaltyValue)?null===e||void 0===e?void 0:e.loyaltyValue:void 0,InputProps:{startAdornment:r.a.createElement(pe.a,{position:"start"},"$")}})),r.a.createElement(qn.a,null,r.a.createElement(xe,null,((null!==(t=null===e||void 0===e?void 0:e.loyaltyValue)&&void 0!==t?t:0)*((100-E)/100)).toFixed(2)," ","USD")),r.a.createElement(qn.a,null,r.a.createElement(xe,null,((null!==(a=null===e||void 0===e?void 0:e.loyaltyValue)&&void 0!==a?a:0)*(E/100)).toFixed(2)," ","USD")))}))))),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",marginTop:10}},r.a.createElement(be.a,{disabled:b,onClick:i,style:{marginTop:10,marginRight:10},size:"small",children:"back"}),r.a.createElement(be.a,{disabled:!(null===O||void 0===O||null===(o=O.versions)||void 0===o?void 0:o.every((function(e){var t=e.loyaltyValue,a=void 0===t?null:t;return null!==a&&!!a})))||b,style:{marginTop:10},size:"small",color:"primary",variant:"contained",onClick:D,children:b?r.a.createElement(fe.a,{color:"inherit",size:20}):"Submit"})))},tr=function(e){var t,a,o=e.onSubmit,i=e.data,c=e.pricing,s=(Object(f.b)().user,Object(dt.b)().VideoTemplate),u=Object(te.b)().enqueueSnackbar,d=Object(n.useState)(""),m=Object(l.a)(d,2),p=m[0],v=m[1],b=Object($n.b)().createrLoyaltyPercentageShareValue,_=Object(n.useState)(""),E=Object(l.a)(_,2),g=E[0],y=E[1],O=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(t),e.next=4,s.update((null===i||void 0===i?void 0:i.id)||"",Object(h.a)({},"publish"===t?{publishState:"published",rejectionReason:""}:{publishState:"rejected",rejectionReason:g}));case 4:a=e.sent,o(null===a||void 0===a?void 0:a.data),v(""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),v(""),u("Failed to ".concat(t,", due to ").concat(null===(n=e.t0)||void 0===n?void 0:n.message),{variant:"error"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(M.a,{style:{padding:15,marginLeft:15,marginRight:15}},(null===i||void 0===i?void 0:i.rejectionReason)&&"rejected"===i.publishState?r.a.createElement(vt,{title:"Previous Rejection Reason",severity:"error",message:null===i||void 0===i?void 0:i.rejectionReason}):r.a.createElement("div",null),r.a.createElement(Zt.a,{style:{marginTop:15,marginBottom:15},variant:"outlined"},r.a.createElement(Kn.a,{size:"small"},r.a.createElement(Vn.a,null,r.a.createElement(Gn.a,null,null===(t=["Version Title","Avg. Time(HD)","Avg. Time(Full HD)","Loyalty Amount in USD","Creators Profit","Buzzle Profit"])||void 0===t?void 0:t.map((function(e){return r.a.createElement(qn.a,null,r.a.createElement(Se,{style:{fontWeight:600}},e))})))),r.a.createElement(Jn.a,null,null===i||void 0===i||null===(a=i.versions)||void 0===a?void 0:a.map((function(e){var t,a,n,o,i,l,s,u,d=null===c||void 0===c?void 0:c.find((function(t){var a=t.idVersion;return(null===e||void 0===e?void 0:e.id)===a}));return r.a.createElement(Gn.a,{key:null===e||void 0===e?void 0:e.title},r.a.createElement(qn.a,null,r.a.createElement(xe,null,null===e||void 0===e?void 0:e.title)),r.a.createElement(qn.a,null,r.a.createElement(xe,null,Hn(null!==(t=null===d||void 0===d||null===(a=d.half)||void 0===a||null===(n=a.render)||void 0===n?void 0:n.averageTime)&&void 0!==t?t:0)||"NA")),r.a.createElement(qn.a,null,r.a.createElement(xe,null,Hn(null!==(o=null===d||void 0===d||null===(i=d.full)||void 0===i||null===(l=i.render)||void 0===l?void 0:l.averageTime)&&void 0!==o?o:0)||"NA")),r.a.createElement(qn.a,null,r.a.createElement(xe,null,null===e||void 0===e?void 0:e.loyaltyValue," ",(null===e||void 0===e?void 0:e.loyaltyCurrency)||"USD")),r.a.createElement(qn.a,null,r.a.createElement(xe,null,((null!==(s=null===e||void 0===e?void 0:e.loyaltyValue)&&void 0!==s?s:0)*((100-b)/100)).toFixed(2)," ","USD")),r.a.createElement(qn.a,null,r.a.createElement(xe,null,((null!==(u=null===e||void 0===e?void 0:e.loyaltyValue)&&void 0!==u?u:0)*(b/100)).toFixed(2)," ","USD")))}))))),r.a.createElement(se.a,{value:g,fullWidth:!0,variant:"filled",label:"Rejection Reason (If any)",placeholder:"Enter rejection reason for template",onChange:function(e){return y(e.target.value)}}),r.a.createElement(M.a,{style:{display:"flex",alignItems:"center",marginTop:10}},r.a.createElement(be.a,{disabled:!!p||!g,onClick:function(){return O("reject")},style:{marginTop:10,marginRight:10},size:"small",color:"secondary",children:"reject"===p?r.a.createElement(fe.a,{color:"inherit",size:20}):"Reject",variant:"contained"}),r.a.createElement(be.a,{disabled:!!p,style:{marginTop:10},size:"small",color:"primary",variant:"contained",onClick:function(){return O("publish")},children:"publish"===p?r.a.createElement(fe.a,{color:"inherit",size:20}):"Approve"})))},ar=Object(E.a)((function(e){return Object(g.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})})),nr=r.a.forwardRef((function(e,t){return r.a.createElement(Va.a,Object.assign({direction:"up",ref:t},e))})),rr=function(e){var t=e.handleClose,a=e.data,o=e.onDone,i=Object(_t.a)(e,["handleClose","data","onDone"]),c=ar(),s=(null===a||void 0===a?void 0:a.rejectionReason)&&"rejected"===a.publishState,u=Object(f.b)().user,d=Object(n.useState)(0),m=Object(l.a)(d,2),p=m[0],v=m[1],b=Object(n.useState)((null===i||void 0===i?void 0:i.pricing)||[]),_=Object(l.a)(b,2),h=_[0],E=_[1],g=Object(n.useState)(!0),y=Object(l.a)(g,2),O=y[0],j=y[1],D=Object(n.useState)(null),k=Object(l.a)(D,2),S=k[0],x=k[1],w=Object(dt.b)().Pricing;Object(n.useEffect)((function(){0===h.length?C():j(!1)}),[]);var C=function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(null),j(!0),e.t0=E,e.next=6,w.video(a.id||"","",{duration:"all"});case 6:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=10;break}e.t1=void 0===t;case 10:if(!e.t1){e.next=14;break}e.t3=void 0,e.next=15;break;case 14:e.t3=t.filter((function(e){var t,n=e.idVersion;return null===(t=a.versions)||void 0===t?void 0:t.find((function(e){var t=e.id;return n===t}))}));case 15:e.t4=e.t3,(0,e.t0)(e.t4),j(!1),e.next=24;break;case 20:e.prev=20,e.t5=e.catch(0),x(e.t5),j(!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),T=function(){t()},P=function(){v(1)},R=function(){v(0)},I=function(e){o(e)};return r.a.createElement(le.a,{fullScreen:!0,open:!0,onClose:T,TransitionComponent:nr},r.a.createElement(A.a,{className:c.appBar},r.a.createElement(V.a,null,r.a.createElement(B.a,{edge:"start",color:"inherit",onClick:T,"aria-label":"close"},r.a.createElement(Ka.a,null)),r.a.createElement(ke,{className:c.title},"admin"===(null===u||void 0===u?void 0:u.role)?"Approve Template":s?"Re-Apply for review":"Apply for review"))),r.a.createElement(Xe.a,{elevation:0},O||null!==S?r.a.createElement(M.a,{style:{minHeight:200,display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"}},S?r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{color:"textSecondary"},null===S||void 0===S?void 0:S.message),r.a.createElement(be.a,{size:"small",children:"retry",color:"secondary",variant:"contained",style:{marginTop:10},onClick:C})):r.a.createElement(fe.a,{color:"primary",size:25})):"admin"===(null===u||void 0===u?void 0:u.role)?r.a.createElement(tr,{pricing:h,data:a,onSubmit:I}):r.a.createElement(Nn,{activeStep:p,renderStep:function(e){switch(e){case 0:return r.a.createElement(Qn,{pricing:h,data:a,handleSubmit:P});case 1:return r.a.createElement(er,{data:a,onBackPress:R,handlePublish:I});default:return}}})))};var or=function(e){var t=e.ownership,a=Object(b.g)(),o=Object(dt.b)(),i=o.VideoTemplate,c=o.User,s=new URLSearchParams(Object(b.h)().search),u=Object(b.j)(),d=u.url,m=u.path,p=Object(n.useState)(null),v=Object(l.a)(p,2),_=(v[0],v[1]),E=Object(n.useState)(null),g=Object(l.a)(E,2),y=g[0],O=g[1],j=Object(n.useState)(!1),D=Object(l.a)(j,2),k=D[0],S=D[1],x=Object(n.useState)(""),C=Object(l.a)(x,2),T=C[0],P=C[1],A=Object(te.b)(),I=A.enqueueSnackbar,L=A.closeSnackbar,U=Object(f.b)(),B=U.user,z=U.refreshUser,F=Pe().reAuthInit,W=B.role,N=Object(n.useRef)(null),K=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,a=I("Adding template to your templates",{persist:!0}),e.next=5,c.addTemplate([t]);case 5:n=e.sent,z(n.data),G(),null!==a?L(a):console.log("not loading"),I("Template added successfully, No you can render it from Your templates",{variant:"success"}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),null!==a?L(a):console.log("not loading"),I("Failed to add template to your templates",{variant:"error"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,F();case 4:return e.next=6,i.delete(t);case 6:N.current&&N.current.onQueryChange(),S(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),S(!1),_(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){_(null),N.current&&N.current.onQueryChange()},q=Object(n.useCallback)((function(e){var n=e.page,r=void 0===n?0:n,o=e.pageSize,l=void 0===o?50:o,c=e.search,s=void 0===c?"":c,u=e.orderBy,d=(u=void 0===u?{}:u).field,m=void 0===d?"dateUpdated":d,p=e.orderDirection,v=void 0===p?"desc":p;return a.push("?page=".concat(r+1,"&size=").concat(l).concat(s?"&searchQuery="+s:"")),i.getAll(r+1,l,"",m,v||"desc",{type:t,fields:"createdBy"}).then((function(e){var t=e.data,a=e.count;return{data:t,page:r,totalCount:a}})).catch((function(e){return _(e),{data:[],page:r,totalCount:0}}))}),[]),J=Object(n.useCallback)((function(){return function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.id){e.next=4;break}return I("Failed to update, Mssing Video Template Id!",{variant:"error"}),e.abrupt("return");case 4:return e.next=6,i.update((null===t||void 0===t?void 0:t.id)||"",Object(h.a)({},t));case 6:I("Video Template Updated successfully!",{variant:"success"}),O(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),O(null),I("Failed to update, ".concat(null!==(a=null===(n=e.t0)||void 0===n?void 0:n.message)&&void 0!==a?a:"Something went wrong"),{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}),[]),H=Object(n.useCallback)((function(e,t){t.tableData;var n=Object(_t.a)(t,["tableData"]);(null===n||void 0===n?void 0:n.id)&&a.push("".concat(m).concat((null===n||void 0===n?void 0:n.slug)||(null===n||void 0===n?void 0:n.id)))}),[m]),Y=function(){O(null),P("")},Z=Object(n.useMemo)((function(){return[{title:"Title",field:"title",render:function(e){var t=e.title,a=e.thumbnail;return r.a.createElement("div",null,r.a.createElement(w.a,{avatar:r.a.createElement(R.a,{alt:"Natacha",src:a}),label:t,variant:"outlined"}))}},{title:"Owned by",render:function(e){var t,a,n=e.idCreatedBy,o=e.createdBy,i=void 0===o?{}:o;return r.a.createElement($a.a,{TransitionComponent:Un.a,title:n===(null===B||void 0===B?void 0:B.uid)?"This template is owned by you":"Owned by ".concat(null!==(t=null===i||void 0===i?void 0:i.name)&&void 0!==t?t:"Guest")},r.a.createElement(w.a,{size:"small",label:n===(null===B||void 0===B?void 0:B.uid)?"You":null!==(a=null===i||void 0===i?void 0:i.name)&&void 0!==a?a:"Guest",style:{background:n===(null===B||void 0===B?void 0:B.uid)?"#3742fa":"#000",color:"white"}}))}},{title:"Versions",align:"left",render:function(e){var t=e.versions;return r.a.createElement(we,null,t.length)}},{title:"Publish State",render:function(e){var t=e.publishState,a=void 0===t?"unpublished":t,n=e.rejectionReason,o=void 0===n?"":n;return r.a.createElement($a.a,{TransitionComponent:Un.a,title:"rejected"===a.toLowerCase()&&o?o:a},r.a.createElement(w.a,{size:"small",label:a.toLowerCase(),style:{background:ir(a),color:"white"}}))}},{title:"Last Updated",render:function(e){var t=e.dateUpdated,a=void 0===t?"":t;return r.a.createElement(we,null,Gt.a(new Date(a)))}}]}),[]);return r.a.createElement(M.a,null,r.a.createElement(Nt.a,{components:{Container:function(e){return r.a.createElement(Xe.a,Object.assign({},e,{elevation:0}))}},tableRef:N,title:"",onRowClick:H,columns:Z,actions:[function(e){var t=e.id,n=void 0===t?"":t,o=e.idCreatedBy,i=void 0===o?"":o;return(null===B||void 0===B?void 0:B.uid)===i||(null===B||void 0===B?void 0:B.guestTemplateUsed.includes(n))||"user"!==(null===B||void 0===B?void 0:B.role)?{icon:function(){return r.a.createElement(Aa.a,null)},tooltip:"Create render of this template",onClick:function(e,t){t.tableData;var n=Object(_t.a)(t,["tableData"]);a.push({pathname:"/testJob",state:{videoTemplate:n,versions:n.versions}})}}:null},function(e){var t=e.idCreatedBy,a=void 0===t?"":t,n=e.publishState,o=void 0===n?"":n;return"admin"==(null===B||void 0===B?void 0:B.role)&&"pending"===o.toLowerCase()?{icon:function(){return r.a.createElement(zn.a,null)},tooltip:"Approve template",onClick:function(e,t){t.tableData;var a=Object(_t.a)(t,["tableData"]);O(a),P("publish")}}:(null===B||void 0===B?void 0:B.uid)!==a||"unpublished"!=o.toLowerCase()&&"rejected"!==o.toLowerCase()?null:{icon:function(){return r.a.createElement(zn.a,null)},tooltip:"Publish template",onClick:function(e,t){t.tableData;var a=Object(_t.a)(t,["tableData"]);O(a),P("publish")}}},"public"===t&&"user"===(null===B||void 0===B?void 0:B.role)?{icon:function(){return r.a.createElement(Ln.a,null)},tooltip:"Add template to your templates",onClick:function(e,t){t.tableData;var a,n,r=Object(_t.a)(t,["tableData"]);K(null!==(a=null===(n=r)||void 0===n?void 0:n.id)&&void 0!==a?a:"")}}:null,function(e){var t=e.idCreatedBy,n=void 0===t?"":t;return(null===B||void 0===B?void 0:B.uid)===n||"admin"===(null===B||void 0===B?void 0:B.role)?{icon:"edit",tooltip:"Edit Template",onClick:function(e,t){var n,r;delete t.tableData,a.push({pathname:"".concat(d,"/").concat((null===(n=t)||void 0===n?void 0:n.slug)||(null===(r=t)||void 0===r?void 0:r.id),"/edit"),state:{isEdit:!0,video:t}})}}:null}].concat(Object(Qt.a)("admin"===W?[{icon:"code",tooltip:"View/Edit JSON",position:"row",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{icon:"delete",tooltip:"Delete Template",disabled:k,onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V((null===(n=a)||void 0===n?void 0:n.id)||""));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]:[]),[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:G}]).filter((function(e){return!!e})),data:q,options:{search:!1,sorting:!1,pageSize:parseInt((null===s||void 0===s?void 0:s.get("size"))||"")||30,headerStyle:{fontWeight:700,fontSize:14,fontFamily:"Poppins"},actionsColumnIndex:-1}}),null!==y&&"publish"!==T&&r.a.createElement(Wn,{json:y,onSubmit:J,onClose:Y}),null!==y&&"publish"===T&&r.a.createElement(rr,{data:y,onDone:function(){Y(),G()},handleClose:Y}))},ir=function(e){switch(e){case"rejected":return"#f44336";case"pending":return"#ffa502";case"published":return"#4caf50";default:return"grey"}},lr=function(){return r.a.createElement(or,{ownership:"owned"})},cr=function(){return r.a.createElement(or,{ownership:"public"})};var sr=function(){var e=new URLSearchParams(Object(b.h)().search).get("tab")||"templates",t=Object(b.g)(),a=Object(b.j)(),o=a.url,i=(a.path,Object(f.b)().user),c=Object(n.useState)(e),s=Object(l.a)(c,2),u=(s[0],s[1],[{label:"admin"==(null===i||void 0===i?void 0:i.role)?"Templates":"Your Templates",key:"templates",component:r.a.createElement(lr,null),allowedRoles:["admin","user"]},{label:"Public Templates",component:r.a.createElement(cr,null),key:"public",allowedRoles:["user"]}]);return r.a.createElement(r.a.Fragment,null,"user"===(null===i||void 0===i?void 0:i.role)?r.a.createElement(Xe.a,{style:{marginBottom:25,padding:15}},r.a.createElement(be.a,{color:"primary",variant:"outlined",style:{margin:10},onClick:function(){return t.push("".concat(o,"/ae/add"))}},"Add After Effects Template"),r.a.createElement(be.a,{color:"primary",variant:"outlined",style:{margin:10},onClick:function(){return t.push("".concat(o,"/remotion/add"))}},"Add Remotion Template"),r.a.createElement(be.a,{variant:"outlined",style:{margin:10},onClick:function(){t.push("".concat(o,"/drafts"))}},"Drafted Templates")):r.a.createElement("div",null),r.a.createElement(Ot,{tabs:u}))},ur=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(b.j)(),c=i.url,s=(i.path,Object(b.g)());Object(n.useEffect)((function(){var e=localStorage.getItem("draftTemplates");o(e?JSON.parse(e):[])}),[]);return r.a.createElement(ce.a,null,r.a.createElement(G.a,{variant:"h5"},"Drafted Templates"),a.length?a.map((function(e,t){return r.a.createElement(Xe.a,{style:{marginTop:10,padding:10}},r.a.createElement(G.a,{variant:"h6"},null===e||void 0===e?void 0:e.title),r.a.createElement(G.a,{color:"secondary"},new Date(null===e||void 0===e?void 0:e.draftedAt).toLocaleString()),r.a.createElement(M.a,{style:{marginTop:10}},r.a.createElement(be.a,{onClick:function(){return s.push({pathname:"".concat(c.substr(0,c.lastIndexOf("/")),"/add"),state:{draftIndex:t,video:e}})},children:"EDIT",size:"small",color:"primary",variant:"contained"}),r.a.createElement(be.a,{onClick:function(){return function(e){var t=a.filter((function(t,a){return e!==a}));o(t),localStorage.setItem("draftTemplates",JSON.stringify(t))}(t)},children:"Delete",size:"small",color:"secondary"})))})):r.a.createElement(G.a,{color:"secondary"},"No Drafted Template"))},dr=a(6),mr=a(578),pr=a(409),vr=new(a(468));function br(e,t,a){return fr.apply(this,arguments)}function fr(){return(fr=Object(oe.a)(re.a.mark((function e(t,a,n){var r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.substr(n.lastIndexOf("/")+1),e.next=4,fetch(n);case 4:return e.next=6,e.sent.blob();case 6:return o=e.sent,vr.file(r,o),e.next=10,Promise.all([].concat(Object(Qt.a)(t.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.src,e.t0=vr,e.t1="assets/".concat(a),e.next=5,fetch(n);case 5:return e.next=7,e.sent.blob();case 7:return e.t2=e.sent,e.abrupt("return",e.t0.file.call(e.t0,e.t1,e.t2));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),Object(Qt.a)(a.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.src,e.t0=vr,e.t1="fonts/".concat(a,".").concat(null===n||void 0===n?void 0:n.split(".").pop()),e.next=5,fetch(n);case 5:return e.next=7,e.sent.blob();case 7:return e.t2=e.sent,e.abrupt("return",e.t0.file.call(e.t0,e.t1,e.t2));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 10:return e.t0=_r,e.next=13,vr.generateAsync({type:"blob"});case 13:return e.t1=e.sent,e.t2="".concat(r.substr(0,r.lastIndexOf(".")),".zip"),(0,e.t0)(e.t1,e.t2),vr.remove("assets"),vr.remove("name"),vr.remove("fonts"),e.abrupt("return",!0);case 22:e.prev=22,e.t3=e.catch(0),console.log(e.t3);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function _r(e,t){var a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t||"download";return n.addEventListener("click",(function e(){setTimeout((function(){URL.revokeObjectURL(a),n.removeEventListener("click",e)}),150)}),!1),n.click(),n}var hr=a(1443),Er=a(1444),gr=(Object(dr.a)({colorPrimary:{backgroundColor:"#b2dfdb"},barColorPrimary:{backgroundColor:"#00695c"}})(mr.a),Object(E.a)((function(e){return Object(g.a)({expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}})}))),yr=function(){var e,t,a,o,i,c=Object(b.i)().id,s=Object(dt.b)(),u=s.VideoTemplate,d=s.Pricing,m=Object(b.h)().state,p=Pe().reAuthInit,v=Object(n.useState)([]),_=Object(l.a)(v,2),h=_[0],E=_[1],g=Object(b.j)().url,y=Object(f.b)().user,O=Object(b.g)(),j=Object(te.b)().enqueueSnackbar,D=Object(n.useState)(""),k=Object(l.a)(D,2),S=k[0],x=k[1],C=Object(n.useState)(!1),T=Object(l.a)(C,2),P=T[0],A=T[1],R=(gr(),Object(n.useState)()),I=Object(l.a)(R,2),U=I[0],z=I[1],F=Object(n.useState)(null),W=Object(l.a)(F,2),N=W[0],K=W[1],V=Object(n.useState)(!0),G=Object(l.a)(V,2),q=G[0],J=G[1],H=(null===U||void 0===U?void 0:U.idCreatedBy)!==(null===y||void 0===y?void 0:y.uid)&&"admin"!==(null===y||void 0===y?void 0:y.role);Object(n.useEffect)((function(){Y()}),[]);var Y=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,K(null),J(!0),e.t0=null===m||void 0===m?void 0:m.videoTemplate,e.t0){e.next=8;break}return e.next=7,u.get(c);case 7:e.t0=e.sent;case 8:return a=e.t0,z(a),e.t1=E,e.next=13,d.video(c,"",{duration:"all"});case 13:if(e.t3=t=e.sent,e.t2=null===e.t3,e.t2){e.next=17;break}e.t2=void 0===t;case 17:if(!e.t2){e.next=21;break}e.t4=void 0,e.next=22;break;case 21:e.t4=t.filter((function(e){var t,n=e.idVersion;return null===a||void 0===a||null===(t=a.versions)||void 0===t?void 0:t.find((function(e){return e.id===n}))}));case 22:e.t5=e.t4,(0,e.t1)(e.t5),J(!1),e.next=31;break;case 27:e.prev=27,e.t6=e.catch(0),J(!1),K(e.t6);case 31:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){A((function(e){return!e}))},X=function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x("folder"),e.next=4,br(null===U||void 0===U?void 0:U.staticAssets,null===U||void 0===U?void 0:U.fonts,null===U||void 0===U?void 0:U.src);case 4:x(""),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),x(""),j(null===(t=e.t0)||void 0===t?void 0:t.message,{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.push({pathname:"".concat(g,"/edit"),state:{isEdit:!0,video:U}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x("delete"),e.next=4,p();case 4:return e.next=6,u.delete(c);case 6:x(""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),x(""),j((null===(t=e.t0)||void 0===t?void 0:t.message)||e.t0,{variant:"error"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Xe.a,{style:{minHeight:300,width:"100%",padding:15}},N?r.a.createElement(M.a,{style:{width:"100%",display:"flex",minHeight:300,flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement(Se,{color:"textSecondary"},null===N||void 0===N?void 0:N.message),r.a.createElement(be.a,{onClick:Y,style:{marginTop:10},children:"retry",size:"small",color:"secondary",variant:"outlined"})):q?r.a.createElement(M.a,{style:{width:"100%",display:"flex",minHeight:300,alignItems:"center",justifyContent:"center"}},r.a.createElement(fe.a,{size:25,color:"primary"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},r.a.createElement(ke,null,null===U||void 0===U?void 0:U.title)),H?r.a.createElement("div",null):r.a.createElement(M.a,{style:{display:"flex",alignItems:"center"}},"ae"===(null===U||void 0===U?void 0:U.type)?r.a.createElement($a.a,{title:"Download AEP File"},r.a.createElement(B.a,{disabled:"file"==S,href:null===U||void 0===U?void 0:U.src},"file"===S?r.a.createElement(fe.a,{size:20,color:"inherit"}):r.a.createElement(hr.a,null))):r.a.createElement("div",null),r.a.createElement($a.a,{title:"folder"===S?"Downloading, Please wait...":"remotion"===(null===U||void 0===U?void 0:U.type)?"Download Template Bundle":"Download Full Template"},r.a.createElement(B.a,{disabled:"folder"==S,onClick:X},"folder"===S?r.a.createElement(fe.a,{color:"inherit",size:20}):r.a.createElement(ba.a,null))),r.a.createElement($a.a,{title:"Edit Video Template"},r.a.createElement(B.a,{onClick:Q},r.a.createElement(en.a,null))),"admin"===(null===y||void 0===y?void 0:y.role)?r.a.createElement($a.a,{title:"delete"===S?"Deleting Template":"Delete Template"},r.a.createElement(B.a,{onClick:$},"delete"===S?r.a.createElement(fe.a,{color:"inherit",size:20}):r.a.createElement(tn.a,null))):r.a.createElement("div",null))),r.a.createElement(L.a,{style:{marginTop:8,marginBottom:8}}),r.a.createElement(Se,{color:"textSecondary"},(null===U||void 0===U?void 0:U.description)||"No Description added!"),r.a.createElement(Se,{style:{fontWeight:600,marginTop:10}},"Versions"),r.a.createElement(L.a,{style:{marginTop:5,marginBottom:5}}),r.a.createElement(M.a,{style:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",padding:15,paddingLeft:0}},null===U||void 0===U||null===(e=U.versions)||void 0===e?void 0:e.map((function(e){var t;return r.a.createElement(jr,{isOwner:(null===y||void 0===y?void 0:y.uid)===(null===U||void 0===U?void 0:U.idCreatedBy),price:null===h||void 0===h?void 0:h.find((function(e){return e.idVideoTemplate===(null===U||void 0===U?void 0:U.id)})),thumbnail:null!==(t=null===U||void 0===U?void 0:U.thumbnail)&&void 0!==t?t:"",version:e})}))),H?r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{style:{fontWeight:600}},"Status"),r.a.createElement(L.a,{style:{marginTop:5,marginBottom:5}}),r.a.createElement(M.a,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:15,paddingLeft:0}},r.a.createElement(w.a,{size:"small",label:(null===U||void 0===U||null===(t=U.publishState)||void 0===t?void 0:t.toUpperCase())||"",style:{background:Or(null===U||void 0===U?void 0:U.publishState),color:"white",fontSize:12,fontWeight:500,fontFamily:"Poppins",marginRight:10}}),(null===U||void 0===U?void 0:U.rejectionReason)&&"rejected"===(null===U||void 0===U?void 0:U.publishState)?r.a.createElement(M.a,{style:{marginTop:10}},r.a.createElement(Se,{style:{fontWeight:600}},"Reason"),r.a.createElement(Se,null,null===U||void 0===U?void 0:U.rejectionReason)):r.a.createElement("div",null),"user"!==(null===y||void 0===y?void 0:y.role)||"unpublished"!==(null===U||void 0===U||null===(a=U.publishState)||void 0===a?void 0:a.toLowerCase())&&"rejected"!==(null===U||void 0===U||null===(o=U.publishState)||void 0===o?void 0:o.toLowerCase())?"admin"===(null===y||void 0===y?void 0:y.role)&&"pending"===(null===U||void 0===U||null===(i=U.publishState)||void 0===i?void 0:i.toLowerCase())?r.a.createElement(be.a,{onClick:Z,style:{marginTop:15},color:"primary",variant:"contained",size:"small",children:"Review Template"}):r.a.createElement("div",null):r.a.createElement(be.a,{onClick:Z,style:{marginTop:15},color:"primary",variant:"contained",size:"small",children:"admin"===(null===y||void 0===y?void 0:y.role)?"Review Template":(null===U||void 0===U?void 0:U.rejectionReason)&&"rejected"===(null===U||void 0===U?void 0:U.publishState)?"Re-Apply":"Publish"})))),P?r.a.createElement(rr,{pricing:h,data:U,handleClose:Z,onDone:function(e){Z(),z(e),j("Template ".concat("admin"===(null===y||void 0===y?void 0:y.role)&&"rejected"===(null===e||void 0===e?void 0:e.publishState)?"Rejected":"Applied"," successfully!"),{variant:"success"})}}):r.a.createElement("div",null))},Or=function(e){switch(e){case"rejected":return"#f44336";case"pending":return"#ffa502";case"published":return"#4caf50";default:return"grey"}},jr=function(e){var t,a,o,i=e.version,c=e.thumbnail,s=e.price,u=e.isOwner,d=gr(),m=Object($n.b)().instances,p=m.length?parseFloat(null===(t=m[0])||void 0===t?void 0:t.SpotPrice)/3600:"NA",v=Ge(),b=v.getConvertedCurrency,f=(v.getConvertedCurrencyValue,Object(n.useState)(!1)),_=Object(l.a)(f,2),h=_[0],E=_[1],g=null===i||void 0===i||null===(a=i.fields)||void 0===a?void 0:a.filter((function(e){return"image"===e.type})).length,y=null===i||void 0===i||null===(o=i.fields)||void 0===o?void 0:o.filter((function(e){var t=e.type;return"string"===t||"data"===t})).length;return r.a.createElement(Zt.a,{variant:"outlined",key:i.id,style:{maxWidth:345,width:"100%",marginRight:20,marginBottom:20}},r.a.createElement("video",{height:150,controls:!0,width:"100%",style:{backgroundColor:"#000"},poster:c,src:null===i||void 0===i?void 0:i.sample}),r.a.createElement(Xt.a,null,r.a.createElement(Se,{style:{fontWeight:600}},i.title),r.a.createElement(xe,{color:"textSecondary"},"Contains ",y," Text fields and ",g," Image fields")),r.a.createElement(Pa.a,{disableSpacing:!0},r.a.createElement(Se,{style:{fontWeight:600}},"Pricing"),r.a.createElement(B.a,{className:Object(Q.a)(d.expand,Object(x.a)({},d.expandOpen,h)),onClick:function(){E(!h)},"aria-expanded":h,"aria-label":"show more"},r.a.createElement(Er.a,null))),r.a.createElement(pr.a,{in:h,timeout:"auto",unmountOnExit:!0},r.a.createElement(vt,{style:{borderRadius:0},severity:"info",message:"This is an approx estimation of cost of render and add-on actions, Render Cost will be calculated from time taken to render!"}),r.a.createElement(Kn.a,{size:"small","aria-label":"a dense table"},r.a.createElement(Vn.a,null,r.a.createElement(Gn.a,null,r.a.createElement(qn.a,null,r.a.createElement("b",null,"Actions")),r.a.createElement(qn.a,{align:"center"},r.a.createElement("b",null,"HD (Approx)")),r.a.createElement(qn.a,{align:"center"},r.a.createElement("b",null,"Full HD (Approx)")))),r.a.createElement(Jn.a,null,["render","buzzle-action-watermark","buzzle-action-merge-videos","buzzle-action-add-audio","buzzle-action-add-thumbnail","buzzle-action-video-orientation"].map((function(e){var t,a,n=s&&(null===s||void 0===s||null===(t=s.half[e])||void 0===t?void 0:t.price)||null,o=s&&(null===s||void 0===s||null===(a=s.full[e])||void 0===a?void 0:a.price)||null;return o="render"!==e||u?o:(o||0)+((null===s||void 0===s?void 0:s.loyaltyAmount)||0),n="render"!==e||u?n:(n||0)+((null===s||void 0===s?void 0:s.loyaltyAmount)||0),r.a.createElement(Gn.a,{key:e},r.a.createElement(qn.a,{component:"th",scope:"row"},function(e){return"buzzle-action-add-audio"===e?"Action Audio":"buzzle-action-add-thumbnail"===e||"buzzle-action-handbrake"===e?"Action Thumbnail":"buzzle-action-merge-videos"===e?"Action Video":"buzzle-action-watermark"===e?"Action Watermark":"buzzle-action-video-orientation"===e?"Action Rotate":"render"===e?"Action Render":e}(e)),r.a.createElement(qn.a,{align:"center"},n?b(n,!0,!1):"NA"!==p?"".concat(b(p,!0,!1),"/sec"):"NA"),r.a.createElement(qn.a,{align:"center"},o?b(o,!0,!1):"NA"!==p?"".concat(b(p,!0,!1),"/sec"):"NA"))}))))))},Dr=function(){var e=Object(b.j)().path;return r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"".concat(e,"/"),exact:!0,render:function(e){return r.a.createElement(Ht,{props:e,component:sr,title:"Video Templates"})}}),r.a.createElement(b.b,{path:"".concat(e,"/:type/add"),render:function(e){return r.a.createElement(Ht,{props:e,component:Mn,title:"Create Video Template"})}}),r.a.createElement(b.b,{path:"".concat(e,"/drafts"),render:function(e){return r.a.createElement(Ht,{props:e,component:ur,title:"Drafted Templates"})}}),r.a.createElement(b.b,{path:"".concat(e,"/:uid/edit"),render:function(e){return r.a.createElement(Ht,{props:e,component:Mn,title:"Edit Video Template"})}}),r.a.createElement(b.b,{path:"".concat(e,"/:id"),render:function(e){return r.a.createElement(Ht,{props:e,component:yr,title:"Video Details"})}}))},kr=a(1413),Sr=a(307),xr=a.n(Sr),wr=a(665),Cr=a.n(wr),Tr=a(663),Pr=a.n(Tr),Ar=a(308),Rr=a.n(Ar),Mr=a(664),Ir=a.n(Mr),Lr=a(1445),Ur=a(1446),Br=a(1448),zr=a(1450),Fr=a(1451),Wr=a(1449),Nr=a(1447),Kr=a(396),Vr=a.n(Kr),Gr=a(1426),qr=function(e){var t=e.title,a=e.handleClose,n=e.children,o=e.onSubmit;return r.a.createElement(le.a,{fullWidth:!0,open:!0,onClose:a,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ja.a,{id:"form-dialog-title"},t),r.a.createElement(Ha.a,{children:n}),r.a.createElement(Ya.a,null,r.a.createElement(be.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(be.a,{variant:"contained",onClick:o,color:"primary",children:"Save Action"})))},Jr=a(1385),Hr=function(e){var t=e.font,a=e.handleDelete,o=e.setFont,i=Object(n.useState)(""!==(null===t||void 0===t?void 0:t.name)?null===t||void 0===t?void 0:t.name:"No File Choosen"),c=Object(l.a)(i,2),s=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(l.a)(d,2),p=m[0],v=m[1],b=Object(n.useState)(Boolean(null===t||void 0===t?void 0:t.src)),f=Object(l.a)(b,2),_=f[0],h=f[1],E=Object(n.useState)("0%"),g=Object(l.a)(E,2),y=g[0],O=g[1],j=Object(n.useState)(null),D=Object(l.a)(j,2),k=D[0],S=D[1],x=Object(n.useState)(null),w=Object(l.a)(x,2),C=w[0],T=w[1],P=function(){var e=Object(oe.a)(re.a.mark((function e(a){var n,r,i,l,c,s,d,m,p;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=(null!==(n=null===a||void 0===a||null===(r=a.target)||void 0===r?void 0:r.files)&&void 0!==n?n:[null])[0]||(null!==(i=null===a||void 0===a||null===(l=a.dataTransfer)||void 0===l?void 0:l.files)&&void 0!==i?i:[null])[0]){e.next=4;break}return e.abrupt("return");case 4:return s=""!==(null===t||void 0===t?void 0:t.name)?null===t||void 0===t?void 0:t.name:c.name.split(".")[0],u(s),v(!0),d=Object(Dt.a)("fonts/".concat(Date.now()).concat(c.name.substr(c.name.lastIndexOf("."))),c),T(d),d.on("httpUploadProgress",(function(e){var t=e.loaded,a=e.total;return O("".concat(parseInt(100*t/a),"%"))})),e.next=12,d.promise();case 12:m=e.sent,p=(p=m.Location).startsWith("http")?p:"https://".concat(p),v(!1),o({name:s,src:p}),h(!0),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),v(!1),S(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===C||void 0===C?void 0:C.abort();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),v(!1),S(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"fit-content"}},r.a.createElement("div",{style:{display:"flex",marginTop:4,paddingLeft:5,paddingRight:5,background:"lightgrey",alignItems:"center"}},r.a.createElement("label",{style:{padding:5,margin:5,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0,background:"white",border:"1px solid grey",fontSize:"13.3333px",fontFamily:"Arial",borderRadius:5}},_?"Change Font":"Upload Font",r.a.createElement("input",{onClick:function(e){e.target.value=null},style:{display:"none"},type:"file",onChange:P})),r.a.createElement("p",{style:{fontSize:13,marginLeft:5,marginRight:5,color:_?"#3742fa":"black"}},r.a.createElement("b",null,s," ",p&&"(".concat(y,")"))),p?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:13,width:80,margin:5,marginTop:0,marginBottom:0,border:"1px solid white",transition:"background-color 0.5s ease",background:"linear-gradient(90deg, #3742fa ".concat(y,", #fff ").concat(y,")")}}),r.a.createElement(be.a,{color:"secondary",size:"small",onClick:A},"cancel")):r.a.createElement($a.a,{arrow:!0,placement:"right",title:"Remove Font"},r.a.createElement(Jr.a,{onClick:a,align:"right",style:{margin:5,marginTop:0,marginBottom:0,color:"grey"},fontSize:"small"}))),k&&r.a.createElement(ve.a,{error:!0,children:null===k||void 0===k?void 0:k.message}))},Yr=function(e){var t=e.initialValue,a=(e.onSubmit,e.handleEdit),o=Object.keys(t)[0],i=t[o],c=Object(n.useState)(o),s=Object(l.a)(c,2),u=s[0],d=s[1],m=Object(n.useState)("installFonts"===o?i:{module:"buzzle-action-install-fonts",fonts:[{name:"",src:""}]}),p=Object(l.a)(m,2),v=p[0],b=p[1],f={installFonts:r.a.createElement(r.a.Fragment,null,v.fonts.map((function(e,t){return r.a.createElement(Hr,{font:e,handleDelete:function(){return E(t)},setFont:function(e){return _(t,e)}})})))},_=function(e,t){v.fonts[e]=t,b(Object(h.a)(Object(h.a)({},v),{},{fonts:v.fonts})),a({installFonts:Object(h.a)(Object(h.a)({},v),{},{fonts:v.fonts})})},E=function(e){var t=v.fonts.filter((function(t,a){return e!==a}));b(Object(h.a)(Object(h.a)({},v),{},{fonts:t})),a({installFonts:Object(h.a)(Object(h.a)({},v),{},{fonts:t})})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{fullWidth:!0,margin:"dense",variant:"outlined"},r.a.createElement(de.a,{id:"property-select"},"Action Name"),r.a.createElement(Ga.a,{labelId:"property-select",id:"property-select",onChange:function(e){var t;return d(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},name:"property",value:o,placeholder:"Select Action",label:"Action Name"},Object.keys(f).map((function(e,t){return r.a.createElement(T.a,{key:t,id:t,value:e,children:e,selected:o===e})})))),"installFonts"===u&&r.a.createElement(be.a,{variant:"outlined",color:"primary",onClick:function(){v.fonts.push({name:"",src:""}),b(Object(h.a)(Object(h.a)({},v),{},{fonts:v.fonts})),a({installFonts:Object(h.a)(Object(h.a)({},v),{},{fonts:v.fonts})})},children:"Add Font"}),f[u])},Zr=a(662),Xr=function(e){var t=e.prerender,a=void 0===t?[]:t,o=e.postrender,i=void 0===o?[]:o,c=e.onSubmit,s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(0),v=Object(l.a)(p,2),b=v[0],f=v[1],_=Object(n.useState)(null),h=Object(l.a)(_,2),E=h[0],g=h[1],y=Object(n.useState)({}),O=Object(l.a)(y,2),j=O[0],D=O[1],k=Object(n.useState)(!1),S=Object(l.a)(k,2),w=S[0],C=S[1],T=Object(n.useState)(a),P=Object(l.a)(T,2),A=P[0],R=P[1],M=Object(n.useState)(i),I=Object(l.a)(M,2),L=I[0],U=I[1];Object(n.useEffect)((function(){W()}),[L,A]);var W=function(){c({prerender:A.map((function(e,t){return Object.values(e)[0]})),postrender:L.map((function(e,t){return Object.values(e)[0]}))})},K=function(){C(!1),g(null),D({}),f(0),m(!1)},V=function(e,t,a){f(a),m(!0),g(e),D(t),C(!0)},q={postrender:r.a.createElement(Zr.a,{initialValue:j,handleEdit:function(e){return D(e)}}),prerender:r.a.createElement(Yr,{initialValue:j,handleEdit:function(e){return D(e)}})};return r.a.createElement(Xe.a,{style:{padding:20}},r.a.createElement(be.a,{color:"primary",onClick:function(){C(!0),g("prerender")},variant:"contained",children:"Add Prerender Action"}),r.a.createElement(an.DragDropContext,{onDragEnd:function(e){e.destination&&R(Qr(A,e.source.index,e.destination.index))}},r.a.createElement(an.Droppable,{droppableId:"droppable"},(function(e,t){return r.a.createElement(Gr.a,{rootRef:e.innerRef},r.a.createElement(z.a,{style:eo(t.isDraggingOver)},0!==A.length?A.map((function(e,t){var a=Object.keys(e)[0];return r.a.createElement(an.Draggable,{key:a,draggableId:a,index:t},(function(n,o){var i;return r.a.createElement(Xe.a,null,r.a.createElement(F.a,Object.assign({ContainerComponent:"li",ContainerProps:{ref:n.innerRef}},n.draggableProps,n.dragHandleProps,{style:$r(o.isDragging,n.draggableProps.style)}),r.a.createElement(N.a,{primary:a,secondary:null===(i=Object.keys(e[a]))||void 0===i?void 0:i.map((function(t,n){return r.a.createElement(G.a,null,"".concat([t],": ").concat(JSON.stringify(e[a][t])))}))}),r.a.createElement(sa.a,null,r.a.createElement(B.a,{onClick:function(){return V("prerender",Object(x.a)({},a,e[a]),t)}},r.a.createElement(Ma.a,null)),r.a.createElement(B.a,{onClick:function(){R(null===A||void 0===A?void 0:A.filter((function(e,a){return t!==a})))}},r.a.createElement(xr.a,null)))))}))})):r.a.createElement("p",null,"No Action"),e.placeholder))}))),r.a.createElement(be.a,{color:"primary",onClick:function(){g("postrender"),C(!0)},variant:"contained",children:"Add Postrender Action"}),r.a.createElement(an.DragDropContext,{onDragEnd:function(e){e.destination&&U(Object(Qt.a)(Qr(L,e.source.index,e.destination.index)))}},r.a.createElement(an.Droppable,{droppableId:"droppable"},(function(e,t){return r.a.createElement(Gr.a,{rootRef:e.innerRef},r.a.createElement(z.a,{style:eo(t.isDraggingOver)},0!==L.length?L.map((function(e,t){var a=Object.keys(e)[0];return r.a.createElement(an.Draggable,{key:a,draggableId:a,index:t},(function(n,o){var i;return r.a.createElement(Xe.a,null,r.a.createElement(F.a,Object.assign({ContainerComponent:"li",ContainerProps:{ref:n.innerRef}},n.draggableProps,n.dragHandleProps,{style:$r(o.isDragging,n.draggableProps.style)}),r.a.createElement(N.a,{primary:a,secondary:null===(i=Object.keys(e[a]||{}))||void 0===i?void 0:i.map((function(t,n){return r.a.createElement(G.a,null,"".concat([t],": ").concat(JSON.stringify(e[a][t]||{})))}))}),r.a.createElement(sa.a,null,r.a.createElement(B.a,{onClick:function(){return V("postrender",Object(x.a)({},a,e[a]),t)}},r.a.createElement(Ma.a,null)),r.a.createElement(B.a,{onClick:function(){U(null===L||void 0===L?void 0:L.filter((function(e,a){return t!==a})))}},r.a.createElement(xr.a,null)))))}))})):r.a.createElement("p",null,"No Action"),e.placeholder))}))),w&&r.a.createElement(qr,{children:q[E],title:"postrender"===E?"Post Render Action":"Pre Render Action",handleClose:K,onSubmit:function(){if(d)switch(E){case"prerender":A[b]=j,R(A),W(),K();break;case"postrender":L[b]=j,U(L),W(),K()}else switch(E){case"prerender":A.push(j),R(A),W(),K();break;case"postrender":L.push(j),R(A),W(),K();break;default:W(),K()}}}))},Qr=function(e,t,a){var n=e[t];return e[t]=e[a],e[a]=n,e},$r=function(e,t){return Object(h.a)(Object(h.a)({},t),e&&{background:"rgb(235,235,235)"})},eo=function(){return{}},to=a(407),ao=a.n(to),no=function(e){var t=e.onChange,a=e.value,o=e.height,i=e.width,c=e.extension,s=void 0===c?"png":c,u=e.name,d=void 0===u?"".concat(Date.now()):u,m=Object(n.useState)("image"),p=Object(l.a)(m,2),v=(p[0],p[1],Object(n.useState)(a.split(".").pop()===s)),b=Object(l.a)(v,2),f=b[0],_=b[1],h=Object(n.useState)(!1),E=Object(l.a)(h,2),g=E[0],y=E[1],O=Object(n.createRef)(),j=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===O||void 0===O?void 0:O.current)){e.next=12;break}return y(!0),e.next=4,ao.a.read(a);case 4:return n=e.sent,e.next=7,n.quality("png"===s?5:20).getBufferAsync("png"===s?ao.a.MIME_PNG:ao.a.MIME_JPEG);case 7:return n=e.sent,y(!1),_(!0),e.next=12,null===O||void 0===O||null===(t=O.current)||void 0===t?void 0:t.handleUpload(n,s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[O]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Da.a,{ref:O,label:"Image",value:a,extension:s,helperText:"",storageType:"deleteAfter90Days",cropEnabled:!0,height:o,width:i,accept:"image/".concat(s),onChange:function(e){_(e.split(".").pop()===s),t(e)},uploadDirectory:"jobImages",error:f?void 0:new Error("Invalid image/format"),name:d}),!f&&r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(be.a,{children:g?"converting...":"Convert to ".concat(s),color:"primary",variant:"contained",disabled:g,onClick:j})))},ro=function(e){var t=e.maxLength,a=e.value,o=e.onChange,i=Object(n.useState)(t-a.length),c=Object(l.a)(i,2),s=c[0],u=c[1],d=a.length<=t,m=function(e){console.log(e.target.value);var a=e.target.value;o(e.target.value),u(t-a.length)};return r.a.createElement("div",null,r.a.createElement(se.a,{error:!d,helperText:!d&&"Invalid value",fullWidth:!0,value:a,onChange:function(e){return m(e)}}),r.a.createElement("text",null,t-s+" / "+t))},oo=a(1414),io=a(1416),lo=a(1415),co=a(397),so=a.n(co),uo=function(e){var t=e.logs,a=Object(n.useState)(!0),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)(t),u=Object(l.a)(s,2),d=u[0],m=u[1];Object(n.useEffect)((function(){Promise.all(t.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h.a,e.t1=Object(h.a)({},t),e.t2={},e.next=5,p(null===t||void 0===t?void 0:t.text);case 5:return e.t3=e.sent,e.t4={text:e.t3},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return m(e)})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)}))}),[t]);var p=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(e.t1=a=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===a;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=a.text();case 11:return e.next=13,e.t2;case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={warning:"yellow",info:"#fff",error:"red"};return r.a.createElement(M.a,{display:"flex",flexDirection:"column",px:8},i?r.a.createElement("p",null,"loading..."):null===d||void 0===d?void 0:d.map((function(e,t){var a,n,o;return r.a.createElement(oo.a,{key:t},r.a.createElement(io.a,{expandIcon:r.a.createElement(so.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(G.a,null,e.label.toUpperCase()),r.a.createElement(G.a,{color:"textSecondary",style:{marginLeft:30}},new Date(null===e||void 0===e?void 0:e.updatedAt).toLocaleString()),r.a.createElement(G.a,{color:"textSecondary",style:{marginLeft:30}},"Instance Id: ",null===e||void 0===e||null===(a=e.rendererInstance)||void 0===a?void 0:a.instanceId,", IPV4: ",null===e||void 0===e||null===(n=e.rendererInstance)||void 0===n?void 0:n.ipv4)),r.a.createElement(lo.a,null,r.a.createElement("div",{style:{display:"flex",backgroundColor:"black",paddingBottom:100,padding:10,flexDirection:"column",width:"100%"}},"console"===e.label?r.a.createElement(r.a.Fragment,null,null===(o=JSON.parse(null===e||void 0===e?void 0:e.text))||void 0===o?void 0:o.map((function(e){var t,a=e.line,n=e.data,o=e.level,i=e.timestamp,l=void 0===i?(new Date).toLocaleString():i;return r.a.createElement(M.a,{style:{display:"flex"}},r.a.createElement("code",{style:{"white-space":"pre-line",fontSize:14,fontFamily:"monospace",fontWeight:600,color:"#fff",paddingRight:10,textAlign:"right",minWidth:40,"border-right":"0.2px solid #fff"}},"".concat(a)),r.a.createElement("code",{style:{"white-space":"pre-line",paddingLeft:35,fontSize:14,fontFamily:"monospace",fontWeight:600,color:v[o]}},l,": ",null===n||void 0===n||null===(t=n.toString())||void 0===t?void 0:t.replace(/,/g,"\n")))}))):r.a.createElement("code",{style:{"white-space":"pre-line",paddingLeft:35,fontSize:14,fontFamily:"monospace",fontWeight:600,color:"#fff"}},e.text))))})))};function mo(e){var t=e.children,a=e.value,n=e.index,o=Object(_t.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(M.a,{p:3},r.a.createElement(G.a,null,t)))}function po(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var vo=Object(E.a)((function(e){return{root:{flexGrow:1},button:{marginRight:20},container:{padding:e.spacing(0),position:"relative"},refreshIcon:{position:"absolute",top:16,right:16},loading:{height:400,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},loadingText:{marginTop:20}}})),bo=function(){var e,t,a,o,i,c,s,u,d,m,p,v,f,_=Object(dt.b)().Job,E=Object($n.b)().socketURL,g=Object(n.useState)({}),y=Object(l.a)(g,2),O=y[0],j=y[1],D=Object(n.useState)(!1),k=Object(l.a)(D,2),S=k[0],x=k[1],C=Object(n.useState)(!1),P=Object(l.a)(C,2),R=P[0],I=P[1],U=Object(n.useState)(null),z=Object(l.a)(U,2),F=z[0],W=z[1],N=Object(n.useState)(null),K=Object(l.a)(N,2),V=K[0],q=K[1],J=Object(n.useState)(!0),H=Object(l.a)(J,2),Y=H[0],Z=H[1],X=Object(n.useState)(0),Q=Object(l.a)(X,2),$=Q[0],ee=Q[1],te=Object(n.useState)({}),ae=Object(l.a)(te,2),ne=ae[0],ie=ae[1],ce=Object(n.useState)(0),me=Object(l.a)(ce,2),pe=me[0],ve=me[1],_e=Object(b.i)().id,he=vo(),Ee=Object(b.g)();Object(n.useEffect)((function(){ge()}),[]),Object(n.useEffect)((function(){}),[pe]),Object(n.useEffect)((function(){W(Vr.a.connect(E||"https://sockets.buzzle.site"),{withCredentials:!0})}),[]),Object(n.useEffect)((function(){var e;return e=_e,F&&F.on("job-progress",(function(t){var a=t.id,n=t.state,r=t.progress,o=t.server;return e===a&&ie({id:a,state:n,progress:r,server:o})})),function(){F&&F.off(_e)}}),[_e,F]);var ge=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!1),Z(!0),e.t0=j,e.next=6,_.get(_e,"fields=idVideoTemplate videoTemplate");case 6:e.t1=e.sent,(0,e.t0)(e.t1),Z(!1),e.next=15;break;case 11:e.prev=11,e.t2=e.catch(0),x(e.t2),Z(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=O.data,a=O.actions,n=O.id,r=O.renderPrefs,Z(!0),e.next=5,_.update(n,{data:t,actions:a,renderPrefs:r},{noMessage:!0});case 5:Z(!1),q("/home/jobs"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Z(!1),x(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=O.id,Z(!0),e.next=5,_.delete(t);case 5:Z(!1),q("/home/jobs"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Z(!1),x(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),je=O.output,De=void 0===je?[]:je,ke=O.state,Se=O.actions,xe=O.data,we=O.renderTime,Ce=O.queueTime,Te=O.dateCreated,Pe=O.dateFinished,Ae=O.renderPrefs,Re=void 0===Ae?{}:Ae,Me=O.dateStarted,Ie=O.failureReason,Le=O.timeline,Ue=void 0===Le?[]:Le,Be=null===De||void 0===De?void 0:De.sort((function(e,t){return new Date(null===t||void 0===t?void 0:t.dateCreated)-new Date(null===e||void 0===e?void 0:e.dateCreated)}));Object(n.useEffect)((function(){var e;"finished"===(null===ne||void 0===ne||null===(e=ne.state)||void 0===e?void 0:e.toLowerCase())&&"finished"!==(null===ke||void 0===ke?void 0:ke.toLowerCase())&&ge()}),[null===ne||void 0===ne?void 0:ne.state,ke]);var ze={"Job ID":_e,State:function(e,t,a){return r.a.createElement($a.a,{TransitionComponent:Un.a,title:"error"===t?e||"Reason not given":"finished/inProgress"},r.a.createElement(w.a,{size:"small",label:"".concat(t).concat(a?" "+a+"%":""),style:{transition:"background-color 0.5s ease",fontWeight:700,background:fo(t,a),color:"white",textTransform:"capitalize"}}))}(Ie,null!==(e=null===ne||void 0===ne?void 0:ne.state)&&void 0!==e?e:ke,null===ne||void 0===ne?void 0:ne.progress),"Render Time":Hn(we),"Queue Time":Hn(Ce),"Created at":new Date(Te).toLocaleString(),"Started at":["created","error"].includes(ke)?"---":new Date(Me).toLocaleString(),"Finished at":"finished"===ke?new Date(Pe).toLocaleString():"---"},Fe=function(){var e=Object(oe.a)(re.a.mark((function e(t,a,n){var r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object.keys(xe),O.data[r[t]]=n,j(Object(h.a)(Object(h.a)({},O),{},{data:O.data}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),We=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===n||void 0===n||null===(t=n.postrender)||void 0===t?void 0:t.find((function(e){var t=e.module;return"buzzle-action-merge-videos"===t||"action-merge-videos"===t})))){e.next=3;break}return e.abrupt("return",alert("This Job has merge video action!, Request failed"));case 3:return a=O.data,n=O.actions,r=O.id,Z(!0),e.next=7,_.update(r,{data:a,actions:n,state:"created",renderPrefs:{settingsTemplate:"full"},extra:{forceRerender:!0}});case 7:Z(!1),q("/home/jobs"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),Z(!1),x(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object.keys(xe),delete O.data[a[t]],j(Object(h.a)(Object(h.a)({},O),{},{data:O.data}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return V?r.a.createElement(b.a,{to:"/home/jobs"}):Y?r.a.createElement(Xe.a,{className:he.loading},r.a.createElement(fe.a,null),r.a.createElement(G.a,{className:he.loadingText},"Loading...")):r.a.createElement(r.a.Fragment,null,S&&r.a.createElement(vt,{message:null!==(t=null===S||void 0===S?void 0:S.message)&&void 0!==t?t:"Somethings went wrong!",showRetry:!0,onRetry:function(){return Object.keys(O).length?ye():ge()}}),r.a.createElement("div",{className:he.root},r.a.createElement(M.a,{display:"flex"},r.a.createElement(M.a,{p:1,justifyItems:"stretch",alignItems:"right",flex:1},r.a.createElement(be.a,{className:he.button,disabled:Y,color:"primary",variant:"contained",onClick:ye,children:"Update Job",startIcon:r.a.createElement(zn.a,null)}),r.a.createElement(be.a,{disabled:Y,color:"white",variant:"contained",className:he.button,onClick:Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.update(_e,{state:"created",data:xe,actions:Se,renderPrefs:Re,extra:{forceRerender:!0}});case 3:Ee.push("/home/jobs"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Restart Job",startIcon:r.a.createElement(Rr.a,null)}),r.a.createElement(be.a,{disabled:Y,color:"primary",variant:"contained",className:he.button,onClick:Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.update(_e,{state:"created",data:xe,actions:Se,renderPrefs:Re},{priority:5});case 3:Ee.push("/home/jobs"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Update & Restart (Priority)",startIcon:r.a.createElement(Rr.a,null)})),r.a.createElement(M.a,null,r.a.createElement(Ga.a,{margin:"dense",variant:"outlined",className:he.button,value:pe,autoWidth:!0,onChange:function(e){ve(e.target.value)}},null===Be||void 0===Be?void 0:Be.map((function(e,t){return r.a.createElement(T.a,{key:t,value:t},e.label,r.a.createElement(G.a,{style:{marginLeft:10},component:"span",variant:"body2",color:"textSecondary"},new Date(e.dateCreated).toLocaleString()))}))),r.a.createElement(B.a,{onClick:Oe,"aria-label":"delete",className:he.margin},r.a.createElement(xr.a,{fontSize:"inherit"})),r.a.createElement(B.a,{onClick:We,"aria-label":"delete",className:he.margin},r.a.createElement(Pr.a,{fontSize:"inherit"})),r.a.createElement(B.a,{"aria-label":"download",className:he.margin,onClick:function(){var e;return window.open((null===Be||void 0===Be?void 0:Be.length)&&(null===(e=Be[pe])||void 0===e?void 0:e.src))}},r.a.createElement(Ir.a,{fontSize:"inherit"})))),r.a.createElement(Xe.a,null,"finished"===ke?r.a.createElement("video",{poster:null===O||void 0===O||null===(a=O.videoTemplate)||void 0===a?void 0:a.thumbnail,style:{height:320,width:"100%"},controls:!0,src:Be.length&&Be[pe].src}):r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{justifyContent:"center",textAlign:"center",height:320},r.a.createElement(G.a,{style:{padding:100}}," ","No output yet.")),r.a.createElement(L.a,null)),r.a.createElement(A.a,{position:"static",color:"transparent",elevation:0},r.a.createElement(ht.a,{value:$,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:function(e,t){return ee(t)},"aria-label":"simple tabs example"},r.a.createElement(Et.a,Object.assign({label:"Output"},po(0))),r.a.createElement(Et.a,Object.assign({label:"Data"},po(1))),r.a.createElement(Et.a,Object.assign({label:"Actions"},po(2))),r.a.createElement(Et.a,Object.assign({label:"Render Prefs"},po(3))),r.a.createElement(Et.a,Object.assign({label:"Logs"},po(3))))),r.a.createElement(mo,{value:$,index:0},r.a.createElement(kr.a,{xs:12,item:!0},r.a.createElement(M.a,{p:2},r.a.createElement(be.a,{variant:"contained",color:"primary",onClick:function(){return I(!0)},startIcon:r.a.createElement(Cr.a,null),style:{marginBottom:10}},"Add Output"),r.a.createElement(le.a,{onClose:function(){return I(!1)},open:R},r.a.createElement("div",{style:{margin:10}},r.a.createElement(Ja.a,null,"Add output"),r.a.createElement(Da.a,{name:"watermarkFile",value:"",storageType:"deleteAfter90Days",onError:function(e){return console.log(e.message)},onChange:function(e){O.output=[].concat(Object(Qt.a)(O.output),[{label:"Added Manually",updatedAt:(new Date).toISOString(),dateCreated:(new Date).toISOString(),src:e}]),j(O)},accept:"video/*",uploadDirectory:"outputs",label:"Add output",onTouched:function(){return console.log("Pressed")},error:!1,helperText:"This will append new output to this job"}))),r.a.createElement(G.a,{variant:"h5"},"Details"),r.a.createElement("br",null),Object.keys(ze).map((function(e){return r.a.createElement(kr.a,{key:e,container:!0,direction:"row",spacing:1},r.a.createElement(kr.a,{xs:6,item:!0},r.a.createElement(G.a,null," ",e)),r.a.createElement(kr.a,{xs:6,item:!0},r.a.createElement(G.a,null," ",ze[e])))})),r.a.createElement(oo.a,{style:{marginTop:20}},r.a.createElement(io.a,{expandIcon:r.a.createElement(so.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(G.a,null,"Render Timeline")),r.a.createElement(lo.a,null,r.a.createElement(Lr.a,{align:"alternate"},Ue.length?Ue.map((function(e,t){var a=e.state,n=e.startsAt,o=e.endsAt;return r.a.createElement(Ur.a,null,0!==t&&(null===Ue||void 0===Ue?void 0:Ue.length)-1!==t&&r.a.createElement(Nr.a,null,r.a.createElement(G.a,{color:"textSecondary"},((o-n)/1e3).toFixed(2)," secs")),r.a.createElement(Br.a,null,r.a.createElement(Wr.a,{style:{backgroundColor:0===t?"#ffa117":t!==(null===Ue||void 0===Ue?void 0:Ue.length)-1?"#35a0f4":"#65ba68"}}),(null===Ue||void 0===Ue?void 0:Ue.length)-1!==t&&r.a.createElement(zr.a,null)),r.a.createElement(Fr.a,null,r.a.createElement("span",null,a)))})):r.a.createElement(G.a,null,"Not Available"))))))),r.a.createElement(mo,{value:$,index:1},r.a.createElement(Nt.a,{style:{boxShadow:"none"},options:{pageSize:30,headerStyle:{fontWeight:700},actionsColumnIndex:-1},editable:{onRowUpdate:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(a.tableData.id,t.key,t.value);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onRowDelete:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t.tableData.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},columns:[{title:"Label",render:function(e){var t,a,n=e.key,o=null===O||void 0===O||null===(t=O.videoTemplate)||void 0===t?void 0:t.versions.find((function(e){return(null===e||void 0===e?void 0:e.id)===(null===O||void 0===O?void 0:O.idVersion)})),i=null===o||void 0===o||null===(a=o.fields)||void 0===a?void 0:a.find((function(e){return(null===e||void 0===e?void 0:e.key)===n}));return r.a.createElement("span",null,null===i||void 0===i?void 0:i.label)},editable:"never"},{title:"Type",render:function(e){var t=e.value;return r.a.createElement("span",null,t.startsWith("http://")||t.startsWith("https://")?"image":"string")},editable:"never"},{title:"valid length/format",render:function(e){var t,a,n,o,i,l=e.value,c=e.key,s=O.videoTemplate.versions.find((function(e){return e.id===O.idVersion})),u=l.startsWith("http")?null!==(t=null===(a=s.fields.find((function(e){return e.key===c})))||void 0===a||null===(n=a.rendererData)||void 0===n?void 0:n.extension)&&void 0!==t?t:"png":null===(o=s.fields.find((function(e){return e.key===c})))||void 0===o||null===(i=o.constraints)||void 0===i?void 0:i.maxLength;return r.a.createElement("span",null,u)},editable:"never"},{title:"Value",field:"value",render:function(e){var t,a,n,o,i,l=e.value,c=e.key,s=O.videoTemplate.versions.find((function(e){return e.id===O.idVersion})),u=l.startsWith("http")?l.split(".").pop()===(null!==(t=null===(a=s.fields.find((function(e){return e.key===c})))||void 0===a||null===(n=a.rendererData)||void 0===n?void 0:n.extension)&&void 0!==t?t:"png"):l.length<=(null===(o=s.fields.find((function(e){return e.key===c})))||void 0===o||null===(i=o.constraints)||void 0===i?void 0:i.maxLength);return r.a.createElement(G.a,{color:u?"textPrimary":"secondary"},l)},editComponent:function(e){var t=e.rowData,a=t.key,n=(t.constraints,e.onChange),o=e.value,i=O.videoTemplate.versions.find((function(e){return e.id===O.idVersion})).fields.find((function(e){return e.key===a})),l=i.constraints,c=l.height,s=void 0===c?100:c,u=l.width,d=void 0===u?100:u,m=l.maxLength,p=i.rendererData.extension,v=void 0===p?"png":p;return(null===o||void 0===o?void 0:o.startsWith("http://"))||(null===o||void 0===o?void 0:o.startsWith("https://"))?r.a.createElement(no,{name:a,value:o,extension:v,onChange:n,height:s,width:d}):r.a.createElement(ro,{maxLength:m,value:o,onChange:n})}}],data:Object.keys(xe||{}).map((function(e){return{key:e,value:xe[e]}})),title:"Data"})),r.a.createElement(mo,{value:$,index:2},r.a.createElement(Xr,{onSubmit:function(e){return j(Object(h.a)(Object(h.a)({},O),{},{actions:e}))},prerender:null!==(o=null===Se||void 0===Se||null===(i=Se.prerender)||void 0===i?void 0:i.map((function(e){return{installFonts:e}})))&&void 0!==o?o:[],postrender:null!==(c=null===Se||void 0===Se||null===(s=Se.postrender)||void 0===s?void 0:s.map((function(e){switch(e.module){case"buzzle-action-handbrake":return{compress:e};case"buzzle-action-watermark":return{addWatermark:e};case"buzzle-action-add-thumbnail":return{addThumbnail:e};case"buzzle-action-upload":return{upload:e};case"buzzle-action-add-audio":return{addAudio:e};case"buzzle-action-merge-videos":return{mergeVideos:e};case"buzzle-action-video-orientation":return{rotateAction:e};default:return{}}})))&&void 0!==c?c:[]})),r.a.createElement(mo,{value:$,index:3},r.a.createElement(M.a,{display:"flex",flexDirection:"column",px:8},r.a.createElement(ue.a,null,r.a.createElement(de.a,{htmlFor:"settingsTemplate"},"Settings Template"),r.a.createElement(Ga.a,{value:(null===(u=O.renderPrefs)||void 0===u?void 0:u.settingsTemplate)||"",onChange:function(e){var t=e.target.value;return j(Object(h.a)(Object(h.a)({},O),{},{renderPrefs:Object(h.a)(Object(h.a)({},null===O||void 0===O?void 0:O.renderPrefs),{},{settingsTemplate:t})}))},inputProps:{name:"settingsTemplate",id:"settingsTemplate"}},r.a.createElement(T.a,{"aria-label":"None",value:""}),r.a.createElement(T.a,{value:"half"},"Half"),r.a.createElement(T.a,{value:"full"},"Full"))),r.a.createElement(ue.a,null,r.a.createElement(de.a,{htmlFor:"outputModule"},"Output module"),r.a.createElement(Ga.a,{value:(null===(d=O.renderPrefs)||void 0===d?void 0:d.outputModule)||"",onChange:function(e){var t=e.target.value;return j(Object(h.a)(Object(h.a)({},O),{},{renderPrefs:Object(h.a)(Object(h.a)({},null===O||void 0===O?void 0:O.renderPrefs),{},{outputModule:t})}))},inputProps:{name:"outputModule",id:"outputModule"}},r.a.createElement(T.a,{"aria-label":"None",value:""}),r.a.createElement(T.a,{value:"h264"},"H264"))),r.a.createElement(se.a,{value:(null===(m=O.renderPrefs)||void 0===m?void 0:m.incrementFrame)||"",id:"incrementFrame",label:"Increment Frame",type:"number"}),r.a.createElement(se.a,{value:(null===(p=O.renderPrefs)||void 0===p?void 0:p.frameStart)||"",id:"frameStart",label:"Start Frame",type:"number"}),r.a.createElement(se.a,{value:(null===(v=O.renderPrefs)||void 0===v?void 0:v.frameEnd)||"",id:"frameEnd",label:"End Frame",type:"number"}))),r.a.createElement(mo,{value:$,index:4},r.a.createElement(uo,{logs:null!==(f=null===O||void 0===O?void 0:O.logs)&&void 0!==f?f:[]})))))},fo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(null===e||void 0===e?void 0:e.toLowerCase()){case"finished":return"#4caf50";case"error":return"#f44336";case"started":return"#ffa502";case"rendering":return"linear-gradient(90deg, #4caf50 ".concat(t,"%, grey ").concat(t,"%)");default:return"grey"}},_o=a(671),ho=a.n(_o),Eo=a(668),go=a.n(Eo),yo=a(669),Oo=a.n(yo),jo=a(670),Do=a.n(jo),ko=a(680),So=a(631),xo=a(667),wo=a.n(xo),Co=a(666),To=a.n(Co),Po=a(88),Ao=a(1456),Ro=r.a.createElement(To.a,{fontSize:"small"}),Mo=r.a.createElement(wo.a,{fontSize:"small"}),Io=r.a.memo((function(e){var t,a,o,i,c=e.value,s=void 0===c?{}:c,u=e.onChange,d=Object(n.useState)(!0),m=Object(l.a)(d,2),p=m[0],v=m[1],b=Object(dt.b)().VideoTemplate,f=Object(n.useState)([]),_=Object(l.a)(f,2),E=_[0],g=_[1],y=Object(n.useState)(s),O=Object(l.a)(y,2),j=O[0],D=O[1];return Object(n.useEffect)((function(){0===E.length&&b.getAll(1,500).then((function(e){var t=e.data;return g(t.map((function(e){return{title:e.title,id:e.id}})))})).catch(console.log).finally((function(){return v(!1)}))}),[]),Object(n.useEffect)((function(){u(j)}),[j]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Po.a,{utils:ko.a},r.a.createElement(Ao.a,{style:{width:150,marginBottom:0},disableToolbar:!0,margin:"dense",format:"MM/dd/yyyy",id:"date-picker-inline",label:"Start date",value:null!==(t=null===j||void 0===j?void 0:j.startDate)&&void 0!==t?t:null,onChange:function(e){return D(Object(h.a)(Object(h.a)({},j),{},{startDate:new Date(e).toISOString()}))},KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(Ao.a,{margin:"dense",style:{marginLeft:10,width:150,marginRight:10,marginBottom:0},disableToolbar:!0,format:"MM/dd/yyyy",id:"date-picker-inline",label:"End date",value:null!==(a=null===j||void 0===j?void 0:j.endDate)&&void 0!==a?a:null,onChange:function(e){return D(Object(h.a)(Object(h.a)({},j),{},{endDate:new Date(e).toISOString()}))},KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement(Za.a,{multiple:!0,limitTags:1,id:"checkboxes-tags-demo",value:null!==(o=null===j||void 0===j?void 0:j.idVideoTemplates)&&void 0!==o?o:[],options:E,loading:p,onChange:function(e,t){return D(Object(h.a)(Object(h.a)({},j),{},{idVideoTemplates:t}))},disableCloseOnSelect:!0,getOptionLabel:function(e){return e.title},renderOption:function(e){var t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(So.a,{icon:Ro,checkedIcon:Mo,style:{marginRight:8},checked:null===j||void 0===j||null===(t=j.idVideoTemplates)||void 0===t?void 0:t.find((function(t){return t.id===(null===e||void 0===e?void 0:e.id)}))}),e.title)},style:{width:250,marginRight:10},renderInput:function(e){return r.a.createElement(se.a,Object.assign({},e,{label:"Videotemplates",placeholder:"Choose videotemplates"}))}}),r.a.createElement(Za.a,{multiple:!0,limitTags:1,id:"checkboxes-tags-demo",value:null!==(i=null===j||void 0===j?void 0:j.states)&&void 0!==i?i:[],options:["error","created","started","finished","render:postrender","render:postdownload","render:download","render:script","render:predownload","render:dorender","render:prerender"],onChange:function(e,t){return D(Object(h.a)(Object(h.a)({},j),{},{states:t}))},disableCloseOnSelect:!0,getOptionLabel:function(e){return e},renderOption:function(e){var t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(So.a,{icon:Ro,checkedIcon:Mo,style:{marginRight:8},checked:null===j||void 0===j||null===(t=j.states)||void 0===t?void 0:t.includes(e)}),e.toUpperCase())},style:{width:250,marginRight:10},renderInput:function(e){return r.a.createElement(se.a,Object.assign({},e,{label:"Status",placeholder:"Select Status"}))}}),Object.keys(j).length?r.a.createElement(be.a,{disabled:!Object.keys(j).length,children:"clear filter",size:"small",color:"primary",onClick:function(){D({}),u({})}}):r.a.createElement("div",null))}),(function(e,t){return JSON.stringify(null===e||void 0===e?void 0:e.value)===JSON.stringify(null===t||void 0===t?void 0:t.value)})),Lo=a(1421),Uo=a(1423),Bo=a(1422),zo=a(1432),Fo=function(e){var t=e.logs,a=void 0===t?[]:t,o=e.onClose,i=Object(n.useRef)(null);Object(n.useEffect)((function(){(null===i||void 0===i?void 0:i.current)&&i.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),[a,i]);var l={warning:"yellow",info:"#fff",error:"red"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{fullWidth:!0,onClose:o,"aria-labelledby":"simple-dialog-title",open:!0},r.a.createElement(Ja.a,{id:"simple-dialog-title"},"Logs"),r.a.createElement(Ha.a,{ref:i,style:{display:"flex",backgroundColor:"black",paddingBottom:100,padding:10,flexDirection:"column"}},a.map((function(e){var t,a=e.line,n=e.data,o=e.level,i=e.timestamp,c=void 0===i?(new Date).toLocaleString():i;return r.a.createElement(M.a,{style:{display:"flex"}},r.a.createElement("code",{style:{"white-space":"pre-line",fontSize:14,fontFamily:"monospace",fontWeight:600,color:"#fff",paddingRight:10,textAlign:"right",minWidth:40,"border-right":"0.2px solid #fff"}},"".concat(a)),r.a.createElement("code",{style:{"white-space":"pre-line",paddingLeft:35,fontSize:14,fontFamily:"monospace",fontWeight:600,color:l[o]}},c,": ",null===n||void 0===n||null===(t=n.toString())||void 0===t?void 0:t.replace(/,/g,"\n")))}))),r.a.createElement(Ya.a,null,r.a.createElement(be.a,{onClick:o,color:"primary"},"Close"))))};var Wo=function(e){var t,a=e.onRowClick,o=Object(dt.b)().Job,i=Object($n.b)().socketURL,c=Object(n.useState)([]),s=Object(l.a)(c,2),u=s[0],d=s[1],m=Object(n.useState)({}),p=Object(l.a)(m,2),v=p[0],b=p[1],_=Object(n.useState)([]),E=Object(l.a)(_,2),g=E[0],y=E[1],O=Object(n.useState)([]),j=Object(l.a)(O,2),D=j[0],k=j[1],S=Object(f.b)().user,x=Object(n.useState)(null),C=Object(l.a)(x,2),T=C[0],P=C[1],A=Object(n.useState)(null),R=Object(l.a)(A,2),I=R[0],L=R[1];Object(n.useEffect)((function(){U(),L(Vr.a.connect(i||"https://sockets.buzzle.site",{withCredentials:!1}))}),[]);var U=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,a,n,r,i,l,c,s,u,d,m,p,v,f,_;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getStatus("state[]=!finished",{paginate:!1,fields:"state"});case 2:t=e.sent,a=t.data,0,n={},a.forEach((function(e){e.state in n?n[e.state]+=1:n[e.state]=1})),r=n.error,i=void 0===r?0:r,l=n.created,c=void 0===l?0:l,s=n["render:download"]||0,u=n["render:dorender"]||0,d=n.rendering||0,m=n["render:predownload"]||0,p=n["render:postdownload"]||0,v=n["render:postrender"]||0,f=n["render:prerender"]||0,_=n["render:script"]||0,b({error:i,rendering:s+v+_+u+f+d+p+m,created:c});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(!I)return console.log("no socket");I&&console.log(I),I.on("job-progress",(function(e){var t=e.id,a=e.state,n=e.idCreatedBy,r=e.progress,o=e.rendererInstance;n===(null===S||void 0===S?void 0:S.uid)&&d((function(e){return-1===e.map((function(e){return e.id})).indexOf(t)?[].concat(Object(Qt.a)(e),[{id:t,state:a,progress:r,rendererInstance:o}]):null===e||void 0===e?void 0:e.map((function(e){return e.id===t?{id:t,state:a,progress:r,rendererInstance:o}:e}))}))})),I.on("job-logs",(function(e){var t=e.id,a=e.idCreatedBy,n=void 0===a?null===S||void 0===S?void 0:S.uid:a,r=e.logs;n===(null===S||void 0===S?void 0:S.uid)&&y((function(e){return-1===e.map((function(e){return e.id})).indexOf(t)?[].concat(Object(Qt.a)(e),[{id:t,logs:r}]):null===e||void 0===e?void 0:e.map((function(e){return e.id===t?{id:t,logs:r}:e}))}))})),I.on("job-status",(function(e){var t=e.error,a=void 0===t?0:t,n=e.created,r=void 0===n?0:n,o=e["render:download"]||0,i=e["render:dorender"]||0,l=e.rendering||0,c=e["render:predownload"]||0,s=e["render:postdownload"]||0,u=e["render:postrender"]||0,d=e["render:prerender"]||0,m=e["render:script"]||0;b({error:a,rendering:o+u+m+i+d+l+s+c,created:r})}))}),[I]),Object(n.useEffect)((function(){if((null===u||void 0===u?void 0:u.length)&&(null===D||void 0===D?void 0:D.length)!==(null===u||void 0===u?void 0:u.length)){var e,t=null===(e=u.find((function(e){return!D.map((function(e){return e.id})).includes(null===e||void 0===e?void 0:e.id)})))||void 0===e?void 0:e.id;t&&(k((function(e){return[].concat(Object(Qt.a)(e),[{id:t}])})),o.get(t,!0).then((function(e){return k((function(a){return a.find((function(e){return e.id===t}))?a.map((function(a){return(null===a||void 0===a?void 0:a.id)===t?Object(h.a)(Object(h.a)({},e),{},{id:t}):a})):[].concat(Object(Qt.a)(a),[Object(h.a)(Object(h.a)({},e),{},{id:t})])}))})).catch((function(){return k((function(e){return[].concat(Object(Qt.a)(e),[{id:t}])}))})))}}),[u,D]),Object(n.useEffect)((function(){var e=null===u||void 0===u?void 0:u.filter((function(e){var t=e.state;return"finished"!==(void 0===t?"":t).toLowerCase()}));(null===e||void 0===e?void 0:e.length)&&u.find((function(e){var t=e.state;return"finished"===(void 0===t?"":t).toLowerCase()}))&&setTimeout((function(){d(e),k((function(t){return null===t||void 0===t?void 0:t.filter((function(t){var a=t.id;return e.map((function(e){return e.id})).includes(a)}))}))}),5e3)}),[u]);var B=function(e){var t,n,o,i,l=e.id,c=e.state,s=e.progress,u=e.jobData,d=e.rendererInstance;return r.a.createElement(Gn.a,{key:l,onClick:function(){return a(l)}},r.a.createElement(qn.a,{component:"th",scope:"row"},l),r.a.createElement(qn.a,{align:"left"},(null===u||void 0===u||null===(t=u.videoTemplate)||void 0===t?void 0:t.title)||"loading..."),r.a.createElement(qn.a,null,(null===u||void 0===u||null===(n=u.videoTemplate)||void 0===n||null===(o=n.versions)||void 0===o||null===(i=o.find((function(e){return(null===e||void 0===e?void 0:e.id)===(null===u||void 0===u?void 0:u.idVersion)})))||void 0===i?void 0:i.title)||"loading..."),r.a.createElement(qn.a,null,Gt.a(new Date(null===u||void 0===u?void 0:u.dateUpdated))||"loading..."),r.a.createElement(qn.a,null,Gt.a(new Date(null===u||void 0===u?void 0:u.dateCreated))||"loading..."),r.a.createElement(qn.a,{align:"left"},r.a.createElement(w.a,{size:"small",label:"".concat(c).concat(s?" "+s+"%":""),style:{fontWeight:700,background:No(c,s),color:"white",textTransform:"capitalize"}})),r.a.createElement(qn.a,null,null===d||void 0===d?void 0:d.ipv4),r.a.createElement(qn.a,{align:"left"},r.a.createElement(be.a,{onClick:function(e){e.stopPropagation(),P(l)},size:"small",variant:"contained",color:"primary",children:"view logs"})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Lo.a,{defaultExpanded:!0,style:{marginBottom:20}},r.a.createElement(Uo.a,{expandIcon:r.a.createElement(Er.a,null),"aria-controls":"panel1c-content",id:"panel1c-header"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"50%"}},r.a.createElement(G.a,{variant:"h6"},"Active Jobs (",null===u||void 0===u?void 0:u.length," Jobs)"),r.a.createElement(be.a,{style:{marginLeft:25},variant:"contained",size:"small",color:"primary",children:"clear",onClick:function(e){e.stopPropagation(),d([])}})),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly"}},r.a.createElement(w.a,{size:"small",label:"Error: ".concat(v.error||0),style:{fontWeight:700,background:"#f44336",color:"white",marginLeft:10,textTransform:"capitalize"}}),r.a.createElement(w.a,{size:"small",label:"Rendering: ".concat(v.rendering||0),style:{fontWeight:700,background:"#ffa502",color:"white",marginLeft:10,textTransform:"capitalize"}}),r.a.createElement(w.a,{size:"small",label:"Created: ".concat(v.created||0),style:{fontWeight:700,marginLeft:10,background:"grey",color:"white",textTransform:"capitalize"}})))),r.a.createElement(Bo.a,{style:{flexWrap:"wrap"}},(null===u||void 0===u?void 0:u.length)?r.a.createElement(zo.a,null,r.a.createElement(Kn.a,{stickyHeader:!0,size:"small","aria-label":"a dense table"},r.a.createElement(Vn.a,null,r.a.createElement(Gn.a,null,r.a.createElement(qn.a,null,"Job Id"),r.a.createElement(qn.a,{align:"left"},"Video template"),r.a.createElement(qn.a,{align:"left"},"Version"),r.a.createElement(qn.a,{align:"left"},"Last updated"),r.a.createElement(qn.a,{align:"left"},"Created at"),r.a.createElement(qn.a,{align:"left"},"Status"),r.a.createElement(qn.a,{align:"left"},"Instance IP"),r.a.createElement(qn.a,{align:"left"},"Actions"))),r.a.createElement(Jn.a,null,u.map((function(e){var t=e.id,a=e.state,n=e.progress,o=e.rendererInstance;return r.a.createElement(B,{id:t,rendererInstance:o,state:a,progress:n,jobData:(null===D||void 0===D?void 0:D.find((function(e){return e.id===t})))||[]})}))))):r.a.createElement(M.a,null,r.a.createElement(G.a,null,"No Active Jobs")))),null!==T&&r.a.createElement(Fo,{logs:null===g||void 0===g||null===(t=g.find((function(e){return e.id===T})))||void 0===t?void 0:t.logs,onClose:function(){return P(null)}}))},No=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(e.toLowerCase()){case"finished":return"#4caf50";case"error":return"#f44336";case"started":return"#ffa502";case"rendering":return"linear-gradient(90deg, #ffa502 ".concat(t,"%, grey ").concat(t,"%)");default:return"grey"}};var Ko=function(){var e,t=Object(b.j)().path,a=Object(b.g)(),o=Object(b.h)().state,i=Object(dt.b)().Job,c=Object(te.b)(),s=c.enqueueSnackbar,u=(c.closeSnackbar,new URLSearchParams(Object(b.h)().search)),d=Object(n.useRef)(null),m=Object(n.useState)(null),p=Object(l.a)(m,2),v=p[0],_=p[1],E=(Object(f.b)().user,Object(n.useState)({})),g=Object(l.a)(E,2),y=g[0],O=g[1],j=Object(n.useState)(null),D=Object(l.a)(j,2),k=D[0],S=D[1],x=Jo(y),C=function(){d.current&&d.current.onQueryChange(),_(null)};Object(n.useEffect)((function(){C()}),[x]);var T=function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.deleteMultiple({ids:t.map((function(e){return null===e||void 0===e?void 0:e.id}))});case 3:s("jobs deleted successfully ",{variant:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s("jobs failed to delete ",{variant:"error"});case 9:d.current&&d.current.onQueryChange();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,n,r,o,l,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.data,r=t.actions,o=t.renderPrefs,e.prev=1,e.next=4,i.update(a,{data:n,actions:r,renderPrefs:o},{noMessage:!0});case 4:s("Job Updated successfully!",{variant:"success"}),S(null),d.current&&d.current.onQueryChange(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s("Failed to update, ".concat(null!==(l=null===(c=e.t0)||void 0===c?void 0:c.message)&&void 0!==l?l:"Something went wrong"),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"right"}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.renderTime,a=e.id,o=e.timeline,i=void 0===o?[]:o,c=Object(n.useState)(null),s=Object(l.a)(c,2),u=s[0],d=s[1],m=function(){d(null)},p=Boolean(u);return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{"aria-owns":p?"mouse-over-popover".concat(a):void 0,"aria-haspopup":"true",onMouseEnter:function(e){d(e.currentTarget)},onMouseLeave:m},-1!==t?Hn(t):"NA"),r.a.createElement(Qe.a,{id:"mouse-over-popover".concat(a),open:p,style:{pointerEvents:"none"},anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},onClose:m,disableRestoreFocus:!0},r.a.createElement(Lr.a,{align:"alternate"},i.length?i.map((function(e,t){var a=e.state,n=e.startsAt,o=e.endsAt;return r.a.createElement(Ur.a,null,0!==t&&(null===i||void 0===i?void 0:i.length)-1!==t&&r.a.createElement(Nr.a,null,r.a.createElement(G.a,{color:"textSecondary"},((o-n)/1e3).toFixed(2)," secs")),r.a.createElement(Br.a,null,r.a.createElement(Wr.a,{style:{backgroundColor:0===t?"#ffa117":t!==(null===i||void 0===i?void 0:i.length)-1?"#35a0f4":"#65ba68"}}),(null===i||void 0===i?void 0:i.length)-1!==t&&r.a.createElement(zr.a,null)),r.a.createElement(Fr.a,null,r.a.createElement("span",null,a)))})):r.a.createElement(G.a,null,"Not Available"))))},R=function(){var e=Object(oe.a)(re.a.mark((function e(t){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.map((function(e){return e.id})),e.next=4,i.updateMultiple({ids:a,state:"created",extra:{forceRerender:!0}});case 4:s("jobs restarted successfully ",{variant:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s("jobs failed to restart ",{variant:"error"});case 10:d.current&&d.current.onQueryChange();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,v&&r.a.createElement(vt,{message:v.message,showRetry:!0,onRetry:C}),(null===o||void 0===o?void 0:o.message)?r.a.createElement(vt,{severity:"info",message:null!==(e=null===o||void 0===o?void 0:o.message)&&void 0!==e?e:""}):r.a.createElement("div",null),r.a.createElement(M.a,null,r.a.createElement(Wo,{onRowClick:function(e){return a.push("".concat(t).concat(e))}})),r.a.createElement(Xe.a,{style:{padding:15,marginBottom:5}},r.a.createElement(G.a,{variant:"h6"},"Filters"),r.a.createElement(ce.a,{style:{padding:5,alignItems:"flex-end",display:"flex"}},r.a.createElement(Io,{onChange:function(e){return O(e)},value:y}))),r.a.createElement(Nt.a,{tableRef:d,title:"Your Jobs",options:{pageSize:parseInt((null===u||void 0===u?void 0:u.get("size"))+"")||20,headerStyle:{fontWeight:700},actionsColumnIndex:-1,selection:!0,sorting:!0},onRowClick:function(e,a){var n=a.id;["td","TD"].includes(e.target.tagName)&&window.open("".concat(t).concat(n))},columns:[{title:"JobId",field:"id"},{title:"Video Template",sorting:!1,field:"videoTemplate.title"},{title:"Version",sorting:!1,searchable:!1,render:function(e){var t,a,n,o=e.videoTemplate,i=e.idVersion;return r.a.createElement("span",null,null!==(t=null===o||void 0===o||null===(a=o.versions)||void 0===a||null===(n=a.find((function(e){return(null===e||void 0===e?void 0:e.id)===i})))||void 0===n?void 0:n.title)&&void 0!==t?t:"")}},{title:"Render Time",field:"renderTime",sorting:!1,searchable:!1,render:function(e){var t=e.renderTime,a=e.id,n=e.timeline;return r.a.createElement(A,{renderTime:t,id:a,timeline:n})}},{searchable:!1,title:"Last Updated",field:"dateUpdated",type:"datetime",defaultSort:"desc",render:function(e){var t=e.dateUpdated;return r.a.createElement("span",null,Gt.a(new Date(t)))}},{searchable:!1,title:"Created At",field:"dateCreated",type:"datetime",render:function(e){var t=e.dateCreated;return r.a.createElement("span",null,Gt.a(new Date(t)))}},{searchable:!1,title:"source",render:function(e){var t=e.sourceCreatedBy,a=void 0===t?"":t;return r.a.createElement($a.a,{TransitionComponent:Un.a,title:"api"===(a||"api")?"Created using API":"Created from buzzle"},r.a.createElement(w.a,{size:"small",label:a||"api",style:{fontWeight:700,background:Vo(a||"api"),color:"white",textTransform:"uppercase"}}))}},{searchable:!1,title:"State",field:"state",render:function(e){var t=e.state,a=e.failureReason;return"error"===t?r.a.createElement($a.a,{TransitionComponent:Un.a,title:a||"Reason not given"},r.a.createElement(w.a,{size:"small",label:t,style:{fontWeight:700,background:Go(t),color:"white",textTransform:"capitalize"}})):r.a.createElement(w.a,{size:"small",label:t,style:{fontWeight:700,background:Go(t),color:"white",textTransform:"capitalize"}})}},{searchable:!1,title:"Render Actions",render:function(e){var t=e.actions,a=t.postrender,n=void 0===a?[]:a;t.prerender;return r.a.createElement("div",null,null===n||void 0===n?void 0:n.map((function(e){var t=e.module;return"buzzle-action-merge-videos"===t?r.a.createElement($a.a,{title:"Merge Video"},r.a.createElement(go.a,{color:"disabled"})):"buzzle-action-add-audio"===t?r.a.createElement($a.a,{title:"Add Audio"},r.a.createElement(Oo.a,{color:"disabled"})):"buzzle-action-watermark"===t?r.a.createElement($a.a,{title:"Watermark action"},r.a.createElement(Do.a,{color:"disabled"})):r.a.createElement("div",null)})))}},{searchable:!1,title:"Outputs",render:function(e){var t=e.output,a=void 0===t?[]:t;return r.a.createElement("span",null,a.length)}}],localization:{body:{emptyDataSourceMessage:r.a.createElement(G.a,null,"No Data to display")}},data:function(e){var t=e.page,n=void 0===t?0:t,r=e.pageSize,l=void 0===r?20:r,c=e.search,s=void 0===c?null:c,u=e.orderBy,d=(u=void 0===u?{}:u).field,m=void 0===d?"dateUpdated":d,p=e.orderDirection,v=void 0===p?"asc":p;return a.push("?page=".concat(n+1,"&size=").concat(l).concat(s?"searchQuery="+s:""),Object(h.a)({},o)),s?{data:[],page:1,totalCount:0}:i.getAll(n+1,l,x||"",m,v).then((function(e){var t=e.data,r=void 0===t?[]:t,c=e.count;return 0===(null===r||void 0===r?void 0:r.length)&&c?(a.push("?page=".concat(1,"&size=",l).concat(s?"searchQuery="+s:""),Object(h.a)({},o)),i.getAll(1,l,x||"",m,v).then((function(e){var t=e.data;return{data:void 0===t?[]:t,page:0,totalCount:e.count}})).catch((function(e){return _(e),a.push("?page=".concat(1,"&size=",l).concat(s?"searchQuery="+s:""),Object(h.a)({},o)),{data:[],page:0,totalCount:0}}))):{data:r,page:n,totalCount:c}})).catch((function(e){return _(e),a.push("?page=".concat(1,"&size=",l).concat(s?"searchQuery="+s:""),Object(h.a)({},o)),{data:[],page:0,totalCount:0}}))},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:C},{icon:function(){return r.a.createElement(ho.a,null)},tooltip:"Duplicate Job",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n,r,o,l,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.actions,r=a.data,o=a.idVideoTemplate,l=a.idVersion,c=a.renderPrefs,e.prev=1,e.next=4,i.create({actions:n,data:r,idVideoTemplate:o,idVersion:l,renderPrefs:c});case 4:C(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),_(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),position:"row"},{icon:function(){return r.a.createElement(Rr.a,null)},tooltip:"Restart Job with priority",position:"row",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.id,a.data,a.actions,r=a.renderPrefs,void 0===r?{}:r,e.prev=1,e.next=4,i.update(n,{state:"created",extra:{forceRerender:!0}},{priority:5});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),_(e.t0);case 9:d.current&&d.current.onQueryChange();case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{icon:"repeat",tooltip:"Restart Job",position:"row",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.id,a.data,a.actions,r=a.renderPrefs,void 0===r?{}:r,e.prev=1,e.next=4,i.update(n,{state:"created",extra:{forceRerender:!0}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),_(e.t0);case 9:d.current&&d.current.onQueryChange();case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{icon:"code",tooltip:"View/Edit JSON",position:"row",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(Object(h.a)({},a));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{icon:"delete",tooltip:"Delete Job",position:"row",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure, you want to delete")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,i.delete(a.id);case 6:d.current&&d.current.onQueryChange(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),_(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,a){return e.apply(this,arguments)}}()},{icon:"repeat",tooltip:"Restart All Selected Jobs",position:"toolbarOnSelect",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{icon:"delete",tooltip:"Delete All Selected Jobs",position:"toolbarOnSelect",onClick:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure, you want to delete")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,T(a);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]}),null!==k&&r.a.createElement(Wn,{json:k,onSubmit:P,onClose:function(){return S(null)}}))},Vo=function(e){switch(e){case"api":return"#ffa502";default:return"#3742fa"}},Go=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(e.toLowerCase()){case"finished":return"#4caf50";case"error":return"#f44336";case"started":return"#ffa502";case"rendering":return"linear-gradient(90deg, #ffa502 ".concat(t,"%, grey ").concat(t,"%)");default:return"grey"}},qo=function(e,t){return t.map((function(t,a){return"".concat(0===a?"":"&").concat(e,"[]=").concat(t)})).toString().replace(/,/g,"")},Jo=function(e){if(!e)return null;var t=e.startDate,a=void 0===t?0:t,n=e.endDate,r=void 0===n?0:n,o=e.idVideoTemplates,i=void 0===o?[]:o,l=e.states,c=void 0===l?[]:l;return"".concat(a?"dateUpdated=>=".concat(a,"&").concat(r?"dateUpdated=<=".concat(r||a,"&"):""):"").concat(0!==i.length?qo("idVideoTemplate",i.map((function(e){return e.id})))+"&":"").concat(0!==c.length?qo("state",c):"")},Ho=function(){var e=Object(b.j)().path;return r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"".concat(e,"/"),exact:!0,render:function(e){return r.a.createElement(Ht,{props:e,component:Ko,title:"Jobs"})}}),r.a.createElement(b.b,{path:"".concat(e,"/:id"),render:function(e){return r.a.createElement(Ht,{props:e,component:bo,title:"Job details"})}}))},Yo=Object(E.a)((function(e){return Object(g.a)({root:{display:"flex",width:"100%",height:"100%"},toolbar:Object(h.a)({display:"flex"},e.mixins.toolbar),content:{width:"100%",height:"100%",padding:e.spacing(3)}})})),Zo=function(){var e=Object(b.j)(),t=e.path,a=e.url,n=Yo(),o=[{text:"Analytics",icon:r.a.createElement(S.a,null),to:"".concat(a),allowedRoles:"*"},{text:"Video Templates",icon:r.a.createElement(y.a,null),to:"".concat(a,"/videoTemplates"),allowedRoles:"*"},{text:"Jobs",icon:r.a.createElement(O.a,null),to:"".concat(a,"/jobs"),allowedRoles:"*"},{text:"Settings",icon:r.a.createElement(j.a,null),to:"".concat(a,"/settings"),allowedRoles:"*"},{text:"Users",icon:r.a.createElement(D.a,null),to:"".concat(a,"/users"),allowedRoles:["Admin"]}];return r.a.createElement("div",{className:n.root},r.a.createElement(Ye,{items:o}),r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"".concat(t,"/"),exact:!0,render:function(e){return r.a.createElement(Ht,{props:e,component:ft,title:""})}}),r.a.createElement(Ze,{path:"".concat(t,"/settings"),allowedRoles:"*",render:function(e){return r.a.createElement(Ht,{props:e,component:Ut,title:"Settings"})}}),r.a.createElement(Ze,{path:"".concat(t,"/videoTemplates"),allowedRoles:"*",render:function(e){return r.a.createElement(Ht,{props:e,component:Dr,title:"Video Templates"})}}),r.a.createElement(Ze,{path:"".concat(t,"/jobs"),allowedRoles:"*",render:function(e){return r.a.createElement(Ht,{props:e,component:Ho,title:"Jobs"})}}),r.a.createElement(Ze,{path:"".concat(t,"/users"),allowedRoles:["Admin"],render:function(e){return r.a.createElement(Ht,{props:e,component:Yt,title:"Users"})}}),r.a.createElement(b.a,{to:"/NotFound"}))))},Xo=a(673),Qo=a.n(Xo),$o=a(674),ei=a.n($o),ti=function(e){var t=e.mt,a=p(),n=Object(l.a)(a,1)[0];return r.a.createElement(M.a,{style:{marginTop:t||10,textAlign:"center",paddingTop:30,paddingBottom:30,bottom:32,width:"100%"}},r.a.createElement("img",{style:{height:36},src:"light"===n?Qo.a:ei.a}),r.a.createElement(G.a,{style:{fontSize:12,fontWeight:700}},"Copyright \xa9 2020 All Rights Reserved."))},ai=a(1462),ni=a(469),ri=a.n(ni),oi=Object(E.a)({hoverHighlight:{backgroundImage:"linear-gradient(transparent calc(15% - 5px), #394afa 5px)",backgroundSize:0,backgroundRepeat:"no-repeat",display:"inline",transition:"0.5s ease","-webkit-transition":"0.5s ease","&:hover":{color:"white",backgroundSize:"100%"}},backButton:{marginTop:10},hoverUnderline:{backgroundImage:"linear-gradient(transparent calc(100% - 5px), #394afa 5px)",backgroundSize:0,backgroundRepeat:"no-repeat",display:"inline",transition:"0.5s ease","-webkit-transition":"0.5s ease","&:hover":{backgroundSize:"100%"}}}),ii=function(){Object(ai.a)().t;var e=Object(f.b)(),t=e.user,a=e.isUserLoadingFromFirebase;oi(),Object(b.g)();return t&&!a?r.a.createElement(b.a,{to:"/home"}):r.a.createElement(b.a,{to:"/login"})},li=a(675),ci=a.n(li),si=a(676),ui=a.n(si),di=Object(E.a)({hoverHighlight:{backgroundImage:"linear-gradient(transparent calc(15% - 5px), #394afa 5px)",backgroundSize:0,backgroundRepeat:"no-repeat",display:"inline",transition:"0.5s ease","-webkit-transition":"0.5s ease","&:hover":{color:"white",backgroundSize:"100%"}},hoverUnderline:{backgroundImage:"linear-gradient(transparent calc(100% - 5px), #394afa 5px)",backgroundSize:0,backgroundRepeat:"no-repeat",display:"inline",transition:"0.5s ease","-webkit-transition":"0.5s ease","&:hover":{backgroundSize:"100%"}},logo:{marginBottom:16,fontWeight:800,fontFamily:"Poppins"},heightInherit:{height:"inherit"},viewportHeight:{height:"90vh"},background:{height:"100%",width:"200%",position:"absolute",top:0,left:"-50%",zIndex:-999},whiteText:{color:"white"},whiteBg:{backgroundColor:"white"}});var mi=function(){var e=Object(f.b)().user,t=Object(ai.a)().t,a=di();return e?r.a.createElement(b.a,{to:"/home"}):r.a.createElement(ce.a,{className:a.heightInherit,maxWidth:"md"},r.a.createElement(kr.a,{container:!0,direction:"row",justify:"center",alignItems:"center",className:a.viewportHeight},r.a.createElement(kr.a,{md:6,sm:6,item:!0,style:{flex:1,padding:"5%"}},r.a.createElement("img",{src:ci.a})),r.a.createElement(kr.a,{md:6,sm:6,item:!0},r.a.createElement(M.a,{mb:4,p:4},r.a.createElement(G.a,{variant:"h1",className:a.logo},r.a.createElement("span",{className:a.hoverHighlight},"Buzzle!")),r.a.createElement(M.a,{mt:2},r.a.createElement(G.a,null,r.a.createElement("span",{className:a.hoverUnderline},t("welcome"),"\ud83e\udd73"))),r.a.createElement(M.a,{mt:6},r.a.createElement(M.a,{display:"inline-block",m:1},r.a.createElement(be.a,{component:ae.b,to:"/login",color:"primary",variant:"contained"},"Get Started")))))),r.a.createElement(kr.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{position:"relative"}},r.a.createElement(M.a,{bgcolor:"primary.main",className:a.background}),r.a.createElement(kr.a,{md:6,sm:6,item:!0},r.a.createElement(M.a,{mb:4,p:4},r.a.createElement(M.a,{mt:2},r.a.createElement(G.a,{className:a.whiteText},r.a.createElement("span",{className:a.hoverUnderline},t("welcome")))),r.a.createElement(M.a,{mt:6},r.a.createElement(M.a,{display:"inline-block",m:1},r.a.createElement(be.a,{component:ae.b,to:"/login",className:a.whiteBg,variant:"contained"},"Get Started"))))),r.a.createElement(kr.a,{md:6,sm:6,item:!0,style:{flex:1,padding:"5%"}},r.a.createElement("img",{src:ri.a}))),r.a.createElement(kr.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(kr.a,{md:6,sm:6,item:!0,style:{flex:1,padding:"5%"}},r.a.createElement("img",{src:ui.a})),r.a.createElement(kr.a,{md:6,sm:6,item:!0},r.a.createElement(M.a,{mb:4,p:4},r.a.createElement(M.a,{mt:2},r.a.createElement(G.a,null,r.a.createElement("span",{className:a.hoverUnderline},t("welcome"),"\ud83e\udd73")))))),r.a.createElement(ti,null))},pi=function(e){var t,a=e.version,n=void 0===a?{}:a,o=e.onSubmitJob,i=function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("triggered submit",t),o(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=null!==(t=null===n||void 0===n?void 0:n.fields)&&void 0!==t?t:[],c={};l.map((function(e){return c[e.key]=function(e,t,a){try{var n={string:je.d().matches(/^[a-zA-Z0-9(&!/'":.\-)\s]*$/,"Invalid value, not allowed"),image:je.d()}[e];return Object.keys(t).map((function(e){switch(e){case"required":n=n.required("".concat(a," is required"));break;case"maxLength":n=n.max(parseInt(t[e],10))}})),n}catch(r){console.error(r)}}(e.type,e.constraints,e.label)}));var s={string:function(e){return r.a.createElement(se.a,{style:{flex:1},onChange:null===e||void 0===e?void 0:e.handleChange,value:null===e||void 0===e?void 0:e.value,placeholder:null===e||void 0===e?void 0:e.placeholder,maxLength:null===e||void 0===e?void 0:e.maxLength,readOnly:null===e||void 0===e?void 0:e.readonly,error:(null===e||void 0===e?void 0:e.touched)&&Boolean(null===e||void 0===e?void 0:e.error),helperText:(null===e||void 0===e?void 0:e.touched)&&e.error})},image:function(e){return r.a.createElement(Da.a,{value:null===e||void 0===e?void 0:e.value,cropEnabled:!0,height:null===e||void 0===e?void 0:e.height,width:null===e||void 0===e?void 0:e.width,onChange:function(t){return null===e||void 0===e?void 0:e.setFieldValue(null===e||void 0===e?void 0:e.key,t)},uploadDirectory:"jobImages",onError:null,name:(null===e||void 0===e?void 0:e.key)+n.id})}},u=je.c().shape(c),d=Object(Oe.a)({initialValues:Object.assign.apply(Object,[{}].concat(Object(Qt.a)(l.map((function(e){return Object(x.a)({},e.key,"")}))))),onSubmit:i,validationSchema:u}),m=d.handleSubmit,p=d.handleChange,v=d.values,b=d.touched,f=d.errors,_=d.setFieldTouched,E=d.setFieldValue;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:m},l.map((function(e){var t;return r.a.createElement(M.a,{key:e.key},r.a.createElement(G.a,{style:{flex:1},display:"block"},e.label),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flex:1}},s[e.type](Object(h.a)({name:null===e||void 0===e?void 0:e.key,extension:null===e||void 0===e||null===(t=e.rendererData)||void 0===t?void 0:t.extension,key:null===e||void 0===e?void 0:e.key,value:v[null===e||void 0===e?void 0:e.key],handleChange:p(null===e||void 0===e?void 0:e.key),setFieldValue:E,setFieldTouched:_,touched:b[null===e||void 0===e?void 0:e.key],label:null===e||void 0===e?void 0:e.label,placeholder:null===e||void 0===e?void 0:e.placeholder,height:null===e||void 0===e?void 0:e.constraints.height,versionId:n.id,error:f[null===e||void 0===e?void 0:e.key],width:null===e||void 0===e?void 0:e.constraints.width},null===e||void 0===e?void 0:e.constraints))))})),r.a.createElement(be.a,{variant:"contained",style:{marginBottom:20},type:"submit"},"Save"),r.a.createElement("br",null)))},vi=a(465),bi=je.c().shape({versions:je.a().required("Atleast 1 one version should be selected!").min(1)}),fi=function(e){var t=Object(b.h)().state,a=(t=void 0===t?{}:t).videoTemplate,o=t.versions,i=Object(b.g)(),c=Object(dt.b)().Job,s=Object(te.b)().enqueueSnackbar,u=Object(n.useState)([]),d=Object(l.a)(u,2),m=d[0],p=d[1],v=Object(Oe.a)({initialValues:{versions:[],dataFillType:"maxLength",incrementFrame:1,renderSettings:"h264",settingsTemplate:"half"},validationSchema:bi,onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){var n,r,o,l,u,d,p,v,b;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.settingsTemplate,r=t.renderSettings,o=t.incrementFrame,l=void 0===o?1:o,u=t.versions,d=t.dataFillType,p=void 0===d?"maxLength":d,!m.length){e.next=7;break}return console.log("its a manual job",m,a),e.next=6,Promise.all(m.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){var o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.keys(t)[0],e.next=3,c.create({idVideoTemplate:null!==(o=null===a||void 0===a?void 0:a.id)&&void 0!==o?o:"",idVersion:i,renderPrefs:{settingsTemplate:n,incrementFrame:l,renderSettings:r},data:t[i]});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",i.push("/home/jobs"));case 7:return v=Yn((null===a||void 0===a?void 0:a.id)||"",null===u||void 0===u?void 0:u.map((function(e){var t,r;return{settingsTemplate:n,incrementFrame:l,fields:(null===a||void 0===a||null===(t=a.versions)||void 0===t||null===(r=t.find((function(t){var a=t.id;return e===(void 0===a?"":a)})))||void 0===r?void 0:r.fields)||[],id:e,dataFillType:p}}))),e.next=10,Promise.all(null===v||void 0===v?void 0:v.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.create({data:null===t||void 0===t?void 0:t.data,idVersion:null===t||void 0===t?void 0:t.idVersion,idVideoTemplate:null===t||void 0===t?void 0:t.idVideoTemplate,renderPrefs:null===t||void 0===t?void 0:t.renderPrefs});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:i.push("/home/jobs",{message:"Video renders created successfully, Once finished you can continue to publish the template section."}),i.push("/home/jobs"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),s(null===(b=e.t0)||void 0===b?void 0:b.message,{variant:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()}),f=v.handleChange,_=v.handleBlur,h=v.handleSubmit,E=v.values,g=v.errors,y=v.touched,O=v.setFieldValue,j=v.setFieldTouched,D=v.isSubmitting;return r.a.createElement("div",null,r.a.createElement(M.a,{as:"form",onSubmit:h,p:4,mb:2},r.a.createElement(ue.a,{required:!0,error:!(!y.versions||!g.versions),component:"fieldset"},r.a.createElement(na.a,{component:"legend"},"Choose Versions"),r.a.createElement(vi.a,{row:!0},null===o||void 0===o?void 0:o.map((function(e,t){var a,n,i;return r.a.createElement(oa.a,{key:t,control:r.a.createElement(So.a,{checked:Boolean(null!==(a=null===(n=E.versions)||void 0===n||null===(i=n.filter((function(t){var a;return(null!==(a=null===e||void 0===e?void 0:e.id)&&void 0!==a?a:"")===t})))||void 0===i?void 0:i.length)&&void 0!==a&&a),onChange:function(t){t.target.checked;return function(e,t){var a,n,r;(j("versions",!0),Boolean(null!==(a=null===(n=E.versions.filter((function(t){return t===e})))||void 0===n?void 0:n.length)&&void 0!==a&&a))?O("versions",E.versions.filter((function(t){return t!==e}))):O("versions",[].concat(Object(Qt.a)(E.versions),[null===o||void 0===o||null===(r=o.find((function(t){return t.id===e})))||void 0===r?void 0:r.id]))}(null===e||void 0===e?void 0:e.id)}}),label:null===e||void 0===e?void 0:e.title})}))),r.a.createElement(ve.a,{error:!(!y.versions||!g.versions)},g.versions)),r.a.createElement("br",null),r.a.createElement(ue.a,{component:"fieldset"},r.a.createElement(na.a,{component:"legend"},"Data Fill Type"),r.a.createElement(ra.a,{"aria-label":"dataFillType",name:"dataFillType",value:E.dataFillType,onChange:f},r.a.createElement(oa.a,{value:"maxLength",control:r.a.createElement(ia.a,null),label:"Max Length"}),r.a.createElement(oa.a,{value:"manual",control:r.a.createElement(ia.a,null),label:"Manual"}))),"manual"===E.dataFillType&&void 0!==a?E.versions.map((function(e){var t;return r.a.createElement(pi,{edit:!1,version:null===a||void 0===a||null===(t=a.versions)||void 0===t?void 0:t.find((function(t){return t.id===e})),onSubmitJob:function(t){return a=t,n=e,void p([].concat(Object(Qt.a)(m),[Object(x.a)({},n,a)]));var a,n}})})):r.a.createElement("div",null),r.a.createElement(ue.a,{fullWidth:!0,margin:"dense",variant:"outlined"},r.a.createElement(de.a,{htmlFor:"settingsTemplate"},"Output Module"),r.a.createElement(Ga.a,{name:"settingsTemplate",value:E.settingsTemplate,margin:"dense",onBlur:_,onChange:f,error:y.settingsTemplate&&!!g.settingsTemplate,fullWidth:!0,placeholder:"Settings Template",label:"Output Module",variant:"outlined",inputProps:{name:"settingsTemplate",id:"settingsTemplate"}},r.a.createElement(T.a,{"aria-label":"None",value:""}),r.a.createElement(T.a,{value:"half"},"Half"),r.a.createElement(T.a,{value:"full"},"Full"))),r.a.createElement(se.a,{name:"incrementFrame",margin:"dense",value:E.incrementFrame,label:"Frame Increment",onBlur:_,onChange:f,error:y.incrementFrame&&!!g.incrementFrame,fullWidth:!0,type:"number",variant:"outlined",placeholder:"Frame Increment"}),r.a.createElement(M.a,{mb:2},r.a.createElement(be.a,{disabled:!!D,color:"primary",variant:"contained",onClick:function(){return h()},children:"Submit"}))))};var _i=function(){var e=new URLSearchParams(Object(b.h)().search),t=Object(b.h)().state,a=void 0===t?{}:t,n=Object(f.b)(),o=n.user,i=n.isUserLoadingFromFirebase,l=(null===a||void 0===a?void 0:a.email)||e.get("email")||"",c=(null===a||void 0===a?void 0:a.message)||e.get("message")||"";return o&&!i?r.a.createElement(b.a,{to:"/home"}):r.a.createElement(M.a,{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement(G.a,{variant:"h4",style:{textAlign:"center",marginBottom:30,fontWeight:800,fontSize:"2.5rem",fontFamily:"Poppins"}},"Buzzle!"),r.a.createElement(Xe.a,{style:{marginLeft:10,marginRight:10}},r.a.createElement(Ce,{message:c,email:l})),r.a.createElement(ti,{mt:5}))},hi=a(1410),Ei=function(){var e=p(),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(f.b)(),c=i.isUserLoadingFromFirebase,s=(i.user,Object(n.useMemo)((function(){return"light"==a?d:u}),[a]));return!o||c?r.a.createElement(M.a,{style:{height:"100%",margin:0,display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(fe.a,{color:"primary"})):r.a.createElement(M.a,{style:{height:"100%",margin:0}},r.a.createElement(hi.a,{theme:s},r.a.createElement(ae.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(Ht,{props:e,component:mi,title:""})}}),r.a.createElement(b.b,{path:"/login",exact:!0,render:function(e){return r.a.createElement(Ht,{props:e,component:_i,title:"Login"})}}),r.a.createElement(b.b,{path:"/testJob",exact:!0,render:function(e){return r.a.createElement(Ht,{props:e,component:fi,title:"Test Job"})}}),r.a.createElement(_,{path:"/home",render:function(e){return r.a.createElement(Ht,{props:e,component:Zo,title:"Home"})}}),r.a.createElement(b.b,{path:"*",render:function(e){return r.a.createElement(Ht,{props:e,component:ii,title:"404 - Not Found"})}})))))},gi=function(){return r.a.createElement(v,null,r.a.createElement($n.a,null,r.a.createElement(te.a,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(dt.a,null,r.a.createElement(f.a,null,r.a.createElement(Ae,null,r.a.createElement(Ei,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var yi=a(478),Oi=a(310),ji=a(677),Di=a(679);yi.a.use(ji.a).use(Di.a).use(Oi.e).init({fallbackLng:"en",debug:!0,whitelist:["en"],keySeparator:!1,interpolation:{escapeValue:!1}});yi.a;i.a.render(r.a.createElement(n.Suspense,{fallback:r.a.createElement(M.a,{style:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"}},r.a.createElement(fe.a,{color:"primary",size:25}))},r.a.createElement(r.a.StrictMode,null,r.a.createElement(qe,null,r.a.createElement(gi,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},165:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return p}));var n=a(4),r=a.n(n),o=a(8),i=function(e){return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.src=e}))};function l(e){return e*Math.PI/180}var c=function(e){var t=e.width,a=e.height;return Math.sqrt(t*t+a*a)};function s(e,t){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(r.a.mark((function e(t,a){var n,o,c,s,u,d,m,p,v,b,f,_,h,E=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.length>2&&void 0!==E[2]?E[2]:0,o=E.length>3?E[3]:void 0,c=o.width,s=void 0===c?0:c,u=o.height,d=void 0===u?0:u,e.next=4,i(t);case 4:return m=e.sent,p=document.createElement("canvas"),v=p.getContext("2d"),s=parseInt("".concat(s||0)),d=parseInt("".concat(d||0)),b=2*Math.max(m.width,m.height),p.width=b,p.height=b,v.beginPath(),v.rect(0,0,p.width,p.height),v.fillStyle="black",v.fill(),v.translate(b/2,b/2),v.rotate(l(n)),v.translate(-b/2,-b/2),v.drawImage(m,b/2-.5*m.width,b/2-.5*m.height),f=v.getImageData(0,0,b,b),p.width=a.width,p.height=a.height,v.beginPath(),v.rect(0,0,p.width,p.height),v.fillStyle="black",v.fill(),v.putImageData(f,0-b/2+.5*m.width-a.x,0-b/2+.5*m.height-a.y),_=document.createElement("canvas"),h=_.getContext("2d"),_.width=s,_.height=d,h.beginPath(),h.rect(0,0,s,d),h.fillStyle="black",h.fill(),h.drawImage(p,0,0,s,d),e.abrupt("return",_.toDataURL("image/png",1));case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return new Promise((function(t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)}),!1),a.readAsDataURL(e)}))}var m={3:180,6:90,8:-90};function p(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(r.a.mark((function e(t){var a,n,o,l,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:0,e.next=3,i(t);case 3:return n=e.sent,o=document.createElement("canvas"),l=o.getContext("2d"),90===a||-90===a||270===a||-270===a?(o.width=n.height,o.height=n.width):(o.width=n.width,o.height=n.height),l.translate(o.width/2,o.height/2),l.rotate(a*Math.PI/180),l.drawImage(n,-n.width/2,-n.height/2),e.abrupt("return",new Promise((function(e){o.toBlob((function(t){e(URL.createObjectURL(t))}),"image/jpeg")})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return _}));var n=a(7),r=a(5),o=a(4),i=a.n(o),l=a(8),c=a(39),s=a(131),u=(a(531),a(0)),d=a.n(u),m=a(33),p=a(57),v=a(44),b=(new s.a.auth.GoogleAuthProvider,{signInWithPassword:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",console.log("Email/Password Sign In!"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),forgotPassword:function(){return console.log("Forgot Password Sign In!")},signUpWithEmailPassword:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",console.log("Signup function!"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),refreshUser:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",console.log("Change Password Sign In!"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signOut:function(){return console.log("Sign out!")},checkUserExist:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),verifyEmail:function(){return console.log("send email verification")},user:null,initializing:!1,isUserLoading:!0,token:"",isAdmin:!1,isUserLoadingFromFirebase:!0}),f=Object(u.createContext)(b);function _(){var e=Object(u.useContext)(f);return e||console.log("useAuth must be used within a AuthProvider"),e}function h(e){var t=Object(u.useState)(""),a=Object(r.a)(t,2),o=a[0],s=a[1],b=Object(p.g)(),_=Object(v.b)().enqueueSnackbar,h=Object(m.b)(),E=h.User,g=h.isAPIReady,y=h.token,O=h.setToken,j=Object(u.useState)(null),D=Object(r.a)(j,2),k=D[0],S=D[1],x=Object(u.useState)(!0),w=Object(r.a)(x,2),C=w[0],T=w[1],P=Object(u.useState)(!0),A=Object(r.a)(P,2),R=A[0],M=A[1],I=Object(u.useState)(!1),L=Object(r.a)(I,2),U=L[0],B=L[1],z=Object(u.useState)(null),F=Object(r.a)(z,2),W=(F[0],F[1]),N=Object(u.useState)(!0),K=Object(r.a)(N,2),V=K[0],G=K[1],q=Object(u.useState)(""),J=Object(r.a)(q,2),H=J[0],Y=J[1],Z=function(e){M(!0),e?e.getIdToken(!0).then((function(t){s(t),S(e),B(!1),T(!1)})).catch():(s(""),S(null),M(!1),T(!1))};Object(u.useEffect)((function(){y!==o&&O(o)}),[o,y]),Object(u.useEffect)((function(){var e;g&&k&&R&&(V?E.get(null===k||void 0===k?void 0:k.uid).then((function(e){M(!1),S(c.a.currentUser?Object(n.a)(Object(n.a)({},k),e):null)})).catch((function(e){M(!1),W(e),_("Failed to load user",{variant:"error"})})):E.create({name:(null===(e=c.a.currentUser)||void 0===e?void 0:e.displayName)||H}).then((function(e){var t=e.data;M(!1),G(!0),S(c.a.currentUser?Object(n.a)(Object(n.a)({},k),t):null)})).catch((function(e){M(!1),_("Failed to create user",{variant:"error"}),W(e)})))}),[V,R,k,E,g,H]),Object(u.useEffect)((function(){return c.a.onAuthStateChanged(Z)}),[]);var X=Object(u.useMemo)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),e.next=4,c.a.signInWithEmailAndPassword(t,a);case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),B(!1),new Error(null===(n=e.t0)||void 0===n?void 0:n.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.signOut();case 3:b.push("/login"),S(null),s(""),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,c.a.signOut();case 12:S(null),s("");case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===k||void 0===k?void 0:k.uid)||t){e.next=10;break}return M(!0),e.next=5,E.get(null===k||void 0===k?void 0:k.uid);case 5:a=e.sent,M(!1),S(c.a.currentUser?Object(n.a)(Object(n.a)({},c.a.currentUser||{}),a):null),e.next=11;break;case 10:S(c.a.currentUser?Object(n.a)(Object(n.a)({},c.a.currentUser||{}),t):null);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),_("Failed to refresh",{variant:"error"}),M(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get(t||"");case 3:return G(!0),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),G(!1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.sendPasswordResetEmail(t,{url:"".concat(window.location.origin,"/login?email=").concat(t)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=c.a.currentUser)||void 0===a?void 0:a.sendEmailVerification({url:"".concat(window.location.origin,"/login")});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{signInWithPassword:e,signOut:t,isUserLoading:R,refreshUser:a,forgotPassword:u,signUpWithEmailPassword:function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.createUserWithEmailAndPassword(t,a);case 2:return r=e.sent,o=r.user,Y(n),e.next=7,null===o||void 0===o?void 0:o.updateProfile({displayName:n});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),user:k,initializing:U,checkUserExist:r,isUserLoadingFromFirebase:C,token:o,verifyEmail:d,isAdmin:"admin"===(null===k||void 0===k?void 0:k.role)}}),[k,o,R,C,U]);return d.a.createElement(f.Provider,Object.assign({value:X},e))}},33:function(e,t,a){"use strict";a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return y}));var n=a(5),r=a(7),o=a(0),i=a.n(o),l=a(4),c=a.n(l),s=a(8),u=function(){var e=Object(s.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if((n=e.sent).ok){e.next=9;break}return e.t0=Error,e.next=7,n.json();case 7:throw e.t1=e.sent.message,new e.t0(e.t1);case 9:return e.next=11,n.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")};function m(e,t){return{getAll:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o,i,l,s){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs?page=").concat(n,"&size=").concat(r,"&sortBy=").concat(i||"dateCreated","&orderBy=").concat(l||"desc","&").concat(o,"&").concat(d(s||{})),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i){return a.apply(this,arguments)}}(),get:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs/").concat(n,"?&").concat(r,"&").concat(d(o||{})),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),create:function(){var a=Object(s.a)(c.a.mark((function a(n){var o,i,l,s,m,p,v;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=n.actions,i=n.data,l=n.idVideoTemplate,s=n.idVersion,m=n.renderPrefs,p=n.extra,v=n.extraParams,a.abrupt("return",u("".concat(e,"/jobs").concat(v?"?".concat(d(v||{})):""),{method:"POST",headers:t,body:JSON.stringify(Object(r.a)({actions:o,data:i,idVideoTemplate:l,idVersion:s,renderPrefs:m},p?{extra:p}:{}))}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),update:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs/").concat(n,"?").concat(d(o)),{method:"PUT",headers:t,body:JSON.stringify(r)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),updateMultiple:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs?").concat(d(r)),{method:"PUT",headers:t,body:JSON.stringify(n)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),delete:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs/").concat(n,"?").concat(d(r||{})),{method:"DELETE",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),deleteMultiple:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs?").concat(d(r)),{method:"DELETE",headers:t,body:JSON.stringify(n)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),getStatus:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/jobs?").concat(n,"&").concat(d(r)),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}}function p(e,t){return{getAll:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/users?page=").concat(n,"&size=").concat(r,"&").concat(d(o||{})),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),get:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/users/").concat(n,"?").concat(d(r||{})),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),delete:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/users/").concat(n,"?").concat(d(o)),{method:"DELETE",headers:t,body:JSON.stringify(r)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),create:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/users?").concat(d(r)),{method:"POST",headers:t,body:JSON.stringify(n)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),update:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/users?").concat(d(r||{})),{method:"PUT",headers:t,body:JSON.stringify(n||{})}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),addTemplate:function(a,n){return u("".concat(e,"/users?").concat(d(n||{})),{method:"PUT",headers:t,body:JSON.stringify({guestTemplateUsed:a})})},removeTemplate:function(a,n){return u("".concat(e,"/users?").concat(d(n||{})),{method:"PUT",headers:t,body:JSON.stringify({guestTemplateUsedToBeRemoved:a})})}}}function v(e,t){return{jobsPerTemplate:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o,i){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/analytics?mode=").concat(o,"&dateUpdated=>=").concat(n.toISOString(),"&").concat(r?"dateUpdated=<=".concat(r.toISOString()||n.toISOString()):"","&").concat(d(i||{})),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n,r){return a.apply(this,arguments)}}()}}function b(e,t){return{video:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/renderTime/").concat(n,"?").concat(r,"&").concat(d(o||{})),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),instance:function(){var a=Object(s.a)(c.a.mark((function a(){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/status/instances"),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()}}function f(e,t){return{getAll:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o,i,l,s){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates?page=").concat(n,"&size=").concat(r,"&sortBy=").concat(i,"&orderBy=").concat(l,"&").concat(o,"&").concat(d(s)),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i){return a.apply(this,arguments)}}(),get:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates/").concat(n,"?").concat(r,"&").concat(d(o)),{method:"GET",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),create:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates?").concat(d(r)),{method:"POST",headers:t,body:JSON.stringify(n)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),update:function(){var a=Object(s.a)(c.a.mark((function a(n,r,o){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates/").concat(n,"?").concat(d(o)),{method:"PUT",headers:t,body:JSON.stringify(r)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),updateMany:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates?").concat(d(r)),{method:"PUT",headers:t,body:JSON.stringify(n)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),delete:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates/").concat(n,"?").concat(d(r)),{method:"DELETE",headers:t}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),deleteMany:function(){var a=Object(s.a)(c.a.mark((function a(n,r){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",u("".concat(e,"/videoTemplates?").concat(d(r)),{method:"DELETE",headers:t,body:JSON.stringify(n)}));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}}var _=a(39),h=function(e){var t,a=e.baseUrl,n=e.authToken,r={Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(n||(null===(t=_.a.currentUser)||void 0===t?void 0:t.getIdToken(!0)))};return{Job:m(a,r),Pricing:b(a,r),Analytics:v(a,r),User:p(a,r),VideoTemplate:f(a,r)}},E=a(103),g=Object(o.createContext)(Object(r.a)(Object(r.a)({},h({baseUrl:"https://api.buzzle.site",authToken:""})),{},{isAPIReady:!1,token:"",setToken:function(){return console.log("set token function")}}));function y(){var e=Object(o.useContext)(g);return e||console.log("useAPI must be used within a APIProvider"),e}function O(e){var t=Object(o.useState)(""),a=Object(n.a)(t,2),l=a[0],c=a[1],s=Object(E.b)().apiURL,u=Object(o.useState)(!!l),d=Object(n.a)(u,2),m=d[0],p=d[1],v=Object(o.useState)(h({baseUrl:s||"https://api.buzzle.site",authToken:l})),b=Object(n.a)(v,2),f=b[0],_=b[1];Object(o.useEffect)((function(){l&&(_(h({baseUrl:s||"https://api.buzzle.site",authToken:l})),p(!!l))}),[l,s]);var y=Object(o.useMemo)((function(){return Object(r.a)(Object(r.a)({},f),{},{isAPIReady:m,setToken:c,token:l})}),[f,m,l]);return i.a.createElement(g.Provider,Object.assign({value:y},e))}},39:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var n=a(131),r=(a(1365),a(531),a(1366),n.a.initializeApp({apiKey:"AIzaSyCN_zzGeAOOxiBScp_z8QrPLOVnJ1F27sQ",authDomain:"buzzle-3f88a.firebaseapp.com",projectId:"buzzle-3f88a",storageBucket:"buzzle-3f88a.appspot.com",messagingSenderId:"1005067748514",appId:"1:1005067748514:web:980845590b8edc48b1c3fb",measurementId:"G-DY2JRKP8ZV"}),n.a.auth()),o=n.a.remoteConfig();o.settings={minimumFetchIntervalMillis:0,fetchTimeoutMillis:6e3};var i=null;n.a.messaging.isSupported()&&((i=n.a.messaging()).usePublicVapidKey("BOfud4xtKcWRgYwHTN56ToeaFigYT2DGKXJryxhkwyLRqE2uGtRsDZotUMI5JiwLnMqFlC9TNt1p3jdcirF725U"),i.onMessage((function(e){console.log("payload",e)})))},441:function(e,t){},469:function(e,t,a){e.exports=a.p+"static/media/404.f4c82894.svg"},654:function(e,t,a){"use strict";var n=a(4),r=a.n(n),o=a(8),i=a(5),l=a(479),c=a(363),s=a(1378),u=a(1380),d=a(463),m=a(247),p=a(99),v=a(691),b=a(303),f=a(238),_=a(1385),h=a(687),E=a(688),g=a(165),y=a(0),O=a.n(y),j=a(681),D=O.a.forwardRef((function(e,t){return O.a.createElement(l.a,Object.assign({direction:"up",ref:t},e))})),k=Object(c.a)((function(e){return{appBar:{position:"relative",height:70},button:{position:"absolute",right:15}}})),S=window.innerHeight-100;t.a=function(e){var t,a,n=e.image,l=e.cropSize,c=e.setIsCropperOpen,x=e.onUpload,w=e.onCancel,C=k(),T=Object(y.useState)({x:0,y:0}),P=Object(i.a)(T,2),A=P[0],R=P[1],M=Object(y.useState)(1),I=Object(i.a)(M,2),L=I[0],U=I[1],B=Object(y.useState)(0),z=Object(i.a)(B,2),F=z[0],W=z[1],N=Object(y.useState)(.1),K=Object(i.a)(N,2),V=K[0],G=(K[1],Object(y.useState)(null)),q=Object(i.a)(G,2),J=q[0],H=q[1],Y=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,Object(g.c)(n,J,F,l);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=parseInt("".concat(null!==(t=null===l||void 0===l?void 0:l.width)&&void 0!==t?t:100),10)/parseInt("".concat(null!==(a=null===l||void 0===l?void 0:l.height)&&void 0!==a?a:100)),X=S,Q=Z*X;X=(Q=window.innerWidth-30<Q?window.innerWidth-30:Q)/Z,Object(y.useEffect)((function(){}),[]);return O.a.createElement(s.a,{open:!0,fullScreen:!0,TransitionComponent:D,onClose:function(){return c(!1)},"aria-labelledby":"form-dialog-title"},O.a.createElement(u.a,{className:C.appBar},O.a.createElement(d.a,null,O.a.createElement(m.a,{edge:"start",color:"inherit",onClick:w,"aria-label":"close"},O.a.createElement(_.a,null)),O.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:"auto"}}," ",O.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",width:200,marginTop:0,marginBottom:0,margin:20}},O.a.createElement(p.a,{id:"Zoom",gutterBottom:!0},"Zoom"),O.a.createElement(h.a,{style:{color:"white",fontSize:25,padding:5,paddingBottom:0,paddingTop:0}}),O.a.createElement(v.a,{style:{marginLeft:5,color:"white"},value:L,min:V,max:5,step:.1,"aria-labelledby":"Zoom",onChange:function(e,t){return U(t)}}),O.a.createElement(E.a,{color:"inherit",style:{fontSize:25,padding:5,paddingBottom:0,paddingTop:0}})),O.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",width:200,marginTop:0,marginBottom:0,margin:20}},O.a.createElement(p.a,{id:"Zoom",gutterBottom:!0},"Rotate"),O.a.createElement(h.a,{color:"inherit",style:{fontSize:25,padding:5,paddingBottom:0,paddingTop:0}}),O.a.createElement(v.a,{style:{marginLeft:5,color:"white"},value:F,min:0,max:360,step:1,"aria-labelledby":"Zoom",onChange:function(e,t){return W(t)}}),O.a.createElement(E.a,{color:"inherit",style:{fontSize:25,padding:5,paddingBottom:0,paddingTop:0}}))),O.a.createElement(b.a,{className:C.button,autoFocus:!0,color:"inherit",onClick:Y,children:"Upload"}))),O.a.createElement(f.a,{style:{position:"relative",background:"#333",height:window.innerHeight-70}},O.a.createElement(j.a,{image:n,crop:A,zoom:L,minZoom:V,maxZoom:5,onRotationChange:W,rotation:F,restrictPosition:!1,aspect:Z,cropSize:{width:Q,height:X},onCropChange:R,onCropComplete:function(e,t){H(t)},onZoomChange:U})))}},662:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52),D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_material_ui_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(184),_material_ui_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(204),_material_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(206),_material_ui_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(248),_material_ui_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(203),common_FileUploader__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(77),get_orientation__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(467),get_orientation__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(get_orientation__WEBPACK_IMPORTED_MODULE_10__);__webpack_exports__.a=function(_ref){var initialValue=_ref.initialValue,onSubmit=_ref.onSubmit,handleEdit=_ref.handleEdit,actionName=Object.keys(initialValue)[0],actionValue=initialValue[actionName],_useState=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("compress"===actionName?actionValue:{module:"buzzle-action-handbrake",preset:null,output:"encoded.mp4"}),_useState2=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState,2),compress=_useState2[0],setCompress=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("rotateAction"===actionName?actionValue:{module:"buzzle-action-video-orientation"}),_useState4=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState3,2),rotateAction=_useState4[0],setRotateAction=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("addWatermark"===actionName?actionValue:{module:"buzzle-action-watermark",watermark:null}),_useState6=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState5,2),addWatermark=_useState6[0],setAddWatermark=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("addThumbnail"===actionName?actionValue:{module:"buzzle-action-add-thumbnail",thumbnail:null,thumbnailDuration:1}),_useState8=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState7,2),addThumbnail=_useState8[0],setAddThumbnail=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("upload"===actionName?actionValue:{module:"buzzle-action-upload",input:"encoded.mp4",provider:"s3",params:{region:"us-east-1",bucket:"bulaava-assets",key:"outputs/".concat(Date.now(),".mp4"),acl:"public-read"}}),_useState10=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState9,2),upload=_useState10[0],setUpload=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("mergeVideos"===actionName?actionValue:{module:"buzzle-action-merge-videos",input2:""}),_useState12=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState11,2),mergeVideos=_useState12[0],setMergeVideos=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)("addAudio"===actionName?actionValue:{module:"buzzle-action-add-audio",audio:""}),_useState14=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState13,2),addAudio=_useState14[0],setAddAudio=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(null),_useState16=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState15,2),fileError=_useState16[0],setFileError=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(actionName),_useState18=Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState17,2),action=_useState18[0],setAction=_useState18[1];Object(react__WEBPACK_IMPORTED_MODULE_3__.useEffect)((function(){action&&handleEdit(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)({},action,eval(action)))}),[action]);var renderCompress=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{fullWidth:!0,margin:"dense",variant:"outlined"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{id:"property-select"},"Preset"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{labelId:"property-select",id:"property-select",onChange:function(e){var t,a;setCompress(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},compress),{},{preset:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value})),handleEdit({compress:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},compress),{},{preset:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})})},name:"property",value:compress.preset,placeholder:"Select Preset",label:"Preset"},presets.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{key:t,id:t,value:e,children:e,selected:compress.preset===e})})))),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.a,{fullWidth:!0,variant:"outlined",margin:"dense",value:compress.output,onChange:function(e){var t;setCompress(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},compress),{},{output:e.target.value})),handleEdit({compress:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},compress),{},{output:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value})})},type:"text",label:"Output",placeholder:"Enter Output filename"}))},renderUpload=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.a,{fullWidth:!0,variant:"outlined",margin:"dense",value:upload.input,onChange:function(e){var t;setUpload(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},upload),{},{input:e.target.value})),handleEdit({upload:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},upload),{},{input:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value})})},type:"text",label:"Input",placeholder:"Enter Input filename"}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.a,{fullWidth:!0,variant:"outlined",margin:"dense",value:upload.params.key,onChange:function(e){setUpload(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},upload),{},{params:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},upload.params),{},{key:e.target.value})})),handleEdit({upload:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},upload),{},{params:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},upload.params),{},{key:e.target.value})})})},type:"text",label:"S3 File Name",placeholder:"Enter filename",helperText:"use examplePath/ before the name for uploading inside the directory"}))},renderWatermark=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(common_FileUploader__WEBPACK_IMPORTED_MODULE_9__.a,{name:"watermarkFile",value:addWatermark.watermark,onError:function(e){return setFileError(e.message)},onChange:function(e){setAddWatermark(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addWatermark),{},{watermark:e})),handleEdit({addWatermark:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addWatermark),{},{watermark:e})})},accept:"image/*",uploadDirectory:"jobImages",label:"Watermark",onTouched:function(){return setFileError(null)},error:fileError,helperText:"Watermark should be transparent."}))},renderAddThumbnail=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.a,{fullWidth:!0,variant:"outlined",margin:"dense",value:addThumbnail.thumbnailDuration,onChange:function(e){var t;setAddThumbnail(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addThumbnail),{},{thumbnailDuration:e.target.value})),handleEdit({addThumbnail:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addThumbnail),{},{thumbnailDuration:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value})})},type:"text",label:"Thumbnail durationa in frames",placeholder:"Enter duration number"}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(common_FileUploader__WEBPACK_IMPORTED_MODULE_9__.a,{name:"thumbnailFile",value:addThumbnail.thumbnail,onError:function(e){return setFileError(e.message)},onChange:function(e){setAddThumbnail(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addThumbnail),{},{thumbnail:e})),handleEdit({addThumbnail:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addThumbnail),{},{thumbnail:e})})},uploadDirectory:"jobImages",accept:"image/*",label:"Thumbnail",onTouched:function(){return setFileError(null)},error:fileError,helperText:"Thumbnail would be resized to fit."}))},renderMergeVideos=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(common_FileUploader__WEBPACK_IMPORTED_MODULE_9__.a,{value:mergeVideos.input2,onError:function(e){return setFileError(e.message)},onChange:function(e){setMergeVideos(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},mergeVideos),{},{input2:e})),handleEdit({mergeVideos:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},mergeVideos),{},{input2:e})})},accept:"video/*",uploadDirectory:"jobImages",name:"input2",label:"Video File To be Merged",onTouched:function(){return setFileError(null)},error:fileError,helperText:"Choose Video to be merged"}))},renderRotateAction=function(){var e,t;return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{fullWidth:!0,margin:"dense",variant:"outlined"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{id:"property-select"},"Output Orientation"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{labelId:"orientation-select",id:"orientation-select",onChange:function(e){var t,a;setRotateAction(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},rotateAction),{},{orientation:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value})),handleEdit({rotateAction:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},rotateAction),{},{orientation:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})})},name:"orientation",value:null!==(e=null===rotateAction||void 0===rotateAction?void 0:rotateAction.orientation)&&void 0!==e?e:"portrait",placeholder:"Select Output Orientation",label:"Select Output Orientation"},["landscape","portrait"].map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{key:t,id:t,value:e,children:e.toUpperCase(),selected:rotateAction.orientation===e})})))),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{fullWidth:!0,margin:"dense",variant:"outlined"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{id:"transpose-select"},"Transpose option"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{labelId:"transpose-select",id:"transpose-select",onChange:function(e){var t,a;setRotateAction(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},rotateAction),{},{transpose:parseInt(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)})),handleEdit({rotateAction:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},rotateAction),{},{transpose:parseInt(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)})})},name:"orientation",value:null!==(t=null===rotateAction||void 0===rotateAction?void 0:rotateAction.transpose)&&void 0!==t?t:1,placeholder:"Select transpose",label:"Select transpose"},[{title:"90 Counter-CLockwise and Vertical Flip",value:0},{title:"90 Clockwise",value:1},{title:"90 Counter Clockwise",value:2},{title:"90 Clockwise and Vertical Flip",value:3}].map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{key:e.value,id:t,value:e.value,children:e.title,selected:rotateAction.transpose===e.value})})))))},renderAddAudio=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(common_FileUploader__WEBPACK_IMPORTED_MODULE_9__.a,{value:addAudio.audio,onError:function(e){return setFileError(e.message)},onChange:function(e){setAddAudio(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addAudio),{},{audio:e})),handleEdit({addAudio:Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_Code_Spiring_buzzle_creator_dashboard_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},addAudio),{},{audio:e})})},accept:"audio/*",uploadDirectory:"jobImages",name:"audio",label:"Audio File",onTouched:function(){return setFileError(null)},error:fileError,helperText:"Choose Audio file."}),addAudio.audio&&react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("audio",{controls:!0},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("source",{src:addAudio.audio,type:"audio/mpeg"})))},presets=["mp4","ogg","webm","mp3","m4a","gif"],actions={compress:renderCompress(),upload:renderUpload(),addWatermark:renderWatermark(),mergeVideos:renderMergeVideos(),addAudio:renderAddAudio(),addThumbnail:renderAddThumbnail(),rotateAction:renderRotateAction()};return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{fullWidth:!0,margin:"dense",variant:"outlined"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{id:"property-select"},"Action Name"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{labelId:"property-select",id:"property-select",onChange:function(e){var t;return setAction(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},name:"property",value:actionName,placeholder:"Select Action",label:"Action Name"},Object.keys(actions).map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{key:t,id:t,value:e,children:e,selected:actionName===e})})))),actions[action])}},673:function(e,t,a){e.exports=a.p+"static/media/spiring.5a649ff9.svg"},674:function(e,t,a){e.exports=a.p+"static/media/spiring_grey.4eaa8e78.svg"},675:function(e,t,a){e.exports=a.p+"static/media/landing.1e388c68.svg"},676:function(e,t,a){e.exports=a.p+"static/media/video.7d7a15b2.svg"},705:function(e,t,a){e.exports=a(1364)},77:function(e,t,a){"use strict";(function(e){var n=a(7),r=a(4),o=a.n(r),i=a(8),l=a(5),c=a(0),s=a.n(c),u=a(238),d=a(99),m=a(184),p=a(466),v=a(381),b=a(690),f=a(303),_=a(203),h=a(377),E=a(394),g=a.n(E),y=a(116),O=a(165),j=a(467),D=a(654),k=a(21);t.a=Object(c.forwardRef)((function(t,a){var r=t.required,E=t.name,S=t.value,x=t.onChange,w=t.forceUploadDirectory,C=void 0!==w&&w,T=t.label,P=t.extension,A=void 0===P?"png":P,R=t.accept,M=t.uploadDirectory,I=t.onError,L=t.cropEnabled,U=void 0!==L&&L,B=t.error,z=t.uploadFileNameColor,F=void 0===z?"":z,W=t.helperText,N=t.height,K=void 0===N?400:N,V=t.width,G=void 0===V?600:V,q=t.onTouched,J=t.storageType,H=void 0===J?"archive":J;a=a||{current:""};var Y=Object(c.useState)(B||null),Z=Object(l.a)(Y,2),X=Z[0],Q=Z[1],$=Object(k.b)().user,ee=Object(c.useState)("file"),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],re=Object(c.useState)(0),oe=Object(l.a)(re,2),ie=oe[0],le=oe[1],ce=Object(c.useState)(null),se=Object(l.a)(ce,2),ue=se[0],de=se[1],me=Object(c.useState)(!1),pe=Object(l.a)(me,2),ve=pe[0],be=pe[1],fe=Object(c.useState)(""),_e=Object(l.a)(fe,2),he=_e[0],Ee=_e[1],ge=Object(c.useState)(S?S.substring(S.lastIndexOf("/")+1):""),ye=Object(l.a)(ge,2),Oe=ye[0],je=ye[1],De=Object(c.useState)(!1),ke=Object(l.a)(De,2),Se=ke[0],xe=ke[1];Object(c.useEffect)((function(){S&&x(S)}),[]),Object(c.useEffect)((function(){S&&!S.startsWith("http")?Q(B||new Error("Invalid url, Please re-check the url")):Q(B||null)}),[B,S]);var we=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(null!==(a=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.files)&&void 0!==a?a:[null])[0]||(null!==(r=null===t||void 0===t||null===(i=t.dataTransfer)||void 0===i?void 0:i.files)&&void 0!==r?r:[null])[0]){e.next=3;break}return e.abrupt("return");case 3:return I?I(""):Q(null),je(l.name),e.next=7,Ce(l,l.name.split(".").pop());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,be(!0),r=Object(y.a)("".concat(C?"":"".concat(null!==(n=null===$||void 0===$?void 0:$.uid)&&void 0!==n?n:"user","/")).concat(M,"/").concat(Date.now(),".").concat(a),t,H),de(r),r.on("httpUploadProgress",(function(e){var t=e.loaded,a=e.total;return le(Math.floor(t/a*100))})),e.next=7,r.promise();case 7:i=e.sent,l=(l=i.Location).startsWith("http")?l:"https://".concat(l),be(!1),je(l.substring(l.lastIndexOf("/")+1)),x(l),q&&q(!0),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(0),de(null),je(S?S.substring(S.lastIndexOf("/")+1):""),be(!1),I?I(e.t0.message):Q(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),Te=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ue){e.next=4;break}return q&&q(!0),I?I("Failed to cancel upload"):Q(new Error("Failed to cancel upload")),e.abrupt("return");case 4:return e.prev=4,e.next=7,null===ue||void 0===ue?void 0:ue.abort();case 7:e.next=15;break;case 9:e.prev=9,e.t0=e.catch(4),je(S?S.substring(S.lastIndexOf("/")+1):""),be(!1),I?I(e.t0.message):Q(e.t0),de(null);case 15:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=16;break}return a=t.target.files[0],je(a.name),e.next=5,Object(O.f)(a);case 5:return n=e.sent,e.next=8,Object(j.getOrientation)(a);case 8:if(r=e.sent,!(i=O.a[r])){e.next=14;break}return e.next=13,Object(O.e)(n,i);case 13:n=e.sent;case 14:Ee(n),xe(!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.current={handleCropImage:Pe,handleUploadCancel:Te,handleUpload:Ce},s.a.createElement(u.a,{mt:2,mb:2},s.a.createElement(d.a,null,T,r&&" *"),s.a.createElement(m.a,{component:"fieldset"},s.a.createElement(p.a,{"aria-label":"type",name:"type",value:ae,onChange:function(e){var t=e.target.value;return ne(t)},row:!0},s.a.createElement(v.a,{value:"file",control:s.a.createElement(b.a,null),label:"File"}),s.a.createElement(v.a,{value:"url",control:s.a.createElement(b.a,null),label:"URL"}))),s.a.createElement(u.a,{my:1},"file"===ae?s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{onClick:function(e){e.target.value=null},accept:R,id:E,type:"file",onChange:U?Pe:we,style:{display:"none"}}),s.a.createElement("label",{htmlFor:E},s.a.createElement(f.a,{disabled:ve,variant:"contained",size:"small",color:"primary",startIcon:s.a.createElement(g.a,null),component:"span"},S?"Change":"Upload")),s.a.createElement(d.a,{style:Object(n.a)({marginLeft:10},F?{color:F}:{}),variant:"body2",component:"span",color:"textSecondary"},ve?" Uploading: ".concat(ie,"% "):" ".concat(Oe," ")),ve&&s.a.createElement(f.a,{onClick:Te,size:"small",color:"secondary",component:"span"},"Cancel")):s.a.createElement(_.a,{label:"File URL",placeholder:"Paste URL here",margin:"dense",style:{marginRight:20},variant:"outlined",value:S,onChange:function(e){var t=e.target.value;je(t.substring(t.lastIndexOf("/")+1)),Q(null),x(t)}})),s.a.createElement(h.a,{error:null!=X},X?null===X||void 0===X?void 0:X.message:W),Se&&s.a.createElement(D.a,{image:he,cropSize:{height:K,width:G},setIsCropperOpen:xe,onUpload:function(t){xe(!1);var a=new e.from(t.replace(/^data:image\/\w+;base64,/,""),"base64");Ce(a,A)},onCancel:function(){xe(!1),je(S?S.substring(S.lastIndexOf("/")+1):"")}}))}))}).call(this,a(25).Buffer)}},[[705,1,2]]]);
//# sourceMappingURL=main.84c3e007.chunk.js.map